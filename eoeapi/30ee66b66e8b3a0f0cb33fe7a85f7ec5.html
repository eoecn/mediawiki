{"title":"Drawable Animation","text":"<p>\u539f\u6587\u5730\u5740\uff1a<a rel=\"nofollow\" target=\"_blank\" class=\"external free\" href=\"http:\/\/docs.eoeandroid.com\/guide\/topics\/graphics\/drawable-animation.html\">http:\/\/docs.eoeandroid.com\/guide\/topics\/graphics\/drawable-animation.html<\/a>\n<\/p><p>\u7ffb\u8bd1\uff1acroftwql\n<\/p><p>\u66f4\u65b0\uff1a2012.06.15\n<\/p><p><br \/>\n<\/p>\n<h1> <span class=\"mw-headline\" id=\".E5.B8.A7.E5.8A.A8.E7.94.BB\"> \u5e27\u52a8\u753b <\/span><\/h1>\n<p>\u7ed8\u5236\u52a8\u753b\u53ef\u4ee5\u8ba9\u4f60\u52a0\u8f7d\u4e00\u7cfb\u5217Drawable\u7684\u8d44\u6e90\u9646\u7eed\u521b\u5efa\u4e00\u4e2a\u52a8\u753b\u3002\u8fd9\u662f\u4e00\u4e2a\u4f20\u7edf\u7684\u52a8\u753b\uff0c\u8fd9\u662f\u4e3a\u4e86\u53d1\u6325\u4e0d\u540c\u7684\u56fe\u50cf\uff0c\u5c31\u50cf\u4e00\u5377\u80f6\u5377\uff0c\u5e8f\u5217\u521b\u5efa\u3002<a rel=\"nofollow\" target=\"_blank\" class=\"external text\" href=\"http:\/\/docs.eoeandroid.com\/reference\/android\/graphics\/drawable\/AnimationDrawable.html\">AnimationDrawable<\/a>\u7c7b\u662f\u7ed8\u5236\u52a8\u753b\u7684\u57fa\u7840\u3002\n<\/p><p><br \/>\n\u867d\u7136\u4f60\u53ef\u4ee5\u5728\u4ee3\u7801\u4e2d\u5b9a\u4e49\u52a8\u753b\u5e27\uff0c\u4f7f\u7528<a rel=\"nofollow\" target=\"_blank\" class=\"external text\" href=\"http:\/\/docs.eoeandroid.com\/reference\/android\/graphics\/drawable\/AnimationDrawable.html\">AnimationDrawable<\/a>\u7684\u7c7b\u7684API\uff0c\u5b83\u66f4\u7b80\u5355\u5730\u7528\u4e00\u4e2a\u5355\u4e00\u7684XML\u6587\u4ef6\uff0c\u8be5\u6587\u4ef6\u5217\u51fa\u4e86\u5e27\u7ec4\u6210\u7684\u52a8\u753b\u5b8c\u6210\u3002\u8fd9\u79cd\u52a8\u753b\u7684XML\u6587\u4ef6\u5728\u4f60\u7684Android\u9879\u76ee\u7684res\/drawable\/\u76ee\u5f55\u4e0b\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6307\u793a\u52a8\u753b\u7684\u6bcf\u4e00\u5e27\u7684\u987a\u5e8f\u548c\u65f6\u95f4\u3002\n<\/p><p><br \/>\nXML\u6587\u4ef6\u5305\u542b\u4e00\u4e2a&lt;animation-list&gt;\u4f5c\u4e3a\u6839\u8282\u70b9\u548c\u4e00\u7cfb\u5217\u5b50\u5143\u7d20\u7684&lt;item&gt;\u8282\u70b9\uff0c\u6bcf\u4e2a\u5b9a\u4e49\u5e27\uff1a\u5e27\u5e27\u7684\u6301\u7eed\u65f6\u95f4\u7ed8\u5236\u8d44\u6e90\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\u4e3a\u7ed8\u5236\u52a8\u753b\u7684XML\u6587\u4ef6\uff1a\n<\/p>\n<pre class=\"java\">&#160;\n  &lt;animation-list   xmlns:android=<span style=\"color: #ff0000;\">&quot;http:\/\/schemas.android.com\/apk\/res\/android&quot;<\/span>\n    android:oneshot=<span style=\"color: #ff0000;\">&quot;true&quot;<\/span>&gt;\n    &lt;item android:drawable=<span style=\"color: #ff0000;\">&quot;@drawable\/rocket_thrust1&quot;<\/span> android:duration=<span style=\"color: #ff0000;\">&quot;200&quot;<\/span> \/&gt;\n    &lt;item android:drawable=<span style=\"color: #ff0000;\">&quot;@drawable\/rocket_thrust2&quot;<\/span> android:duration=<span style=\"color: #ff0000;\">&quot;200&quot;<\/span> \/&gt;\n    &lt;item android:drawable=<span style=\"color: #ff0000;\">&quot;@drawable\/rocket_thrust3&quot;<\/span> android:duration=<span style=\"color: #ff0000;\">&quot;200&quot;<\/span> \/&gt;\n  &lt;\/animation-list&gt;\n&#160;<\/pre>\n<p>\u6b64\u52a8\u753b\u8fd0\u884c\u53ea\u6709\u4e09\u5e27\u3002\u8bbe\u7f6e\u5217\u8868\u5c5e\u6027\u4e2d\u7684android:oneshot\u4e3atrue\uff0c\u5b83\u5c06\u53ea\u5faa\u73af\u4e00\u6b21\u5230\u6700\u540e\u4e00\u5e27\u505c\u6b62\u3002\u5982\u679c\u8bbe\u7f6e\u4e3afalse\uff0c\u5219\u8be5\u52a8\u753b\u5c06\u5faa\u73af\u3002\u8fd9\u4e2aXML\u4fdd\u5b58\u4e3arocket_thrust.xml\u5728\u9879\u76ee\u7684res\/drawable\/\u76ee\u5f55\u4e0b\u3002\u5b83\u80fd\u589e\u52a0\u4e00\u4e2a\u80cc\u666f\u56fe\u7247\u5728\u89c6\u56fe\u4e0a\uff0c\u5230\u65f6\u5019\u88ab\u64ad\u653e\u3002\u8fd9\u91cc\u6709\u4e2a\u754c\u9762\u4f8b\u5b50\uff0c\u4e00\u4e2a\u52a8\u753b\u662f\u589e\u52a0\u5728\u4e00\u4e2a<a rel=\"nofollow\" target=\"_blank\" class=\"external text\" href=\"http:\/\/docs.eoeandroid.com\/reference\/android\/widget\/ImageView.html\">ImageView<\/a>\u4e0a\u548c\u5f53\u5c4f\u5e55\u88ab\u89e6\u6478\u65f6\u5f00\u59cb\u52a8\u753b:\n<\/p>\n<pre class=\"java\">&#160;\n  AnimationDrawable rocketAnimation;\n&#160;\n  <span style=\"color: #000000; font-weight: bold;\">public<\/span> <span style=\"color: #993333;\">void<\/span> onCreate<span style=\"color: #66cc66;\">&#40;<\/span>Bundle savedInstanceState<span style=\"color: #66cc66;\">&#41;<\/span> <span style=\"color: #66cc66;\">&#123;<\/span>\n    <span style=\"color: #000000; font-weight: bold;\">super<\/span>.<span style=\"color: #006600;\">onCreate<\/span><span style=\"color: #66cc66;\">&#40;<\/span>savedInstanceState<span style=\"color: #66cc66;\">&#41;<\/span>;\n    setContentView<span style=\"color: #66cc66;\">&#40;<\/span>R.<span style=\"color: #006600;\">layout<\/span>.<span style=\"color: #006600;\">main<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n    ImageView rocketImage =<span style=\"color: #66cc66;\">&#40;<\/span>ImageView<span style=\"color: #66cc66;\">&#41;<\/span>findViewById<span style=\"color: #66cc66;\">&#40;<\/span>R.<span style=\"color: #006600;\">id<\/span>.<span style=\"color: #006600;\">rocket_image<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n    rocketImage.<span style=\"color: #006600;\">setBackgroundResource<\/span><span style=\"color: #66cc66;\">&#40;<\/span>R.<span style=\"color: #006600;\">drawable<\/span>.<span style=\"color: #006600;\">rocket_thrust<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n    rocketAnimation = <span style=\"color: #66cc66;\">&#40;<\/span>AnimationDrawable<span style=\"color: #66cc66;\">&#41;<\/span> rocketImage.<span style=\"color: #006600;\">getBackground<\/span><span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n  <span style=\"color: #66cc66;\">&#125;<\/span>\n&#160;\n  <span style=\"color: #000000; font-weight: bold;\">public<\/span> <span style=\"color: #993333;\">boolean<\/span> onTouchEvent<span style=\"color: #66cc66;\">&#40;<\/span>MotionEvent event<span style=\"color: #66cc66;\">&#41;<\/span> <span style=\"color: #66cc66;\">&#123;<\/span>\n    <span style=\"color: #b1b100;\">if<\/span> <span style=\"color: #66cc66;\">&#40;<\/span>event.<span style=\"color: #006600;\">getAction<\/span><span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #66cc66;\">&#41;<\/span> == MotionEvent.<span style=\"color: #006600;\">ACTION_DOWN<\/span><span style=\"color: #66cc66;\">&#41;<\/span> <span style=\"color: #66cc66;\">&#123;<\/span>\n      rocketAnimation.<span style=\"color: #006600;\">start<\/span><span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n      <span style=\"color: #000000; font-weight: bold;\">return<\/span> <span style=\"color: #000000; font-weight: bold;\">true<\/span>;\n    <span style=\"color: #66cc66;\">&#125;<\/span>\n    <span style=\"color: #000000; font-weight: bold;\">return<\/span> <span style=\"color: #000000; font-weight: bold;\">super<\/span>.<span style=\"color: #006600;\">onTouchEvent<\/span><span style=\"color: #66cc66;\">&#40;<\/span>event<span style=\"color: #66cc66;\">&#41;<\/span>;\n  <span style=\"color: #66cc66;\">&#125;<\/span>\n&#160;<\/pre>\n<p>\u91cd\u8981\u7684\u6ce8\u610f\u7684\u662f\u5bf9\u8c61AnimationDrawable\u7684start()\u65b9\u6cd5\u4e0d\u80fd\u5728\u4f60\u7684Activity\u7684onCreate()\u65b9\u6cd5\u91cc\u9762\u8c03\u7528\uff0c\u56e0\u4e3aAnimationDrawable\u662f\u5c1a\u672a\u5b8c\u5168\u8fde\u63a5\u7684\u7a97\u53e3\u3002\u5982\u679c\u4f60\u60f3\u7acb\u5373\u64ad\u653e\u52a8\u753b\uff0c\u65e0\u9700\u4e92\u52a8\uff0c\u5230\u90a3\u65f6\u5019\u4f60\u53ef\u4ee5\u8c03\u7528\u5b83\u7684<a rel=\"nofollow\" target=\"_blank\" class=\"external text\" href=\"http:\/\/docs.eoeandroid.com\/reference\/android\/app\/Activity.html#onWindowFocusChanged(boolean)\">onWindowFocusChanged()<\/a>\u65b9\u6cd5\u5728\u4f60\u7684Activity\u91cc\uff0c\u5b83\u5c06\u5728\u4f60\u7684\u7a97\u53e3\u89c6\u56fe\u88ab\u805a\u7126\u65f6\u5019\u8c03\u7528\u3002\n<\/p><p><br \/>\n\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0cXML\u8bed\u6cd5\uff0c\u53ef\u7528\u7684\u6807\u8bb0\u548c\u5c5e\u6027\uff0c\u770b\u5230\u52a8\u753b\u8d44\u6e90<a rel=\"nofollow\" target=\"_blank\" class=\"external text\" href=\"http:\/\/docs.eoeandroid.com\/guide\/topics\/resources\/animation-resource.html\">Animation Resources<\/a>\u3002\n<\/p><p><br \/>\n<a rel=\"nofollow\" target=\"_blank\" class=\"external text\" href=\"http:\/\/wiki.eoeandroid.com\/Animation\">\u2190 Back to Animation<\/a>\n<\/p>"}