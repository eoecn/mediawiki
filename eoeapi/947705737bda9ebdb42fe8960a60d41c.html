{"title":"List View","text":"<p><a rel=\"nofollow\" target=\"_blank\" class=\"external free\" href=\"http:\/\/docs.eoeandroid.com\/guide\/topics\/ui\/layout\/listview.html\">http:\/\/docs.eoeandroid.com\/guide\/topics\/ui\/layout\/listview.html<\/a>\n<\/p><p>\u4f5c\u8005\uff1asmilysas\n<\/p><p>\u66f4\u65b0\u65f6\u95f4\uff1a2012\u5e747\u670828\u65e5\n<\/p>\n<h1> <span class=\"mw-headline\" id=\"List_View\">List View<\/span><\/h1>\n<p>\u5217\u8868\u89c6\u56fe\u662f\u4e00\u4e2a\u6210\u5217\u663e\u793a\u6eda\u52a8\u9879\u7684\u89c6\u56fe\u7ec4\u5408\u3002\u6210\u5217\u7684\u9879\u90fd\u901a\u8fc7<a rel=\"nofollow\" target=\"_blank\" class=\"external text\" href=\"http:\/\/docs.eoeandroid.com\/reference\/android\/widget\/Adapter.html\">Adapter<\/a>]\u88ab\u81ea\u52a8\u63d2\u5165\u5230\u5217\u8868\u4e2d\uff0c\u5176\u4e2d\uff0c<a rel=\"nofollow\" target=\"_blank\" class=\"external text\" href=\"http:\/\/docs.eoeandroid.com\/reference\/android\/widget\/Adapter.html\">Adapter<\/a>\u9002\u914d\u5668\u53ef\u4ee5\u4ece\u6570\u7ec4\u6216\u8005\u6570\u636e\u5e93\u67e5\u8be2\u4e2d\u63d0\u53d6\u51fa\u5185\u5bb9\u5e76\u8f6c\u5316\u6210\u5217\u8868\u89c6\u56fe\u4e2d\u7684\u9879\u3002\n<\/p><p><a href=\"http:\/\/wiki.eoeandroid.com\/%E6%96%87%E4%BB%B6:Listview.png\" class=\"image\"><img alt=\"Listview.png\" src=\"http:\/\/wiki.eoeandroid.com\/images\/8\/84\/Listview.png\" width=\"400\" height=\"295\" \/><\/a>\n<\/p>\n<h2> <span class=\"mw-headline\" id=\".E4.BD.BF.E7.94.A8.E4.B8.80.E4.B8.AA.E5.8A.A0.E8.BD.BD.E8.80.85\"><b>\u4f7f\u7528\u4e00\u4e2a\u52a0\u8f7d\u8005<\/b><\/span><\/h2>\n<p>\u4f7f\u7528\u4e00\u4e2a<a rel=\"nofollow\" target=\"_blank\" class=\"external text\" href=\"http:\/\/docs.eoeandroid.com\/reference\/android\/support\/v4\/content\/CursorLoader.html\">CursorLoader<\/a>\u662f\u907f\u514d\u4e00\u4e2a\u5f02\u6b65\u4efb\u52a1\u67e5\u8be2\u5149\u6807<a rel=\"nofollow\" target=\"_blank\" class=\"external text\" href=\"http:\/\/docs.eoeandroid.com\/reference\/android\/database\/Cursor.html\">Cursor<\/a>\u65f6\u963b\u585e\u7a0b\u5e8f\u4e3b\u7ebf\u7a0b\u7684\u6807\u51c6\u9014\u5f84\u3002\u5f53<a rel=\"nofollow\" target=\"_blank\" class=\"external text\" href=\"http:\/\/docs.eoeandroid.com\/reference\/android\/support\/v4\/content\/CursorLoader.html\">CursorLoader<\/a>\u6536\u5230\u4e00\u4e2a<a rel=\"nofollow\" target=\"_blank\" class=\"external text\" href=\"http:\/\/docs.eoeandroid.com\/reference\/android\/database\/Cursor.html\">Cursor<\/a>\u7ed3\u679c\uff0c<a rel=\"nofollow\" target=\"_blank\" class=\"external text\" href=\"http:\/\/docs.eoeandroid.com\/reference\/android\/support\/v4\/app\/LoaderManager.LoaderCallbacks.html\">LoaderCallbacks<\/a>\u4f1a\u6536\u5230\u4e00\u4e2a\u5bf9onLoadFinished()\u7684\u56de\u8c03\uff0c\u8fd9\u65f6\u53ef\u4ee5\u5229\u7528\u65b0\u7684<a rel=\"nofollow\" target=\"_blank\" class=\"external text\" href=\"http:\/\/docs.eoeandroid.com\/reference\/android\/database\/Cursor.html\">Cursor<\/a>\u548c\u5217\u8868\u89c6\u56fe\u66f4\u65b0<a rel=\"nofollow\" target=\"_blank\" class=\"external text\" href=\"http:\/\/docs.eoeandroid.com\/reference\/android\/widget\/Adapter.html\">Adapter<\/a>\u5e76\u663e\u793a\u7ed3\u679c\u3002\n<\/p><p>\u867d\u7136<a rel=\"nofollow\" target=\"_blank\" class=\"external text\" href=\"http:\/\/docs.eoeandroid.com\/reference\/android\/support\/v4\/content\/CursorLoader.html\">CursorLoader<\/a>\u51fd\u6570\u5728Android3.0(API\u7ea7\u522b 11)\u4e2d\u624d\u7b2c\u4e00\u6b21\u5f15\u5165\uff0c\u7a0b\u5e8f\u53ef\u4ee5\u901a\u8fc7\u5f15\u5165<a rel=\"nofollow\" target=\"_blank\" class=\"external text\" href=\"http:\/\/docs.eoeandroid.com\/tools\/extras\/support-library.html\">Support Library<\/a>\u4f7f\u7528\u5b83\u4eec\u6765\u652f\u6301\u8fd0\u884cAndroid 1.6\u53ca\u4ee5\u4e0a\u7684\u8bbe\u5907\u3002\n<\/p><p>\u8981\u67e5\u770b\u66f4\u591a\u5173\u4e8e\u5229\u7528<a rel=\"nofollow\" target=\"_blank\" class=\"external text\" href=\"http:\/\/docs.eoeandroid.com\/reference\/android\/support\/v4\/content\/Loader.html\">Loader<\/a>\u5f02\u6b65\u52a0\u8f7d\u6570\u636e\u7684\u4fe1\u606f\uff0c\u8bf7\u53c2\u770b<a rel=\"nofollow\" target=\"_blank\" class=\"external text\" href=\"http:\/\/docs.eoeandroid.com\/guide\/components\/loaders.html\">Loaders<\/a>\n<\/p>\n<h2> <span class=\"mw-headline\" id=\".E4.BE.8B.E5.AD.90.EF.BC.9A\"><b>\u4f8b\u5b50\uff1a<\/b><\/span><\/h2>\n<p>\u4e0b\u9762\u7684\u4f8b\u5b50\u662f\u628a<a rel=\"nofollow\" target=\"_blank\" class=\"external text\" href=\"http:\/\/docs.eoeandroid.com\/reference\/android\/widget\/ListView.html\">ListView<\/a>\u4f5c\u4e3a\u552f\u4e00\u9ed8\u8ba4\u5e03\u5c40\u5143\u7d20\u7684\u6d3b\u52a8<a rel=\"nofollow\" target=\"_blank\" class=\"external text\" href=\"http:\/\/docs.eoeandroid.com\/reference\/android\/app\/ListActivity.html\">ListActivity<\/a>\u3002\u5b83\u5b8c\u6210\u5411<a rel=\"nofollow\" target=\"_blank\" class=\"external text\" href=\"http:\/\/docs.eoeandroid.com\/guide\/topics\/providers\/contacts-provider.html\">Contacts Provider<\/a>\u67e5\u8be2\u59d3\u540d\u548c\u7535\u8bdd\u53f7\u7801\u6e05\u5355\u7684\u529f\u80fd\u3002\n<\/p><p>\u4e3a\u4e86\u4f7f\u7528<a rel=\"nofollow\" target=\"_blank\" class=\"external text\" href=\"http:\/\/docs.eoeandroid.com\/reference\/android\/support\/v4\/content\/CursorLoader.html\">CursorLoader<\/a>\u5411\u5217\u8868\u52a8\u6001\u52a0\u8f7d\u6570\u636e\uff0c\u8fd9\u4e2a\u6d3b\u52a8\u5b9e\u73b0\u4e86<a rel=\"nofollow\" target=\"_blank\" class=\"external text\" href=\"http:\/\/docs.eoeandroid.com\/reference\/android\/support\/v4\/app\/LoaderManager.LoaderCallbacks.html\">LoaderCallbacks<\/a>\u63a5\u53e3\u3002\n<\/p>\n<pre class=\"java\">&#160;\n<span style=\"color: #000000; font-weight: bold;\">public<\/span> <span style=\"color: #000000; font-weight: bold;\">class<\/span> ListViewLoader <span style=\"color: #000000; font-weight: bold;\">extends<\/span> ListActivity\n        <span style=\"color: #000000; font-weight: bold;\">implements<\/span> LoaderManager.<span style=\"color: #006600;\">LoaderCallbacks<\/span>&lt;Cursor&gt; <span style=\"color: #66cc66;\">&#123;<\/span>\n&#160;\n    <span style=\"color: #808080; font-style: italic;\">\/\/ This is the Adapter being used to display the list's data<\/span>\n    SimpleCursorAdapter mAdapter;\n&#160;\n    <span style=\"color: #808080; font-style: italic;\">\/\/ These are the Contacts rows that we will retrieve<\/span>\n    <span style=\"color: #000000; font-weight: bold;\">static<\/span> <span style=\"color: #000000; font-weight: bold;\">final<\/span> <a href=\"http:\/\/www.google.com\/search?hl=en&amp;q=allinurl%3AString+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span style=\"color: #aaaadd; font-weight: bold;\">String<\/span><\/a><span style=\"color: #66cc66;\">&#91;<\/span><span style=\"color: #66cc66;\">&#93;<\/span> PROJECTION = <span style=\"color: #000000; font-weight: bold;\">new<\/span> <a href=\"http:\/\/www.google.com\/search?hl=en&amp;q=allinurl%3AString+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span style=\"color: #aaaadd; font-weight: bold;\">String<\/span><\/a><span style=\"color: #66cc66;\">&#91;<\/span><span style=\"color: #66cc66;\">&#93;<\/span> <span style=\"color: #66cc66;\">&#123;<\/span>ContactsContract.<span style=\"color: #006600;\">Data<\/span>._ID,\n            ContactsContract.<span style=\"color: #006600;\">Data<\/span>.<span style=\"color: #006600;\">DISPLAY_NAME<\/span><span style=\"color: #66cc66;\">&#125;<\/span>;\n&#160;\n    <span style=\"color: #808080; font-style: italic;\">\/\/ This is the select criteria<\/span>\n    <span style=\"color: #000000; font-weight: bold;\">static<\/span> <span style=\"color: #000000; font-weight: bold;\">final<\/span> <a href=\"http:\/\/www.google.com\/search?hl=en&amp;q=allinurl%3AString+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span style=\"color: #aaaadd; font-weight: bold;\">String<\/span><\/a> SELECTION = <span style=\"color: #ff0000;\">&quot;((&quot;<\/span> + \n            ContactsContract.<span style=\"color: #006600;\">Data<\/span>.<span style=\"color: #006600;\">DISPLAY_NAME<\/span> + <span style=\"color: #ff0000;\">&quot; NOTNULL) AND (&quot;<\/span> +\n            ContactsContract.<span style=\"color: #006600;\">Data<\/span>.<span style=\"color: #006600;\">DISPLAY_NAME<\/span> + <span style=\"color: #ff0000;\">&quot;&#160;!= '' ))&quot;<\/span>;\n&#160;\n    @Override\n    <span style=\"color: #000000; font-weight: bold;\">protected<\/span> <span style=\"color: #993333;\">void<\/span> onCreate<span style=\"color: #66cc66;\">&#40;<\/span>Bundle savedInstanceState<span style=\"color: #66cc66;\">&#41;<\/span> <span style=\"color: #66cc66;\">&#123;<\/span>\n        <span style=\"color: #000000; font-weight: bold;\">super<\/span>.<span style=\"color: #006600;\">onCreate<\/span><span style=\"color: #66cc66;\">&#40;<\/span>savedInstanceState<span style=\"color: #66cc66;\">&#41;<\/span>;\n&#160;\n        <span style=\"color: #808080; font-style: italic;\">\/\/ Create a progress bar to display while the list loads<\/span>\n        ProgressBar progressBar = <span style=\"color: #000000; font-weight: bold;\">new<\/span> ProgressBar<span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #000000; font-weight: bold;\">this<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n        progressBar.<span style=\"color: #006600;\">setLayoutParams<\/span><span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #000000; font-weight: bold;\">new<\/span> LayoutParams<span style=\"color: #66cc66;\">&#40;<\/span>LayoutParams.<span style=\"color: #006600;\">WRAP_CONTENT<\/span>,\n                LayoutParams.<span style=\"color: #006600;\">WRAP_CONTENT<\/span>, Gravity.<span style=\"color: #006600;\">CENTER<\/span><span style=\"color: #66cc66;\">&#41;<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n        progressBar.<span style=\"color: #006600;\">setIndeterminate<\/span><span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #000000; font-weight: bold;\">true<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n        getListView<span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #66cc66;\">&#41;<\/span>.<span style=\"color: #006600;\">setEmptyView<\/span><span style=\"color: #66cc66;\">&#40;<\/span>progressBar<span style=\"color: #66cc66;\">&#41;<\/span>;\n&#160;\n        <span style=\"color: #808080; font-style: italic;\">\/\/ Must add the progress bar to the root of the layout<\/span>\n        ViewGroup root = <span style=\"color: #66cc66;\">&#40;<\/span>ViewGroup<span style=\"color: #66cc66;\">&#41;<\/span> findViewById<span style=\"color: #66cc66;\">&#40;<\/span>android.<span style=\"color: #006600;\">R<\/span>.<span style=\"color: #006600;\">id<\/span>.<span style=\"color: #006600;\">content<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n        root.<span style=\"color: #006600;\">addView<\/span><span style=\"color: #66cc66;\">&#40;<\/span>progressBar<span style=\"color: #66cc66;\">&#41;<\/span>;\n&#160;\n        <span style=\"color: #808080; font-style: italic;\">\/\/ For the cursor adapter, specify which columns go into which views<\/span>\n        <a href=\"http:\/\/www.google.com\/search?hl=en&amp;q=allinurl%3AString+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span style=\"color: #aaaadd; font-weight: bold;\">String<\/span><\/a><span style=\"color: #66cc66;\">&#91;<\/span><span style=\"color: #66cc66;\">&#93;<\/span> fromColumns = <span style=\"color: #66cc66;\">&#123;<\/span>ContactsContract.<span style=\"color: #006600;\">Data<\/span>.<span style=\"color: #006600;\">DISPLAY_NAME<\/span><span style=\"color: #66cc66;\">&#125;<\/span>;\n        <span style=\"color: #993333;\">int<\/span><span style=\"color: #66cc66;\">&#91;<\/span><span style=\"color: #66cc66;\">&#93;<\/span> toViews = <span style=\"color: #66cc66;\">&#123;<\/span>android.<span style=\"color: #006600;\">R<\/span>.<span style=\"color: #006600;\">id<\/span>.<span style=\"color: #006600;\">text1<\/span><span style=\"color: #66cc66;\">&#125;<\/span>; <span style=\"color: #808080; font-style: italic;\">\/\/ The TextView in simple_list_item_1<\/span>\n&#160;\n        <span style=\"color: #808080; font-style: italic;\">\/\/ Create an empty adapter we will use to display the loaded data.<\/span>\n        <span style=\"color: #808080; font-style: italic;\">\/\/ We pass null for the cursor, then update it in onLoadFinished()<\/span>\n        mAdapter = <span style=\"color: #000000; font-weight: bold;\">new<\/span> SimpleCursorAdapter<span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #000000; font-weight: bold;\">this<\/span>, \n                android.<span style=\"color: #006600;\">R<\/span>.<span style=\"color: #006600;\">layout<\/span>.<span style=\"color: #006600;\">simple_list_item_1<\/span>, <span style=\"color: #000000; font-weight: bold;\">null<\/span>,\n                fromColumns, toViews, <span style=\"color: #cc66cc;\">0<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n        setListAdapter<span style=\"color: #66cc66;\">&#40;<\/span>mAdapter<span style=\"color: #66cc66;\">&#41;<\/span>;\n&#160;\n        <span style=\"color: #808080; font-style: italic;\">\/\/ Prepare the loader.  Either re-connect with an existing one,<\/span>\n        <span style=\"color: #808080; font-style: italic;\">\/\/ or start a new one.<\/span>\n        getLoaderManager<span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #66cc66;\">&#41;<\/span>.<span style=\"color: #006600;\">initLoader<\/span><span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #cc66cc;\">0<\/span>, <span style=\"color: #000000; font-weight: bold;\">null<\/span>, <span style=\"color: #000000; font-weight: bold;\">this<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n    <span style=\"color: #66cc66;\">&#125;<\/span>\n&#160;\n    <span style=\"color: #808080; font-style: italic;\">\/\/ Called when a new Loader needs to be created<\/span>\n    <span style=\"color: #000000; font-weight: bold;\">public<\/span> Loader&lt;Cursor&gt; onCreateLoader<span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #993333;\">int<\/span> id, Bundle args<span style=\"color: #66cc66;\">&#41;<\/span> <span style=\"color: #66cc66;\">&#123;<\/span>\n        <span style=\"color: #808080; font-style: italic;\">\/\/ Now create and return a CursorLoader that will take care of<\/span>\n        <span style=\"color: #808080; font-style: italic;\">\/\/ creating a Cursor for the data being displayed.<\/span>\n        <span style=\"color: #000000; font-weight: bold;\">return<\/span> <span style=\"color: #000000; font-weight: bold;\">new<\/span> CursorLoader<span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #000000; font-weight: bold;\">this<\/span>, ContactsContract.<span style=\"color: #006600;\">Data<\/span>.<span style=\"color: #006600;\">CONTENT_URI<\/span>,\n                PROJECTION, SELECTION, <span style=\"color: #000000; font-weight: bold;\">null<\/span>, <span style=\"color: #000000; font-weight: bold;\">null<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n    <span style=\"color: #66cc66;\">&#125;<\/span>\n&#160;\n    <span style=\"color: #808080; font-style: italic;\">\/\/ Called when a previously created loader has finished loading<\/span>\n    <span style=\"color: #000000; font-weight: bold;\">public<\/span> <span style=\"color: #993333;\">void<\/span> onLoadFinished<span style=\"color: #66cc66;\">&#40;<\/span>Loader&lt;Cursor&gt; loader, <a href=\"http:\/\/www.google.com\/search?hl=en&amp;q=allinurl%3ACursor+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span style=\"color: #aaaadd; font-weight: bold;\">Cursor<\/span><\/a> data<span style=\"color: #66cc66;\">&#41;<\/span> <span style=\"color: #66cc66;\">&#123;<\/span>\n        <span style=\"color: #808080; font-style: italic;\">\/\/ Swap the new cursor in.  (The framework will take care of closing the<\/span>\n        <span style=\"color: #808080; font-style: italic;\">\/\/ old cursor once we return.)<\/span>\n        mAdapter.<span style=\"color: #006600;\">swapCursor<\/span><span style=\"color: #66cc66;\">&#40;<\/span>data<span style=\"color: #66cc66;\">&#41;<\/span>;\n    <span style=\"color: #66cc66;\">&#125;<\/span>\n&#160;\n    <span style=\"color: #808080; font-style: italic;\">\/\/ Called when a previously created loader is reset, making the data unavailable<\/span>\n    <span style=\"color: #000000; font-weight: bold;\">public<\/span> <span style=\"color: #993333;\">void<\/span> onLoaderReset<span style=\"color: #66cc66;\">&#40;<\/span>Loader&lt;Cursor&gt; loader<span style=\"color: #66cc66;\">&#41;<\/span> <span style=\"color: #66cc66;\">&#123;<\/span>\n        <span style=\"color: #808080; font-style: italic;\">\/\/ This is called when the last Cursor provided to onLoadFinished()<\/span>\n        <span style=\"color: #808080; font-style: italic;\">\/\/ above is about to be closed.  We need to make sure we are no<\/span>\n        <span style=\"color: #808080; font-style: italic;\">\/\/ longer using it.<\/span>\n        mAdapter.<span style=\"color: #006600;\">swapCursor<\/span><span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #000000; font-weight: bold;\">null<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n    <span style=\"color: #66cc66;\">&#125;<\/span>\n&#160;\n    @Override \n    <span style=\"color: #000000; font-weight: bold;\">public<\/span> <span style=\"color: #993333;\">void<\/span> onListItemClick<span style=\"color: #66cc66;\">&#40;<\/span><a href=\"http:\/\/www.google.com\/search?hl=en&amp;q=allinurl%3AListView+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span style=\"color: #aaaadd; font-weight: bold;\">ListView<\/span><\/a> l, <a href=\"http:\/\/www.google.com\/search?hl=en&amp;q=allinurl%3AView+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span style=\"color: #aaaadd; font-weight: bold;\">View<\/span><\/a> v, <span style=\"color: #993333;\">int<\/span> position, <span style=\"color: #993333;\">long<\/span> id<span style=\"color: #66cc66;\">&#41;<\/span> <span style=\"color: #66cc66;\">&#123;<\/span>\n        <span style=\"color: #808080; font-style: italic;\">\/\/ Do something when a list item is clicked<\/span>\n    <span style=\"color: #66cc66;\">&#125;<\/span>\n<span style=\"color: #66cc66;\">&#125;<\/span>\n&#160;<\/pre>\n<div style=\"margin: 1em 0; padding: 10px; overflow: auto; background: #F7F7F7; border-left:4px solid; border-color:#258AAF;\">\n<p><b>\u6ce8\u610f<\/b>\uff1a\u56e0\u4e3a\u8fd9\u4e2a\u4f8b\u5b50\u8981\u5411<a rel=\"nofollow\" target=\"_blank\" class=\"external text\" href=\"http:\/\/docs.eoeandroid.com\/guide\/topics\/providers\/contacts-provider.html\">Contacts Provider<\/a>\u8bf7\u6c42\u67e5\u8be2\u6570\u636e\uff0c\u7a0b\u5e8f\u9700\u8981\u5728\u5236\u4f5c\u6e05\u5355\u6587\u4ef6\u4e2d\u8bf7\u6c42<a rel=\"nofollow\" target=\"_blank\" class=\"external text\" href=\"http:\/\/docs.eoeandroid.com\/reference\/android\/Manifest.permission.html#READ_CONTACTS\">READ_CONTACTS<\/a>\u6743\u9650\uff1a\n<\/p>\n<dl><dd>&lt;uses-permission android:name=\"android.permission.READ_CONTACTS\" \/&gt;\n<\/dd><\/dl>\n<\/div>"}