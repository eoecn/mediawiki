{"title":"Subscriptions","text":"<p>\u8d1f\u8d23\u4eba\uff1aeversleeping \n<\/p><p>\u539f\u6587\u94fe\u63a5\uff1a<a rel=\"nofollow\" target=\"_blank\" class=\"external free\" href=\"http:\/\/docs.eoeandroid.com\/guide\/google\/play\/billing\/billing_subscriptions.html\">http:\/\/docs.eoeandroid.com\/guide\/google\/play\/billing\/billing_subscriptions.html<\/a>\n<\/p><p><br \/>\n<\/p>\n<table id=\"toc\" class=\"toc\"><tr><td><div id=\"toctitle\"><h2>\u76ee\u5f55<\/h2><\/div>\n<ul>\n<li class=\"toclevel-1 tocsection-1\"><a href=\"#Subscriptions.EF.BC.88.E8.AE.A2.E9.98.85.EF.BC.89\"><span class=\"tocnumber\">1<\/span> <span class=\"toctext\">Subscriptions\uff08\u8ba2\u9605\uff09<\/span><\/a>\n<ul>\n<li class=\"toclevel-2 tocsection-2\"><a href=\"#Overview_of_Subscriptions\"><span class=\"tocnumber\">1.1<\/span> <span class=\"toctext\">Overview of Subscriptions<\/span><\/a>\n<ul>\n<li class=\"toclevel-3 tocsection-3\"><a href=\"#Subscription_publishing_and_unpublishing\"><span class=\"tocnumber\">1.1.1<\/span> <span class=\"toctext\">Subscription publishing and unpublishing<\/span><\/a><\/li>\n<li class=\"toclevel-3 tocsection-4\"><a href=\"#Subscription_pricing\"><span class=\"tocnumber\">1.1.2<\/span> <span class=\"toctext\">Subscription pricing<\/span><\/a><\/li>\n<li class=\"toclevel-3 tocsection-5\"><a href=\"#User_billing\"><span class=\"tocnumber\">1.1.3<\/span> <span class=\"toctext\">User billing<\/span><\/a><\/li>\n<li class=\"toclevel-3 tocsection-6\"><a href=\"#Subscription_cancellation\"><span class=\"tocnumber\">1.1.4<\/span> <span class=\"toctext\">Subscription cancellation<\/span><\/a><\/li>\n<li class=\"toclevel-3 tocsection-7\"><a href=\"#App_uninstallation\"><span class=\"tocnumber\">1.1.5<\/span> <span class=\"toctext\">App uninstallation<\/span><\/a><\/li>\n<li class=\"toclevel-3 tocsection-8\"><a href=\"#Refunds\"><span class=\"tocnumber\">1.1.6<\/span> <span class=\"toctext\">Refunds<\/span><\/a><\/li>\n<li class=\"toclevel-3 tocsection-9\"><a href=\"#Payment_processing_and_policies\"><span class=\"tocnumber\">1.1.7<\/span> <span class=\"toctext\">Payment processing and policies<\/span><\/a><\/li>\n<li class=\"toclevel-3 tocsection-10\"><a href=\"#System_requirements_for_subscriptions\"><span class=\"tocnumber\">1.1.8<\/span> <span class=\"toctext\">System requirements for subscriptions<\/span><\/a><\/li>\n<li class=\"toclevel-3 tocsection-11\"><a href=\"#Compatibility_considerations\"><span class=\"tocnumber\">1.1.9<\/span> <span class=\"toctext\">Compatibility considerations<\/span><\/a><\/li>\n<\/ul>\n<\/li>\n<li class=\"toclevel-2 tocsection-12\"><a href=\"#Implementing_Subscriptions\"><span class=\"tocnumber\">1.2<\/span> <span class=\"toctext\">Implementing Subscriptions<\/span><\/a>\n<ul>\n<li class=\"toclevel-3 tocsection-13\"><a href=\"#Sample_application\"><span class=\"tocnumber\">1.2.1<\/span> <span class=\"toctext\">Sample application<\/span><\/a><\/li>\n<li class=\"toclevel-3 tocsection-14\"><a href=\"#Application_model\"><span class=\"tocnumber\">1.2.2<\/span> <span class=\"toctext\">Application model<\/span><\/a><\/li>\n<li class=\"toclevel-3 tocsection-15\"><a href=\"#Purchase_token\"><span class=\"tocnumber\">1.2.3<\/span> <span class=\"toctext\">Purchase token<\/span><\/a><\/li>\n<li class=\"toclevel-3 tocsection-16\"><a href=\"#Requesting_a_subscription_purchase\"><span class=\"tocnumber\">1.2.4<\/span> <span class=\"toctext\">Requesting a subscription purchase<\/span><\/a><\/li>\n<li class=\"toclevel-3 tocsection-17\"><a href=\"#Restoring_transactions\"><span class=\"tocnumber\">1.2.5<\/span> <span class=\"toctext\">Restoring transactions<\/span><\/a><\/li>\n<\/ul>\n<\/li>\n<li class=\"toclevel-2 tocsection-18\"><a href=\"#Checking_subscription_validity.3D\"><span class=\"tocnumber\">1.3<\/span> <span class=\"toctext\">Checking subscription validity=<\/span><\/a>\n<ul>\n<li class=\"toclevel-3 tocsection-19\"><a href=\"#Launching_your_product_page_to_let_the_user_cancel_or_view_subscriptions\"><span class=\"tocnumber\">1.3.1<\/span> <span class=\"toctext\">Launching your product page to let the user cancel or view subscriptions<\/span><\/a><\/li>\n<li class=\"toclevel-3 tocsection-20\"><a href=\"#Recurring_billing.2C_cancellation.2C_and_changes_in_purchase_state\"><span class=\"tocnumber\">1.3.2<\/span> <span class=\"toctext\">Recurring billing, cancellation, and changes in purchase state<\/span><\/a><\/li>\n<li class=\"toclevel-3 tocsection-21\"><a href=\"#Modifying_your_app_for_subscriptions\"><span class=\"tocnumber\">1.3.3<\/span> <span class=\"toctext\">Modifying your app for subscriptions<\/span><\/a><\/li>\n<\/ul>\n<\/li>\n<li class=\"toclevel-2 tocsection-22\"><a href=\"#Administering_Subscriptions\"><span class=\"tocnumber\">1.4<\/span> <span class=\"toctext\">Administering Subscriptions<\/span><\/a><\/li>\n<li class=\"toclevel-2 tocsection-23\"><a href=\"#Google_Play_Android_Developer_API\"><span class=\"tocnumber\">1.5<\/span> <span class=\"toctext\">Google Play Android Developer API<\/span><\/a>\n<ul>\n<li class=\"toclevel-3 tocsection-24\"><a href=\"#Using_the_API\"><span class=\"tocnumber\">1.5.1<\/span> <span class=\"toctext\">Using the API<\/span><\/a><\/li>\n<li class=\"toclevel-3 tocsection-25\"><a href=\"#Quota\"><span class=\"tocnumber\">1.5.2<\/span> <span class=\"toctext\">Quota<\/span><\/a><\/li>\n<li class=\"toclevel-3 tocsection-26\"><a href=\"#Authorization\"><span class=\"tocnumber\">1.5.3<\/span> <span class=\"toctext\">Authorization<\/span><\/a><\/li>\n<li class=\"toclevel-3 tocsection-27\"><a href=\"#Using_the_API_efficiently\"><span class=\"tocnumber\">1.5.4<\/span> <span class=\"toctext\">Using the API efficiently<\/span><\/a><\/li>\n<\/ul>\n<\/li>\n<\/ul>\n<\/li>\n<\/ul>\n<\/td><\/tr><\/table>\n<h1> <span class=\"mw-headline\" id=\"Subscriptions.EF.BC.88.E8.AE.A2.E9.98.85.EF.BC.89\">Subscriptions\uff08\u8ba2\u9605\uff09<\/span><\/h1>\n<p>Subscriptions let you sell content, services, or features in your app with automated, recurring billing. Adding support for subscriptions is straightforward and you can easily adapt an existing In-app Billing implementation to sell subscriptions. \n<\/p><p>\u8ba2\u9605\u8ba9\u4f60\u5728\u81ea\u5df1\u7684\u5e94\u7528\u7a0b\u5e8f\u4e2d\u5356\u5185\u5bb9\u3001\u670d\u52a1\u6216\u529f\u80fd\u63d0\u4f9b\u81ea\u52a8\u5316\u3001\u91cd\u590d\u8ba1\u8d39\u3002\u6dfb\u52a0\u652f\u6301\u8ba2\u9605\u975e\u5e38\u7b80\u5355,\u60a8\u53ef\u4ee5\u8f7b\u677e\u5730\u8c03\u6574\u73b0\u6709\u5e94\u7528\u6536\u8d39\u5b9e\u73b0\u9500\u552e\u8ba2\u9605\u670d\u52a1\u3002\n<\/p><p>If you have already implemented In-app Billing for one-time purchase products, you will find that you can add support for subscriptions with minimal impact on your code. If you are new to In-app Billing, you can implement subscriptions using the standard communication model, data structures, and user interactions as for other in-app products.subscriptions. Because the implementation of subscriptions follows the same path as for other in-app products, details are provided outside of this document, starting with the In-app Billing Overview. \n<\/p><p>\u5982\u679c\u4f60\u5df2\u7ecf\u5b9e\u73b0\u4e86\u5e94\u7528\u6536\u8d39\u4e00\u6b21\u6027\u8d2d\u4e70\u4ea7\u54c1\u65f6,\u4f60\u5c31\u4f1a\u53d1\u73b0\u4f60\u53ef\u4ee5\u6dfb\u52a0\u652f\u6301\u8ba2\u9605\u4e0e\u6700\u5c0f\u7684\u5f71\u54cd\u4f60\u7684\u4ee3\u7801\u3002\u5982\u679c\u4f60\u662f\u65b0\u7684\u5e94\u7528\u6536\u8d39,\u60a8\u53ef\u4ee5\u5b9e\u73b0\u8ba2\u9605\u4f7f\u7528\u6807\u51c6\u7684\u901a\u4fe1\u6a21\u578b\u3001\u6570\u636e\u7ed3\u6784,\u4ee5\u53ca\u7528\u6237\u4ea4\u4e92\u5e94\u7528\u5185\u8ba2\u9605\u7b49\u5176\u4ed6\u4ea7\u54c1\u3002\u56e0\u4e3a\u5b9e\u65bd\u8ba2\u9605\u9075\u5faa\u76f8\u540c\u7684\u8def\u5f84\u7b49\u5176\u4ed6\u5e94\u7528\u5185\u7684\u4ea7\u54c1,\u63d0\u4f9b\u4e86\u8be6\u7ec6\u7684\u6587\u6863\u5916,\u4ece\u5e94\u7528\u6536\u8d39\u7684\u6982\u8ff0\u3002\n<\/p><p>This document is focused on highlighting implementation details that are specific to subscriptions, along with some strategies for the associated billing and business models.\n<\/p><p>\u672c\u6587\u6863\u91cd\u70b9\u5173\u6ce8\u5f3a\u8c03\u5b9e\u73b0\u7ec6\u8282\u662f\u7279\u5b9a\u4e8e\u8ba2\u9605,\u8fde\u540c\u4e00\u4e9b\u6218\u7565\u76f8\u5173\u7684\u8ba1\u8d39\u548c\u5546\u4e1a\u6a21\u5f0f\u3002\n<\/p>\n<h2> <span class=\"mw-headline\" id=\"Overview_of_Subscriptions\"><b>Overview of Subscriptions<\/b><\/span><\/h2>\n<p>A subscription is a new product type offered in In-app Billing that lets you sell content, services, or features to users from inside your app with recurring monthly or annual billing. You can sell subscriptions to almost any type of digital content, from any type of app or game.\n<\/p><p>\u8ba2\u9605\u662f\u4e00\u4e2a\u65b0\u7684\u4ea7\u54c1\u7c7b\u578b\u63d0\u4f9b\u5e94\u7528\u6536\u8d39,\u8ba9\u4f60\u5356\u5185\u5bb9\u3001\u670d\u52a1\u6216\u529f\u80fd\u6765\u4ece\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f\u7684\u7528\u6237\u5728\u7528\u9010\u6708\u6216\u5e74\u5ea6\u8ba1\u8d39\u3002\u4f60\u53ef\u4ee5\u8ba2\u9605\u5356\u7ed9\u51e0\u4e4e\u4efb\u4f55\u7c7b\u578b\u7684\u6570\u5b57\u5185\u5bb9,\u4ece\u4efb\u4f55\u7c7b\u578b\u7684\u5e94\u7528\u7a0b\u5e8f\u6216\u6e38\u620f\u3002\n<\/p><p>As with other in-app products, you configure and publish subscriptions using the Developer Console and then sell them from inside apps installed on an Android-powered devices. In the Developer console, you create subscription products and add them to a product list, setting a price for each, choosing a billing interval of monthly or annually, and then publishing. In your apps, it\u2019s straightforward to add support for subscription purchases. The implementation extends the standard In-app Billing API to support a new product type but uses the same communication model, data structures, and user interactions as for other in-app products.\n<\/p><p>\u4e0e\u5176\u4ed6\u5e94\u7528\u7a0b\u5e8f\u7684\u4ea7\u54c1,\u60a8\u53ef\u4ee5\u914d\u7f6e\u548c\u53d1\u5e03\u8ba2\u9605\u4f7f\u7528\u5f00\u53d1\u4eba\u5458\u63a7\u5236\u53f0,\u7136\u540e\u5356\u7ed9\u4ed6\u4eec\u4ece\u5185\u5e94\u7528\u7a0b\u5e8f\u5b89\u88c5\u5728\u4e00\u4e2a\u5b89\u5353\u8bbe\u5907\u3002\u5728\u5f00\u53d1\u4eba\u5458\u63a7\u5236\u53f0,\u60a8\u521b\u5efa\u8ba2\u9605\u7684\u4ea7\u54c1\u5e76\u5c06\u5b83\u4eec\u6dfb\u52a0\u5230\u4e00\u4e2a\u4ea7\u54c1\u5217\u8868,\u8bbe\u7f6e\u4e00\u4e2a\u4ef7\u683c\u5bf9\u6bcf\u4e2a\u4eba\u6765\u8bf4,\u9009\u62e9\u6bcf\u6708\u6216\u6bcf\u5e74\u7684\u8ba1\u8d39\u65f6\u95f4\u95f4\u9694,\u7136\u540e\u51fa\u7248\u3002\u5728\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f,\u53ef\u4ee5\u76f4\u63a5\u6dfb\u52a0\u652f\u6301\u8ba2\u9605\u8d2d\u4e70\u3002\u5b9e\u73b0\u6269\u5c55\u4e86\u5e94\u7528\u6536\u8d39\u6807\u51c6API\u652f\u6301\u4e00\u4e2a\u65b0\u7684\u4ea7\u54c1\u7c7b\u578b,\u4f7f\u7528\u76f8\u540c\u7684\u901a\u4fe1\u6a21\u578b\u3001\u6570\u636e\u7ed3\u6784,\u4ee5\u53ca\u7528\u6237\u4ea4\u4e92\u7b49\u5176\u4ed6\u5e94\u7528\u5185\u7684\u4ea7\u54c1\u3002\n<\/p><p>When users purchase subscriptions in your apps, Google Play handles all checkout details so your apps never have to directly process any financial transactions. Google Play processes all payments for subscriptions through Google Wallet, just as it does for standard in-app products and app purchases. This ensures a consistent and familiar purchase flow for your users.\n<\/p><p>\u5f53\u7528\u6237\u8d2d\u4e70\u8ba2\u9605\u5728\u4f60\u7684\u5e94\u7528\u8f6f\u4ef6,\u8c37\u6b4c\u73a9\u5904\u7406\u6240\u6709\u68c0\u51fa\u7ec6\u8282\u8ba9\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u6c38\u8fdc\u4e0d\u9700\u8981\u76f4\u63a5\u5904\u7406\u4efb\u4f55\u91d1\u878d\u4ea4\u6613\u3002\u8c37\u6b4c\u73a9\u5904\u7406\u6240\u6709\u901a\u8fc7\u8c37\u6b4c\u94b1\u5305\u652f\u4ed8\u8ba2\u9605,\u5c31\u50cf\u5b83\u5bf9\u6807\u51c6\u5e94\u7528\u5185\u8d2d\u4e70\u7684\u4ea7\u54c1\u548c\u5e94\u7528\u7a0b\u5e8f\u3002\u8fd9\u786e\u4fdd\u4e00\u81f4\u7684\u548c\u719f\u6089\u7684\u91c7\u8d2d\u6d41\u7a0b\u4e3a\u4f60\u7684\u7528\u6237\u3002\n<\/p><p><a href=\"http:\/\/wiki.eoeandroid.com\/%E6%96%87%E4%BB%B6:Billing_subscription_flow.png\" class=\"image\"><img alt=\"Billing subscription flow.png\" src=\"http:\/\/wiki.eoeandroid.com\/images\/0\/0d\/Billing_subscription_flow.png\" width=\"557\" height=\"324\" \/><\/a>\n<\/p><p>After users have purchase subscriptions, they can view the subscriptions and cancel them, if necessary, from the My Apps screen in the Play Store app or from the app's product details page in the Play Store app.\n<\/p><p>\u4ed8\u8d39\u7528\u6237\u4e4b\u540e,\u4ed6\u4eec\u53ef\u4ee5\u67e5\u770b\u8ba2\u9605\u548c\u53d6\u6d88\u4ed6\u4eec,\u5982\u679c\u6709\u5fc5\u8981,\u4ece\u6211\u7684\u5e94\u7528\u7a0b\u5e8f\u5c4f\u5e55\u64ad\u653e\u5b58\u50a8\u5e94\u7528\u7a0b\u5e8f\u6216\u5e94\u7528\u7684\u4ea7\u54c1\u7ec6\u8282\u9875\u9762\u5728\u5267\u4e2d\u5546\u5e97\u5e94\u7528\u7a0b\u5e8f\u3002\n<\/p><p>Once users have purchased a subscription through In-app Billing, you can easily give them extended access to additional content on your web site (or other service) through the use of a server-side API provided for In-app Billing. The server-side API lets you validate the status of a subscription when users sign into your other services. For more information about the API, see Google Play Android Developer API, below. \n<\/p><p>\u4e00\u65e6\u7528\u6237\u8d2d\u4e70\u4e86\u4e00\u5957\u901a\u8fc7\u5e94\u7528\u6536\u8d39\u8ba2\u9605,\u4f60\u53ef\u4ee5\u5f88\u5bb9\u6613\u5730\u7ed9\u4ed6\u4eec\u6269\u5c55\u8bbf\u95ee\u989d\u5916\u7684\u5185\u5bb9\u5728\u4f60\u7684\u7f51\u7ad9\u4e0a(\u6216\u5176\u4ed6\u670d\u52a1)\u901a\u8fc7\u4f7f\u7528\u4e00\u4e2a\u670d\u52a1\u5668\u7aefAPI\u63d0\u4f9b\u4e86\u5e94\u7528\u6536\u8d39\u3002\u670d\u52a1\u5668\u7aefAPI\u5141\u8bb8\u60a8\u9a8c\u8bc1\u72b6\u6001\u7684\u8ba2\u9605\u5f53\u7528\u6237\u767b\u5f55\u5230\u60a8\u7684\u5176\u4ed6\u670d\u52a1\u3002\u8be5API\u7684\u66f4\u591a\u4fe1\u606f,\u8bf7\u53c2\u9605\u8c37\u6b4cAndroid\u5f00\u53d1\u8005API\u3002\n<\/p><p>You can also build on your existing external subscriber base from inside your Android apps. If you sell subscriptions on a web site, for example, you can add your own business logic to your Android app to determine whether the user has already purchased a subscription elsewhere, then allow access to your content if so or offer a subscription purchase from Google Play if not.\n<\/p><p>\u60a8\u8fd8\u53ef\u4ee5\u6784\u5efa\u5728\u4f60\u73b0\u6709\u7684\u5916\u90e8\u7528\u6237\u57fa\u6570\u4ece\u5185\u4f60\u7684Android\u5e94\u7528\u7a0b\u5e8f\u3002\u5982\u679c\u4f60\u5728\u7f51\u7ad9\u4e0a\u9500\u552e\u8ba2\u9605\u670d\u52a1,\u4f8b\u5982,\u60a8\u53ef\u4ee5\u6dfb\u52a0\u60a8\u81ea\u5df1\u7684\u4e1a\u52a1\u903b\u8f91\u6765\u4f60\u7684Android\u5e94\u7528\u7a0b\u5e8f\u6765\u786e\u5b9a\u8be5\u7528\u6237\u662f\u5426\u5df2\u7ecf\u8d2d\u4e70\u4e86\u4e00\u4e2a\u8ba2\u9605\u5176\u4ed6\u5730\u65b9,\u7136\u540e\u5141\u8bb8\u8bbf\u95ee\u4f60\u7684\u5185\u5bb9\u5982\u679c\u6240\u4ee5\u6216\u63d0\u4f9b\u8ba2\u9605\u8c37\u6b4c\u8d2d\u4e70\u73a9\u5982\u679c\u4e0d\u662f\u3002\n<\/p><p>With the flexibility of In-app Billing, you can even implement your own solution for sharing subscriptions across as many different apps or products as you want. For example, you could sell a subscription that gives a subscriber access to an entire collection of apps, games, or other content for a monthly or annual fee. To implement this solution, you could add your own business logic to your app to determine whether the user has already purchased a given subscription and if so, allow access to your content. \n<\/p><p>\u7075\u6d3b\u6027\u5e94\u7528\u6536\u8d39,\u4f60\u751a\u81f3\u53ef\u4ee5\u5b9e\u73b0\u60a8\u81ea\u5df1\u7684\u89e3\u51b3\u65b9\u6848\u4e3a\u5171\u4eab\u8ba2\u9605\u5230\u5c3d\u53ef\u80fd\u591a\u7684\u4e0d\u540c\u7684\u5e94\u7528\u7a0b\u5e8f\u6216\u4ea7\u54c1\u50cf\u4f60\u5e0c\u671b\u7684\u90a3\u6837\u3002\u4f8b\u5982,\u4f60\u53ef\u4ee5\u5356\u4e00\u4e2a\u8ba2\u9605,\u7ed9\u51fa\u4e86\u4e00\u4e2a\u7528\u6237\u8bbf\u95ee\u6574\u4e2a\u7cfb\u5217\u7684\u5e94\u7528\u3001\u6e38\u620f\u6216\u5176\u4ed6\u5185\u5bb9,\u6309\u6708\u6216\u5e74\u8d39\u3002\u5b9e\u73b0\u8fd9\u79cd\u89e3\u51b3\u65b9\u6848,\u60a8\u53ef\u4ee5\u6dfb\u52a0\u60a8\u81ea\u5df1\u7684\u4e1a\u52a1\u903b\u8f91\u6765\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u6765\u786e\u5b9a\u8be5\u7528\u6237\u662f\u5426\u5df2\u7ecf\u8d2d\u4e70\u4e86\u4e00\u4e2a\u7ed9\u5b9a\u8ba2\u9605,\u5982\u679c\u8fd9\u6837\u7684\u8bdd,\u5141\u8bb8\u8bbf\u95ee\u4f60\u7684\u5185\u5bb9\u3002\n<\/p><p>In general the same basic policies and terms apply to subscriptions as to standard in-app products, however there are some differences. For complete information about the current policies and terms, please read the policies document.\n<\/p><p>\u5728\u4e00\u822c\u7684\u76f8\u540c\u7684\u57fa\u672c\u653f\u7b56\u548c\u6761\u6b3e\u9002\u7528\u4e8e\u8ba2\u9605\u4ee5\u6807\u51c6\u5e94\u7528\u7684\u4ea7\u54c1,\u4f46\u662f\u6709\u4e00\u4e9b\u5dee\u5f02\u3002\u5173\u4e8e\u5f53\u524d\u7684\u5b8c\u6574\u4fe1\u606f\u653f\u7b56\u548c\u6761\u6b3e,\u8bf7\u9605\u8bfb\u7b56\u7565\u6587\u6863\u3002\n<\/p>\n<h3> <span class=\"mw-headline\" id=\"Subscription_publishing_and_unpublishing\"><b>Subscription publishing and unpublishing<\/b><\/span><\/h3>\n<p>To sell a subscription in an app, you use the tools in the Developer Console to set up a product list for the app and then create and configure a new subscription. In the subscription, you set the price and billing interval and define a subscription ID, title, and description. When you are ready, you can then publish the subscription in the app product list.\n<\/p><p>\u51fa\u552e\u8ba2\u9605\u5e94\u7528\u7a0b\u5e8f\u91cc,\u4f60\u4f7f\u7528\u5de5\u5177\u7684\u5f00\u53d1\u4eba\u5458\u63a7\u5236\u53f0\u6765\u5efa\u7acb\u4e00\u4e2a\u4ea7\u54c1\u5217\u8868\u7684\u5e94\u7528\u7a0b\u5e8f,\u7136\u540e\u521b\u5efa\u5e76\u914d\u7f6e\u4e00\u4e2a\u65b0\u7684\u8ba2\u9605\u3002\u5728\u8ba2\u9605,\u4f60\u53ef\u4ee5\u8bbe\u5b9a\u4ef7\u683c\u548c\u8ba1\u8d39\u95f4\u9694\u548c\u5b9a\u4e49\u4e00\u4e2a\u8ba2\u9605ID\u3001\u6807\u9898\u548c\u63cf\u8ff0\u3002\u5f53\u4f60\u51c6\u5907\u597d\u4e86,\u7136\u540e\u60a8\u53ef\u4ee5\u53d1\u5e03\u4e2d\u7684\u8ba2\u9605\u5e94\u7528\u7a0b\u5e8f\u4ea7\u54c1\u5217\u8868\u3002\n<\/p><p>In the product list, you can add subscriptions, in-app products, or both. You can add multiple subscriptions that give access to different content or services, or you can add multiple subscriptions that give access to the same content but for different intervals or different prices, such as for a promotion. For example, a news outlet might decide to offer both monthly and annual subscriptions to the same content, with annual having a discount. You can also offer in-app purchase equivalents for subscription products, to ensure that your content is available to users of older devices that do not support subscriptions.\n<\/p><p>\u5728\u4ea7\u54c1\u5217\u8868\u4e2d,\u60a8\u53ef\u4ee5\u6dfb\u52a0\u8ba2\u9605,\u5e94\u7528\u5185\u7684\u4ea7\u54c1,\u6216\u4e24\u8005\u517c\u800c\u6709\u4e4b\u3002\u60a8\u53ef\u4ee5\u6dfb\u52a0\u591a\u4e2a\u8ba2\u9605,\u83b7\u5f97\u4e0d\u540c\u7684\u5185\u5bb9\u6216\u670d\u52a1,\u6216\u8005\u60a8\u53ef\u4ee5\u6dfb\u52a0\u591a\u4e2a\u8ba2\u9605,\u7ed9\u8bbf\u95ee\u76f8\u540c\u7684\u5185\u5bb9,\u4f46\u5bf9\u4e8e\u4e0d\u540c\u7684\u65f6\u95f4\u95f4\u9694\u6216\u4e0d\u540c\u7684\u4ef7\u683c,\u6bd4\u5982\u664b\u5347\u3002\u4f8b\u5982,\u4e00\u4e2a\u65b0\u95fb\u7684\u51fa\u53e3\u53ef\u80fd\u51b3\u5b9a\u540c\u65f6\u63d0\u4f9b\u6708\u5ea6\u548c\u5e74\u5ea6\u8ba2\u9605\u76f8\u540c\u7684\u5185\u5bb9,\u5e74\u5ea6\u6709\u6298\u6263\u3002\u4f60\u4e5f\u53ef\u4ee5\u63d0\u4f9b\u5e94\u7528\u5185\u8d2d\u4e70\u7b49\u4ef7\u7684\u8ba2\u9605\u7684\u4ea7\u54c1,\u4ee5\u786e\u4fdd\u4f60\u7684\u5185\u5bb9\u53ef\u4f9b\u7528\u6237\u7684\u8001\u8bbe\u5907\u4e0d\u652f\u6301\u8ba2\u9605\u3002\n<\/p><p>After you add a subscription or in-app product to the product list, you must publish the product before Google Play can make it available for purchase. Note that you must also publish the app itself before Google Play will make the products available for purchase inside the app. \n<\/p><p>\u5728\u4f60\u6dfb\u52a0\u8ba2\u9605\u6216\u5e94\u7528\u5185\u4ea7\u54c1\u7684\u4ea7\u54c1\u5217\u8868,\u60a8\u5fc5\u987b\u53d1\u5e03\u4ea7\u54c1\u4e4b\u524d\u8c37\u6b4c\u73a9\u800d,\u80fd\u8ba9\u5b83\u53ef\u4ee5\u8d2d\u4e70\u3002\u8bf7\u6ce8\u610f,\u60a8\u8fd8\u5fc5\u987b\u53d1\u5e03\u5e94\u7528\u7a0b\u5e8f\u672c\u8eab\u4f1a\u4f7f\u8c37\u6b4c\u4e4b\u524d\u73a9\u53ef\u4f9b\u8d2d\u4e70\u7684\u4ea7\u54c1\u8fdb\u5165\u5e94\u7528\u7a0b\u5e8f\u3002\n<\/p>\n<div style=\"margin: 1em 0; padding: 10px; overflow: auto; background: #F7F7F7; border-left:4px solid; border-color:#FF7F00;\">\n<p>Important: At this time, the capability to unpublish a subscription is not available. Support for unpublishing a subscription is coming to the Developer Console in the weeks ahead, so this is a temporary limitation. In the short term, instead of unpublishing, you can remove the subscription product from the product list offered in your app to prevent users from seeing or purchasing it.\n<\/p><p>\u91cd\u8981:\u5728\u8fd9\u4e2a\u65f6\u95f4,\u80fd\u591f\u53d6\u6d88\u53d1\u5e03\u8ba2\u9605\u662f\u4e0d\u53ef\u7528\u7684\u3002\u652f\u6301unpublishing\u8ba2\u9605\u6765\u5f00\u53d1\u4eba\u5458\u63a7\u5236\u53f0\u5728\u672a\u6765\u51e0\u5468\u5185,\u6240\u4ee5\u8fd9\u662f\u4e00\u4e2a\u6682\u65f6\u7684\u9650\u5236\u3002\u5728\u77ed\u671f\u5185,\u800c\u4e0d\u662funpublishing,\u60a8\u53ef\u4ee5\u5220\u9664\u8ba2\u9605\u7684\u4ea7\u54c1\u4ece\u4ea7\u54c1\u5217\u8868\u63d0\u4f9b\u4e86\u5728\u81ea\u5df1\u7684\u5e94\u7528\u7a0b\u5e8f,\u4ee5\u9632\u6b62\u7528\u6237\u770b\u5230\u6216\u8d2d\u4e70\u5b83\u3002\n<\/p>\n<\/div>\n<h3> <span class=\"mw-headline\" id=\"Subscription_pricing\"><b>Subscription pricing<\/b><\/span><\/h3>\n<p>When you create a subscription in the Developer Console, you can set a price for it in any available currencies. Each subscription must have a non-zero price. You can price multiple subscriptions for the same content differently \u2014 for example you could offer a discount on an annual subscription relative to the monthly equivalent. \n<\/p><p>\u5f53\u4f60\u521b\u5efa\u4e00\u4e2a\u8ba2\u9605\u5728\u5f00\u53d1\u4eba\u5458\u63a7\u5236\u53f0,\u60a8\u53ef\u4ee5\u8bbe\u7f6e\u4e00\u4e2a\u4ef7\u683c\u5728\u4efb\u4f55\u53ef\u7528\u7684\u8d27\u5e01\u3002\u6bcf\u4e2a\u8ba2\u9605\u5fc5\u987b\u6709\u4e00\u4e2a\u975e\u96f6\u7684\u4ef7\u683c\u3002\u60a8\u53ef\u4ee5\u4e3a\u591a\u4e2a\u8ba2\u9605\u4ef7\u683c\u76f8\u540c\u5185\u5bb9\u7684\u4e0d\u540c\u2014\u2014\u4f8b\u5982\u4f60\u53ef\u4ee5\u63d0\u4f9b\u4e00\u4e2a\u4f18\u60e0\u8ba2\u9605\u4e00\u5e74\u76f8\u5bf9\u4e8e\u6bcf\u6708\u7684\u7b49\u6548\u3002\n<\/p>\n<div style=\"margin: 1em 0; padding: 10px; overflow: auto; background: #F7F7F7; border-left:4px solid; border-color:#FF7F00;\">\n<p>Important: At this time, once you publish a subscription product, you cannot change its price in any currency. Support for changing the price of published subscriptions is coming to the Developer Console in the weeks ahead. In the short term, you can work around this limitation by publishing a new subscription product ID at a new price, then offer it in your app instead of the original product. Users who have already purchased will continue to be charged at the original price, but new users will be charged at the new price.\n<\/p><p>\u91cd\u8981:\u5728\u8fd9\u4e2a\u65f6\u95f4,\u4e00\u65e6\u60a8\u53d1\u5e03\u4e00\u4e2a\u8ba2\u9605\u4ea7\u54c1,\u4f60\u4e0d\u80fd\u6539\u53d8\u5b83\u7684\u4ef7\u683c\u5728\u4efb\u4f55\u8d27\u5e01\u3002\u652f\u6301\u66f4\u6539\u53d1\u5e03\u8ba2\u9605\u7684\u4ef7\u683c\u6765\u5f00\u53d1\u4eba\u5458\u63a7\u5236\u53f0\u5728\u672a\u6765\u51e0\u5468\u5185\u3002\u5728\u77ed\u671f\u5185,\u60a8\u53ef\u4ee5\u89e3\u51b3\u8fd9\u4e2a\u9650\u5236\u901a\u8fc7\u53d1\u5e03\u4e00\u4e2a\u65b0\u7684\u8ba2\u9605\u4ea7\u54c1ID\u5728\u4e00\u4e2a\u65b0\u7684\u4ef7\u683c,\u7136\u540e\u63d0\u4f9b\u5b83\u5728\u81ea\u5df1\u7684\u5e94\u7528\u7a0b\u5e8f\u800c\u4e0d\u662f\u539f\u59cb\u7684\u4ea7\u54c1\u3002\u7528\u6237\u5df2\u7ecf\u8d2d\u4e70\u5c06\u7ee7\u7eed\u88ab\u6307\u63a7\u5728\u539f\u6765\u7684\u4ef7\u683c,\u4f46\u662f\u65b0\u7528\u6237\u5c06\u88ab\u6536\u53d6\u7684\u65b0\u4ef7\u683c\u3002\n<\/p>\n<\/div>\n<h3> <span class=\"mw-headline\" id=\"User_billing\"><b>User billing<\/b><\/span><\/h3>\n<p>You can sell subscription products with automated recurring billing at either of two intervals:\n<\/p><p>\u4f60\u53ef\u4ee5\u5356\u8ba2\u9605\u4ea7\u54c1\u4e0e\u81ea\u52a8\u91cd\u590d\u8ba1\u8d39,\u8981\u4e48\u4e24\u4e2a\u95f4\u9694:\n<\/p>\n<ul><li>Monthly \u2014 Google Play bills the customer\u2019s Google Wallet account at the time of purchase and monthly subsequent to the purchase date (exact billing intervals can vary slightly over time) \n<\/li><\/ul>\n<ul><li>\u6bcf\u6708\u2014\u2014\u8c37\u6b4c\u73a9\u8d26\u5355\u5ba2\u6237\u7684\u8c37\u6b4c\u94b1\u5305\u8d26\u6237\u5728\u8d2d\u4e70\u548c\u6bcf\u6708\u7684\u540e\u7eed\u8d2d\u4e70\u65e5\u671f(\u786e\u5207\u7684\u8ba1\u8d39\u65f6\u95f4\u95f4\u9694\u968f\u7740\u65f6\u95f4\u4f1a\u7565\u6709\u4e0d\u540c)\n<\/li><\/ul>\n<ul><li>Annually \u2014 Google Play bills the customer's Google Wallet account at the time of purchase and again on the same date in subsequent years. \n<\/li><\/ul>\n<ul><li>\u6bcf\u5e74\u4e00\u6b21\u2014\u2014\u8c37\u6b4c\u73a9\u8d26\u5355\u5ba2\u6237\u7684\u8c37\u6b4c\u94b1\u5305\u8d26\u6237\u7684\u65f6\u5019\u518d\u8d2d\u4e70\u5e76\u5728\u76f8\u540c\u7684\u65e5\u671f\u5728\u63a5\u4e0b\u6765\u7684\u51e0\u5e74\u3002\n<\/li><\/ul>\n<p>Billing continues indefinitely at the interval and price specified for the subscription. At each subscription renewal, Google Play charges the user account automatically, then notifies the user of the charges afterward by email. Billing cycles will always match subscription cycles, based on the purchase date.\n<\/p><p>\u8ba1\u8d39\u65e0\u9650\u5ef6\u4f38\u7684\u95f4\u9694\u548c\u6307\u5b9a\u8ba2\u9605\u7684\u4ef7\u683c\u3002\u5728\u6bcf\u4e2a\u7eed\u8ba2\u8c37\u6b4c\u73a9\u6307\u63a7\u7528\u6237\u5e10\u53f7\u81ea\u52a8,\u7136\u540e\u901a\u77e5\u7528\u6237\u901a\u8fc7\u7535\u5b50\u90ae\u4ef6\u7684\u6307\u63a7\u4e4b\u540e\u3002\u8d26\u5355\u5468\u671f\u5c06\u603b\u662f\u4f1a\u5339\u914d\u8ba2\u9605\u5468\u671f,\u6839\u636e\u8d2d\u4e70\u65e5\u671f\u3002\n<\/p><p>Over the life of a subscription, the form of payment billed remains the same \u2014 Google Play always bills the same form of payment (such as credit card, Direct Carrier Billing) that was originally used to purchase the subscription.\n<\/p><p>\u4e00\u751f\u7684\u8ba2\u9605,\u4ed8\u6b3e\u7684\u5f62\u5f0f\u5ba3\u4f20\u662f\u4e00\u6837\u7684\u2014\u2014\u8c37\u6b4c\u5bf9\u624b\u603b\u662f\u8d26\u5355\u76f8\u540c\u7684\u4ed8\u6b3e\u65b9\u5f0f(\u6bd4\u5982\u4fe1\u7528\u5361,\u76f4\u63a5\u8fd0\u8425\u5546\u8d26\u5355),\u539f\u672c\u7528\u6765\u8d2d\u4e70\u8ba2\u9605\u3002\n<\/p><p>When the subscription payment is approved by Google Wallet, Google Play provides a purchase token back to the purchasing app through the In-app Billing API. For details, see Purchase token, below. Your apps can store the token locally or pass it to your backend servers, which can then use it to validate or cancel the subscription remotely using the Google Play Android Developer API.\n<\/p><p>\u5f53\u8ba2\u9605\u4ed8\u6b3e\u6279\u51c6\u8c37\u6b4c\u94b1\u5305,\u8c37\u6b4c\u64ad\u653e\u63d0\u4f9b\u4e86\u4e00\u4e2a\u8d2d\u4e70\u8bb0\u53f7\u4f20\u56de\u91c7\u8d2d\u5e94\u7528\u7a0b\u5e8f\u5230\u5e94\u7528\u6536\u8d39\u7684API\u3002\u6709\u5173\u8be6\u7ec6\u4fe1\u606f,\u8bf7\u53c2\u89c1\u8d2d\u4e70\u4ee4\u724c,\u4e0b\u9762\u3002\u4f60\u7684\u5e94\u7528\u53ef\u4ee5\u5728\u672c\u5730\u5b58\u50a8\u4ee4\u724c\u6216\u5c06\u5b83\u4f20\u9012\u7ed9\u4f60\u7684\u540e\u7aef\u670d\u52a1\u5668,\u7136\u540e\u4f7f\u7528\u5b83\u6765\u9a8c\u8bc1\u6216\u53d6\u6d88\u8ba2\u9605\u8fdc\u7a0b\u4f7f\u7528\u8c37\u6b4cAndroid\u5f00\u53d1\u8005API\u73a9\u3002\n<\/p><p>If a recurring payment fails, such as could happen if the customer\u2019s credit card has become invalid, the subscription does not renew. Google Play notifies your app at the end of the active cycle that the purchase state of the subscription is now \"Expired\". Your app does not need to grant the user further access to the subscription content.\n<\/p><p>\u5982\u679c\u4e00\u4e2a\u7ecf\u5e38\u6027\u4ed8\u6b3e\u5931\u8d25,\u5982\u53ef\u80fd\u4f1a\u5728\u5ba2\u6237\u7684\u4fe1\u7528\u5361\u5df2\u7ecf\u6210\u4e3a\u65e0\u6548,\u8ba2\u9605\u6ca1\u6709\u7eed\u7b7e\u3002\u8c37\u6b4c\u6253\u901a\u77e5\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u7ed3\u675f\u65f6\u7684\u6d3b\u52a8\u5468\u671f,\u91c7\u8d2d\u72b6\u6001\u7684\u8ba2\u9605\u73b0\u5728\u201c\u8fc7\u671f\u201d\u3002\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u4e0d\u9700\u8981\u6388\u4e88\u7528\u6237\u8fdb\u4e00\u6b65\u8bbf\u95ee\u8ba2\u9605\u5185\u5bb9\u3002\n<\/p><p>As a best practice, we recommend that your app includes business logic to notify your backend servers of subscription purchases, tokens, and any billing errors that may occur. Your backend servers can use the server-side API to query and update your records and follow up with customers directly, if needed.\n<\/p><p>\u4f5c\u4e3a\u4e00\u9879\u6700\u4f73\u5b9e\u8df5,\u6211\u4eec\u5efa\u8bae\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f\u5305\u542b\u4e1a\u52a1\u903b\u8f91\u6765\u901a\u77e5\u4f60\u7684\u540e\u7aef\u670d\u52a1\u5668\u7684\u8ba2\u9605\u8d2d\u4e70,\u4ee4\u724c,\u4ee5\u53ca\u4efb\u4f55\u53ef\u80fd\u51fa\u73b0\u7684\u9519\u8bef\u6536\u8d39\u3002\u4f60\u7684\u540e\u7aef\u670d\u52a1\u5668\u53ef\u4ee5\u4f7f\u7528\u670d\u52a1\u5668\u7aefAPI\u67e5\u8be2\u548c\u66f4\u65b0\u4f60\u7684\u8bb0\u5f55\u548c\u8ddf\u8e2a\u76f4\u63a5\u4e0e\u5ba2\u6237,\u5982\u679c\u9700\u8981\u7684\u8bdd\u3002\n<\/p>\n<h3> <span class=\"mw-headline\" id=\"Subscription_cancellation\"><b>Subscription cancellation<\/b><\/span><\/h3>\n<p>Users can view the status of all of their subscriptions and cancel them if necessary from the My Apps screen in the Play Store app. Currently, the In-app Billing API does not provide support for canceling subscriptions direct from inside the purchasing app, although your app can broadcast an Intent to launch the Play Store app directly to the My Apps screen.\n<\/p><p>\u7528\u6237\u53ef\u4ee5\u67e5\u770b\u6240\u6709\u7684\u5730\u4f4d\u7684\u8ba2\u9605\u548c\u53d6\u6d88\u4ed6\u4eec\u5982\u679c\u6709\u5fc5\u8981\u4ece\u6211\u7684\u5e94\u7528\u7a0b\u5e8f\u5c4f\u5e55\u4e0a\u73a9\u5546\u5e97\u5e94\u7528\u7a0b\u5e8f\u3002\u76ee\u524d,\u5e94\u7528\u6536\u8d39API\u5e76\u4e0d\u63d0\u4f9b\u652f\u6301\u53d6\u6d88\u8ba2\u9605\u76f4\u63a5\u4ece\u56fd\u5185\u91c7\u8d2d\u7a0b\u5e8f,\u867d\u7136\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u901a\u8fc7\u610f\u56fe\u63a8\u51fa\u73a9\u5546\u5e97\u5e94\u7528\u7a0b\u5e8f\u76f4\u63a5\u5411\u6211\u7684\u5e94\u7528\u7a0b\u5e8f\u5c4f\u5e55\u3002\n<\/p><p>When the user cancels a subscription, Google Play does not offer a refund for the current billing cycle. Instead, it allows the user to have access to the cancelled subscription until the end of the current billing cycle, at which time it terminates the subscription. For example, if a user purchases a monthly subscription and cancels it on the 15th day of the cycle, Google Play will consider the subscription valid until the end of the 30th day (or other day, depending on the month).\n<\/p><p>\u5f53\u7528\u6237\u53d6\u6d88\u8ba2\u9605,\u8c37\u6b4c\u73a9\u4e0d\u63d0\u4f9b\u9000\u6b3e,\u4e3a\u5f53\u524d\u7684\u7ed3\u7b97\u5468\u671f\u3002\u76f8\u53cd,\u5b83\u5141\u8bb8\u7528\u6237\u8bbf\u95ee\u53d6\u6d88\u8ba2\u9605,\u76f4\u5230\u5e74\u5e95\u5f53\u524d\u7684\u7ed3\u7b97\u5468\u671f,\u5b83\u5c06\u7ec8\u6b62\u8ba2\u9605\u3002\u4f8b\u5982,\u5982\u679c\u4e00\u4e2a\u7528\u6237\u8d2d\u4e70\u6bcf\u6708\u8ba2\u9605\u548c\u53d6\u6d88\u5b83\u7684\u7b2c15\u5929\u7684\u5468\u671f,\u8c37\u6b4c\u73a9\u5c06\u8003\u8651\u8ba2\u9605\u6709\u6548\u76f4\u5230\u6700\u540e30\u5929(\u6216\u5176\u4ed6\u5929,\u8fd9\u53d6\u51b3\u4e8e\u6708)\u3002\n<\/p><p>In some cases, the user may contact you directly to request cancellation of a subscription. In this and similar cases, you can use the server-side API to query and directly cancel the user\u2019s subscription from your servers. \n<\/p><p>\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b,\u7528\u6237\u53ef\u80fd\u4f1a\u8054\u7cfb\u4f60\u76f4\u63a5\u8bf7\u6c42\u53d6\u6d88\u8ba2\u9605\u3002\u5728\u8fd9\u4e2a\u548c\u7c7b\u4f3c\u7684\u60c5\u51b5\u4e0b,\u60a8\u53ef\u4ee5\u4f7f\u7528\u670d\u52a1\u5668\u7aefAPI\u67e5\u8be2\u548c\u76f4\u63a5\u53d6\u6d88\u7528\u6237\u7684\u8ba2\u9605\u4ece\u60a8\u7684\u670d\u52a1\u5668\u3002\n<\/p>\n<div style=\"margin: 1em 0; padding: 10px; overflow: auto; background: #F7F7F7; border-left:4px solid; border-color:#FF7F00;\">\n<p>Important: In all cases, you must continue to offer the content that your subscribers have purchased through their subscriptions, for as long any users are able to access it. That is, you must not remove any subscriber\u2019s content while any user still has an active subscription to it, even if that subscription will terminate at the end of the current billing cycle. Removing content that a subscriber is entitled to access will result in penalties. Please see the policies document for more information. \n<\/p><p>\u91cd\u8981:\u5728\u6240\u6709\u7684\u60c5\u51b5\u4e0b,\u4f60\u5fc5\u987b\u7ee7\u7eed\u63d0\u4f9b\u5185\u5bb9,\u60a8\u7684\u7528\u6237\u8d2d\u4e70\u4e86\u901a\u8fc7\u4ed6\u4eec\u7684\u8ba2\u9605,\u53ea\u8981\u4efb\u4f55\u7528\u6237\u90fd\u53ef\u4ee5\u8bbf\u95ee\u5b83\u3002\u4e5f\u5c31\u662f\u8bf4,\u60a8\u5fc5\u987b\u6ca1\u6709\u5220\u9664\u4efb\u4f55\u7528\u6237\u7684\u5185\u5bb9,\u540c\u65f6\u4efb\u4f55\u7528\u6237\u4ecd\u7136\u6709\u4e00\u4e2a\u6d3b\u8dc3\u7684\u8ba2\u9605\u5b83,\u5373\u4f7f\u8be5\u8ba2\u9605\u5c06\u7ec8\u6b62\u5728\u7ed3\u675f\u5f53\u524d\u7684\u7ed3\u7b97\u5468\u671f\u3002\u5220\u9664\u5185\u5bb9\u7684\u7528\u6237\u6709\u6743\u8bbf\u95ee\u4f1a\u5bfc\u81f4\u7f5a\u6b3e\u3002\u8bf7\u53c2\u9605\u653f\u7b56\u6587\u6863\u83b7\u5f97\u66f4\u591a\u4fe1\u606f\u3002\n<\/p>\n<\/div>\n<h3> <span class=\"mw-headline\" id=\"App_uninstallation\"><b>App uninstallation<\/b><\/span><\/h3>\n<p>When the user uninstalls an app that includes purchased subscriptions, the Play Store app will notify the user that there are active subscriptions. If the user chooses to continue with the uninstalltion, the app is removed and the subscriptions remain active and recurring billing continues. The user can return to cancel the associated subscriptions at any time in the My Apps screen of the Play Store app. If the user chooses to cancel the uninstallation, the app and subscriptions remain as they were.\n<\/p><p>\u5f53\u7528\u6237\u5378\u8f7d\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f,\u5305\u62ec\u8d2d\u4e70\u8ba2\u9605,\u8fd9\u51fa\u620f\u5546\u5e97\u5e94\u7528\u7a0b\u5e8f\u4f1a\u901a\u77e5\u7528\u6237,\u6709\u6d3b\u8dc3\u7684\u8ba2\u9605\u3002\u5982\u679c\u7528\u6237\u9009\u62e9\u7ee7\u7eeduninstalltion,\u5e94\u7528\u7a0b\u5e8f\u88ab\u79fb\u9664\u548c\u8ba2\u9605\u4fdd\u6301\u6d3b\u8dc3\u548c\u91cd\u590d\u8ba1\u8d39\u4ecd\u5728\u7ee7\u7eed\u3002\u7528\u6237\u53ef\u4ee5\u56de\u5230\u53d6\u6d88\u76f8\u5173\u7684\u8ba2\u9605\u4efb\u4f55\u65f6\u5019\u6211\u7684\u5e94\u7528\u7a0b\u5e8f\u5c4f\u5e55\u4e0a\u73a9\u5546\u5e97\u5e94\u7528\u7a0b\u5e8f\u3002\u5982\u679c\u7528\u6237\u9009\u62e9\u53d6\u6d88\u5378\u8f7d,\u5e94\u7528\u7a0b\u5e8f\u548c\u8ba2\u9605\u4fdd\u6301\u4ed6\u4eec\u3002\n<\/p>\n<h3> <span class=\"mw-headline\" id=\"Refunds\"><b>Refunds<\/b><\/span><\/h3>\n<p>As with other in-app products, Google Play does not provide a refund window for subscription purchases. For example, users who purchase an app can ask for a refund from Google Play within a 15-minute window. With subscriptions, Google Play does not provide a refund window, so users will need to contact you directly to request a refund. \n<\/p><p>\u4e0e\u5176\u4ed6\u5e94\u7528\u7a0b\u5e8f\u7684\u4ea7\u54c1,\u8c37\u6b4c\u73a9\u4e0d\u63d0\u4f9b\u9000\u6b3e\u7a97\u53e3\u8d2d\u4e70\u8ba2\u9605\u3002\u4f8b\u5982,\u7528\u6237\u8d2d\u4e70\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u8981\u6c42\u9000\u6b3e\u4ece\u8c37\u6b4c\u620f\u4e2d15\u5206\u949f\u7684\u7a97\u53e3\u3002\u8ba2\u9605,\u8c37\u6b4c\u73a9\u4e0d\u63d0\u4f9b\u9000\u6b3e\u7a97\u53e3,\u6240\u4ee5\u7528\u6237\u9700\u8981\u4f60\u76f4\u63a5\u8054\u7cfb\u8981\u6c42\u9000\u6b3e\u3002\n<\/p><p>If you receive requests for refunds, you can use the server-side API to cancel the subscription or verify that it is already cancelled. However, keep in mind that Google Play considers cancelled subscriptions valid until the end of their current billing cycles, so even if you grant a refund and cancel the subscription, the user will still have access to the content. \n<\/p><p>\u5982\u679c\u4f60\u6536\u5230\u8bf7\u6c42\u9000\u6b3e,\u60a8\u53ef\u4ee5\u4f7f\u7528\u670d\u52a1\u5668\u7aefAPI\u6765\u53d6\u6d88\u8ba2\u9605\u6216\u8005\u68c0\u67e5\u662f\u5426\u5df2\u7ecf\u53d6\u6d88\u4e86\u3002\u7136\u800c,\u8bf7\u8bb0\u4f4f,\u8c37\u6b4c\u73a9\u8ba4\u4e3a\u53d6\u6d88\u8ba2\u9605\u6709\u6548\u76f4\u5230\u4ed6\u4eec\u5f53\u524d\u7684\u8d26\u5355\u5468\u671f,\u6240\u4ee5\u5373\u4f7f\u4f60\u683c\u5170\u7279\u9000\u6b3e\u548c\u53d6\u6d88\u8ba2\u9605,\u7528\u6237\u4ecd\u53ef\u4ee5\u8bbf\u95ee\u7684\u5185\u5bb9\u3002\n<\/p>\n<div style=\"margin: 1em 0; padding: 10px; overflow: auto; background: #F7F7F7; border-left:4px solid; border-color:#258AAF;\">\n<p>Note: Partial refunds for canceled subscriptions are not available at this time.\n<\/p><p>\u6ce8:\u90e8\u5206\u9000\u6b3e\u4e3a\u53d6\u6d88\u8ba2\u9605\u5c1a\u672a\u63d0\u4f9b\u3002\n<\/p>\n<\/div>\n<h3> <span class=\"mw-headline\" id=\"Payment_processing_and_policies\"><b>Payment processing and policies<\/b><\/span><\/h3>\n<p>In general, the terms of Google Play allow you to sell in-app subscriptions only through the standard payment processor, Google Wallet. For purchases of any subscription products, just as for other in-app products and apps, the transaction fee for subscriptions, just as for other in-app purchases, is the same as the transaction fee for application purchases (30%).\n<\/p><p>\u4e00\u822c\u6765\u8bf4,\u8c37\u6b4c\u7684\u6761\u6b3e\u5141\u8bb8\u4f60\u53bb\u5356\u73a9\u5e94\u7528\u5185\u8ba2\u9605\u53ea\u6709\u901a\u8fc7\u6807\u51c6\u7684\u4ed8\u6b3e\u5904\u7406\u5668,\u8c37\u6b4c\u94b1\u5305\u3002\u5bf9\u8d2d\u4e70\u4efb\u4f55\u8ba2\u9605\u4ea7\u54c1,\u5c31\u50cf\u5176\u4ed6\u5e94\u7528\u5185\u7684\u4ea7\u54c1\u548c\u5e94\u7528\u7a0b\u5e8f,\u4ea4\u6613\u8d39\u7ed9\u8ba2\u9605,\u5c31\u50cf\u5176\u4ed6\u5e94\u7528\u5185\u8d2d\u4e70\u3001\u76f8\u540c\u7684\u4ea4\u6613\u8d39\u7ed9\u5e94\u7528\u7a0b\u5e8f\u7684\u8d2d\u4e70(30%)\u3002\n<\/p><p>Apps published on Google Play that are selling subscriptions must use In-app Billing to handle the transaction and may not provide links to a purchase flow outside of the app and Google Play (such as to a web site).\n<\/p><p>\u5e94\u7528\u7a0b\u5e8f\u5728\u8c37\u6b4c\u53d1\u5e03\u73a9,\u51fa\u552e\u8ba2\u9605\u5fc5\u987b\u4f7f\u7528\u5e94\u7528\u6536\u8d39\u6765\u5904\u7406\u4e8b\u52a1,\u4e0d\u5f97\u63d0\u4f9b\u94fe\u63a5\u5230\u4e00\u4e2a\u8d2d\u4e70\u6d41\u4e4b\u5916\u7684\u5e94\u7528\u7a0b\u5e8f\u548c\u8c37\u6b4c\u73a9(\u6bd4\u5982\u4e00\u4e2aweb\u7ad9\u70b9)\u3002\n<\/p><p>For complete details about terms and policies, see the policies document.\n<\/p><p>\u5bf9\u4e8e\u5b8c\u6574\u7684\u7ec6\u8282\u6761\u6b3e\u548c\u653f\u7b56,\u770b\u5230\u653f\u7b56\u6587\u4ef6\u3002\n<\/p>\n<h3> <span class=\"mw-headline\" id=\"System_requirements_for_subscriptions\">System requirements for subscriptions<\/span><\/h3>\n<p>In-app purchases of subscriptions are supported only on devices that meet these minimum requirements:\n<\/p>\n<ul><li>Must run Android 2.2 or higher \n<\/li><li>Google Play Store app, version 3.5 or higher, must be installed \n<\/li><\/ul>\n<p>Google Play 3.5 and later versions include support for the In-app Billing v2 API or higher, which is needed to support handling of subscription products.\n<\/p><p>\u5e94\u7528\u5185\u8d2d\u4e70\u8ba2\u9605\u662f\u53ea\u652f\u6301\u7684\u8bbe\u5907,\u6ee1\u8db3\u8fd9\u4e9b\u6700\u4f4e\u8981\u6c42:\n<\/p>\n<ul><li>\u5fc5\u987b\u8fd0\u884cAndroid 2.2\u6216\u66f4\u9ad8\u5417\n<\/li><\/ul>\n<ul><li>\u8c37\u6b4c\u73a9\u5546\u5e97\u5e94\u7528\u7a0b\u5e8f,\u7248\u672c3.5\u6216\u66f4\u9ad8\u7248\u672c,\u5fc5\u987b\u5b89\u88c5\n<\/li><\/ul>\n<p>\u8c37\u6b4c\u73a93.5\u548c\u66f4\u9ad8\u7248\u672c\u5305\u62ec\u652f\u6301\u5e94\u7528\u6536\u8d39v2 API\u6216\u66f4\u9ad8,\u5b83\u9700\u8981\u652f\u6301\u5904\u7406\u8ba2\u9605\u7684\u4ea7\u54c1\u3002\n<\/p>\n<h3> <span class=\"mw-headline\" id=\"Compatibility_considerations\"><b>Compatibility considerations<\/b><\/span><\/h3>\n<p>As noted in the previous section, support for subscriptions is available only on devices that meet the system requirements. Not all devices will receive or install Google Play 3.5, so not all users who install your apps will have access to the In-app Billing API and subscriptions.\n<\/p><p>\u6b63\u5982\u5728\u524d\u9762\u7684\u5c0f\u8282\u4e2d,\u652f\u6301\u8ba2\u9605\u53ea\u6709\u5728\u8bbe\u5907,\u6ee1\u8db3\u7cfb\u7edf\u8981\u6c42\u3002\u5e76\u975e\u6240\u6709\u8bbe\u5907\u90fd\u5c06\u6536\u5230\u6216\u5b89\u88c5\u8c37\u6b4c\u73a93.5,\u6240\u4ee5\u5e76\u4e0d\u662f\u6240\u6709\u7528\u6237\u5b89\u88c5\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u8bbf\u95eeAPI\u548c\u8ba2\u9605\u5e94\u7528\u6536\u8d39\u3002\n<\/p><p>If you are targeting older devices that run Android 2.1 or earlier, we recommend that you offer those users an alternative way buy the content that is available through subscriptions. For example, you could create standard in-app products (one-time purchases) that give access to similar content as your subscriptions, possibly for a longer interval such as a year. \n<\/p><p>\u5982\u679c\u4f60\u7684\u76ee\u6807\u662f\u8001\u8bbe\u5907,\u8fd0\u884cAndroid 2.1\u6216\u66f4\u65e9\u7684\u65f6\u5019,\u6211\u4eec\u5efa\u8bae\u60a8\u7684\u7528\u6237\u63d0\u4f9b\u4e00\u79cd\u66ff\u4ee3\u65b9\u5f0f\u8d2d\u4e70\u5185\u5bb9,\u53ef\u4ee5\u901a\u8fc7\u8ba2\u9605\u3002\u4f8b\u5982,\u60a8\u53ef\u4ee5\u521b\u5efa\u6807\u51c6\u5e94\u7528\u5185\u4ea7\u54c1(\u4e00\u6b21\u6027\u8d2d\u4e70),\u83b7\u5f97\u7c7b\u4f3c\u7684\u5185\u5bb9\u4f5c\u4e3a\u4f60\u7684\u8ba2\u9605,\u5f88\u53ef\u80fd\u662f\u4e00\u4e2a\u8f83\u957f\u7684\u65f6\u95f4\u95f4\u9694\u4e00\u5e74\u7b49\u3002\n<\/p>\n<h2> <span class=\"mw-headline\" id=\"Implementing_Subscriptions\"><b>Implementing Subscriptions<\/b><\/span><\/h2>\n<hr \/>\n<p>Subscriptions are a standard In-app Billing product type. If you have already implemented In-app Billing for one-time purchase products, you will find that adding support for subscriptions is straightforward, with minimal impact on your code. If you are new to In-app Billing, you can implement subscriptions using the standard communication model, data structures, and user interactions as for other in-app products.subscriptions. \n<\/p><p>The full implementation details for In-app Billing are provided outside of this document, starting with the In-app Billing Overview. This document is focused on highlighting implementation details that are specific to subscriptions, along with some strategies for the associated billing and business models.\n<\/p><p>\u8ba2\u9605\u662f\u4e00\u4e2a\u6807\u51c6\u7684\u5e94\u7528\u6536\u8d39\u4ea7\u54c1\u7c7b\u578b\u3002\u5982\u679c\u4f60\u5df2\u7ecf\u5b9e\u73b0\u4e86\u5e94\u7528\u6536\u8d39\u4e00\u6b21\u6027\u8d2d\u4e70\u7684\u4ea7\u54c1,\u4f60\u4f1a\u53d1\u73b0,\u6dfb\u52a0\u652f\u6301\u8ba2\u9605\u662f\u975e\u5e38\u7b80\u5355\u7684,\u5bf9\u4ee3\u7801\u7684\u5f71\u54cd\u5fae\u4e4e\u5176\u5fae\u3002\u5982\u679c\u4f60\u662f\u65b0\u7684\u5e94\u7528\u6536\u8d39,\u60a8\u53ef\u4ee5\u5b9e\u73b0\u8ba2\u9605\u4f7f\u7528\u6807\u51c6\u7684\u901a\u4fe1\u6a21\u578b\u3001\u6570\u636e\u7ed3\u6784,\u4ee5\u53ca\u7528\u6237\u4ea4\u4e92\u5e94\u7528\u5185\u8ba2\u9605\u7b49\u5176\u4ed6\u4ea7\u54c1\u3002\n<\/p><p><br \/>\n\u5b8c\u6574\u7684\u5b9e\u73b0\u7ec6\u8282\u63d0\u4f9b\u4e86\u5e94\u7528\u6536\u8d39\u4e4b\u5916\u7684\u6587\u6863\u5f00\u59cb,\u5e94\u7528\u6536\u8d39\u7684\u6982\u8ff0\u3002\u672c\u6587\u6863\u91cd\u70b9\u5173\u6ce8\u5f3a\u8c03\u5b9e\u73b0\u7ec6\u8282\u662f\u7279\u5b9a\u4e8e\u8ba2\u9605,\u8fde\u540c\u4e00\u4e9b\u6218\u7565\u76f8\u5173\u7684\u8ba1\u8d39\u548c\u5546\u4e1a\u6a21\u5f0f\u3002\n<\/p>\n<h3> <span class=\"mw-headline\" id=\"Sample_application\"><b>Sample application<\/b><\/span><\/h3>\n<p>To help you get started with your In-app Billing implementation and subscriptions, an updated version of the In-app Billing sample app is available. You can download the sample app from the Android SDK repository using the Android SDK Manager. For details, see Downloading the Sample Application.\n<\/p><p>\u5e2e\u52a9\u60a8\u5f00\u59cb\u4f7f\u7528\u4f60\u7684\u5e94\u7528\u6536\u8d39\u5b9e\u73b0\u548c\u8ba2\u9605,\u4e00\u4e2a\u66f4\u65b0\u7248\u672c\u7684\u5e94\u7528\u6536\u8d39\u6837\u4f8b\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u7684\u662f\u53ef\u7528\u7684\u3002\u60a8\u53ef\u4ee5\u4e0b\u8f7d\u6837\u4f8b\u5e94\u7528\u7a0b\u5e8f\u5728Android SDK\u5e93\u4f7f\u7528Android SDK\u7ecf\u7406\u3002\u6709\u5173\u8be6\u7ec6\u4fe1\u606f,\u8bf7\u53c2\u89c1\u4e0b\u8f7d\u793a\u4f8b\u5e94\u7528\u7a0b\u5e8f\u3002\n<\/p>\n<h3> <span class=\"mw-headline\" id=\"Application_model\"><b>Application model<\/b><\/span><\/h3>\n<p>With subscriptions, your app uses the standard In-app Billing application model, sending billing requests to the Play Store application over interprocess communication (IPC) and receiving purchase responses from the Play Store app in the form of asynchronous broadcast intents. Your application does not manage any network connections between itself and the Google Play server or use any special APIs from the Android platform.\n<\/p><p>Your app also uses the standard In-app Billing components \u2014 a billing Service for sending requests, a BroadcastReceiver for receiving the responses, and a security component for verifying that the response was sent by Google Play. Also recommended are a response Handler for processing notifications, errors, and status messages, and an observer for sending callbacks to your application as needed. All of these components and their interactions are described in full in the In-app Billing Overview and related documents.\n<\/p><p>To initiate different types of billing communication with Google Play, your app will use the standard set of in-app billing requests and receive the same responses. Inside the requests and responses are two new fields described below. \n<\/p><p>\u8ba2\u9605,\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u4e86\u6807\u51c6\u7684\u5e94\u7528\u6536\u8d39\u5e94\u7528\u7a0b\u5e8f\u6a21\u578b,\u8bf7\u6c42\u53d1\u9001\u5e10\u5355\u73a9\u5b58\u50a8\u5e94\u7528\u7a0b\u5e8f\u5728\u8fdb\u7a0b\u95f4\u901a\u4fe1(IPC)\u548c\u63a5\u6536\u54cd\u5e94\u73a9\u5546\u5e97\u8d2d\u4e70\u7684\u7a0b\u5e8f\u7684\u5f62\u5f0f\u7684\u5f02\u6b65\u5e7f\u64ad\u610f\u56fe\u3002\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u6ca1\u6709\u7ba1\u7406\u4efb\u4f55\u7f51\u7edc\u8fde\u63a5\u672c\u8eab\u548c\u8c37\u6b4c\u4e4b\u95f4\u626e\u6f14\u670d\u52a1\u5668\u6216\u4f7f\u7528\u4efb\u4f55\u7279\u6b8a\u7684Android\u5e73\u53f0\u7684api\u3002\n<\/p><p><br \/>\n\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u8fd8\u4f7f\u7528\u4e86\u6807\u51c6\u7684\u5e94\u7528\u6536\u8d39\u7ec4\u4ef6\u2014\u2014\u4e00\u4e2a\u8d26\u5355\u670d\u52a1\u53d1\u9001\u8bf7\u6c42,\u4e00\u4e2a\u7528\u4e8e\u63a5\u6536\u54cd\u5e94BroadcastReceiver,\u548c\u4e00\u4e2a\u5b89\u5168\u7ec4\u4ef6\u9a8c\u8bc1\u54cd\u5e94\u88ab\u8c37\u6b4c\u73a9\u3002\u8fd8\u5efa\u8bae\u662f\u4e00\u4e2a\u54cd\u5e94\u5904\u7406\u7a0b\u5e8f\u6765\u5904\u7406\u901a\u77e5\u3001\u9519\u8bef\u548c\u72b6\u6001\u4fe1\u606f,\u548c\u4e00\u4e2a\u89c2\u5bdf\u8005\u53d1\u9001\u56de\u8c03\u5230\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f\u6240\u9700\u8981\u7684\u3002\u6240\u6709\u8fd9\u4e9b\u7ec4\u4ef6\u53ca\u5176\u4e4b\u95f4\u7684\u4ea4\u4e92\u4e2d\u5145\u5206\u63cf\u8ff0\u4e86\u5e94\u7528\u6536\u8d39\u6982\u8ff0\u548c\u76f8\u5173\u6587\u4ef6\u3002\n<\/p><p><br \/>\n\u542f\u52a8\u4e0d\u540c\u7c7b\u578b\u7684\u8ba1\u8d39\u6c9f\u901a\u4e0e\u8c37\u6b4c\u8fdb\u884c\u6e38\u620f\u7684\u65f6\u5019,\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u5c06\u4f7f\u7528\u6807\u51c6\u7684\u4e00\u4e9b\u5e94\u7528\u6536\u8d39\u8bf7\u6c42\u548c\u63a5\u6536\u76f8\u540c\u7684\u53cd\u5e94\u3002\u5728\u8bf7\u6c42\u548c\u54cd\u5e94\u662f\u4e0b\u9762\u63cf\u8ff0\u7684\u4e24\u4e2a\u65b0\u5b57\u6bb5\u3002\n<\/p><p><br \/>\n<\/p>\n<h3> <span class=\"mw-headline\" id=\"Purchase_token\"><b>Purchase token<\/b><\/span><\/h3>\n<p>Central to the end-to-end architecture for subscriptions is the purchase token, a string value that uniquely identifies (and associates) a user ID and a subscription ID. Google Play generates the purchase token when the user completes the purchase of a subscription product (and payment is approved by Google Wallet) and then sends it to the purchasing app on the device through the In-app Billing API. \n<\/p><p>At the conclusion of a PURCHASE_REQUEST message flow, your app can retrieve the purchase token and other transaction details by initiating a GET_PURCHASE_INFORMATION request. The Bundle returned by the call contains an JSON array of order objects. In the order corresponding to the subscription purchase, the token is available in the purchaseToken field. \n<\/p><p>An example of a JSON order object that includes a subscription purchase token is shown below.\n<\/p>\n<pre class=\"java\">&#160;\n<span style=\"color: #66cc66;\">&#123;<\/span> <span style=\"color: #ff0000;\">&quot;nonce&quot;<\/span>&#160;: <span style=\"color: #cc66cc;\">1836535032137741465<\/span>,\n  <span style=\"color: #ff0000;\">&quot;orders&quot;<\/span>&#160;:\n    <span style=\"color: #66cc66;\">&#91;<\/span><span style=\"color: #66cc66;\">&#123;<\/span> <span style=\"color: #ff0000;\">&quot;notificationId&quot;<\/span>&#160;: <span style=\"color: #ff0000;\">&quot;android.test.purchased&quot;<\/span>,\n       <span style=\"color: #ff0000;\">&quot;orderId&quot;<\/span>&#160;: <span style=\"color: #ff0000;\">&quot;transactionId.android.test.purchased&quot;<\/span>,\n       <span style=\"color: #ff0000;\">&quot;packageName&quot;<\/span>&#160;: <span style=\"color: #ff0000;\">&quot;com.example.dungeons&quot;<\/span>,\n       <span style=\"color: #ff0000;\">&quot;productId&quot;<\/span>&#160;: <span style=\"color: #ff0000;\">&quot;android.test.purchased&quot;<\/span>,\n       <span style=\"color: #ff0000;\">&quot;developerPayload&quot;<\/span>&#160;: <span style=\"color: #ff0000;\">&quot;bGoa+V7g\/yqDXvKRqq+JTFn4uQZbPiQJo4pf9RzJ&quot;<\/span>,\n       <span style=\"color: #ff0000;\">&quot;purchaseTime&quot;<\/span>&#160;: <span style=\"color: #cc66cc;\">1290114783411<\/span>,\n       <span style=\"color: #ff0000;\">&quot;purchaseState&quot;<\/span>&#160;: <span style=\"color: #cc66cc;\">0<\/span>,\n       <span style=\"color: #ff0000;\">&quot;purchaseToken&quot;<\/span>&#160;: <span style=\"color: #ff0000;\">&quot;rojeslcdyyiapnqcynkjyyjh&quot;<\/span> <span style=\"color: #66cc66;\">&#125;<\/span><span style=\"color: #66cc66;\">&#93;<\/span>\n<span style=\"color: #66cc66;\">&#125;<\/span>\n&#160;<\/pre>\n<p><br \/>\n<\/p><p><br \/>\n\u4e2d\u592e\u5bf9\u7aef\u5230\u7aef\u67b6\u6784\u662f\u8d2d\u4e70\u8ba2\u9605\u4ee4\u724c,\u4e00\u4e2a\u5b57\u7b26\u4e32\u503c,\u60df\u4e00\u5730\u6807\u8bc6(\u548c\u540c\u4e8b)\u7528\u6237ID\u548c\u4e00\u4e2a\u8ba2\u9605ID\u3002\u8c37\u6b4c\u73a9\u751f\u6210\u91c7\u8d2d\u4ee4\u724c\u5f53\u7528\u6237\u5b8c\u6210\u8d2d\u4e70\u4e00\u4e2a\u8ba2\u9605\u4ea7\u54c1(\u548c\u4ed8\u6b3e\u662f\u901a\u8fc7\u8c37\u6b4c\u94b1\u5305),\u7136\u540e\u5c06\u5b83\u53d1\u9001\u7ed9\u91c7\u8d2d\u5e94\u7528\u7a0b\u5e8f\u5728\u8bbe\u5907\u4e0a\u901a\u8fc7\u5e94\u7528\u6536\u8d39API\u3002\n<\/p><p><br \/>\n\u5b8c\u6210\u91c7\u8d2d\u8bf7\u6c42\u6d88\u606f\u6d41\u65f6,\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u68c0\u7d22\u4ee4\u724c\u548c\u5176\u4ed6\u4e8b\u52a1\u7ec6\u8282\u8d2d\u4e70\u6765\u542f\u52a8\u4e00\u4e2a\u83b7\u5f97\u8d2d\u4e70\u4fe1\u606f\u7684\u8bf7\u6c42\u3002\u8c03\u7528\u8fd4\u56de\u7684\u5305\u5305\u542b\u4e00\u4e2aJSON\u6570\u7ec4\u5bf9\u8c61\u7684\u987a\u5e8f\u3002\u5728\u8ba2\u5355\u5bf9\u5e94\u4e8e\u8ba2\u9605\u8d2d\u7f6e,\u4ee4\u724c\u662f\u53ef\u5f97\u5230\u7684\u5728purchaseToken\u5b57\u6bb5\u3002\n<\/p><p><br \/>\n\u4e00\u4e2a\u4f8b\u5b50\u662f\u4e00\u4e2aJSON\u5bf9\u8c61\u7684\u987a\u5e8f,\u5305\u62ec\u4e00\u4e2a\u8ba2\u9605\u8d2d\u4e70\u4ee4\u724c\u5982\u4e0b\u6240\u793a\u3002\n<\/p><p>After receiving a purchase token, your apps can store the token locally or pass it to your backend servers, which can then use it to query the billing status or cancel the subscription remotely. If your app will store the token locally, please read the Security and Design document for best practices for maintaining the security of your data.\n<\/p><p>\u5728\u6536\u5230\u8d2d\u4e70\u4ee4\u724c,\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f\u80fd\u591f\u5728\u672c\u5730\u5b58\u50a8\u4ee4\u724c\u6216\u5c06\u5b83\u4f20\u9012\u7ed9\u4f60\u7684\u540e\u7aef\u670d\u52a1\u5668,\u7136\u540e\u4f7f\u7528\u5b83\u6765\u67e5\u8be2\u8d26\u5355\u72b6\u6001\u6216\u53d6\u6d88\u8ba2\u9605\u8fdc\u7a0b\u3002\u5982\u679c\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u4f1a\u5728\u672c\u5730\u5b58\u50a8\u4ee4\u724c,\u8bf7\u9605\u8bfb\u5b89\u5168\u8bbe\u8ba1\u6587\u4ef6\u4e3a\u6700\u4f73\u5b9e\u8df5,\u5bf9\u7ef4\u62a4\u5b89\u5168\u7684\u6570\u636e\u3002\n<\/p><p><b>Checking the In-app Billing API version<\/b>\n<\/p><p>Subscriptions support is available only in versions of Google Play that support the In-app Billing v2 API (Google Play 3.5 and higher). For your app, an essential first step at launch is to check whether the version of Google Play installed on the device supports the In-app Billing v2 API and subscriptions.\n<\/p><p>To do this, create a CHECK_BILLING_SUPPORTED request Bundle that includes the required key-value pairs, together with\n<\/p><p>The API_VERSION key, assigning a value of 2. \nThe BILLING_REQUEST_ITEM_TYPE key, assigning a value of \u201csubs\u201d \nSend the request using sendBillingRequest(Bundle) and receive the response Bundle. You can extract the response from the BILLING_RESPONSE_RESPONSE_CODE key of the response. RESULT_OK indicates that subscriptions are supported.\n<\/p><p>The sample app declares constants for the accepted BILLING_REQUEST_ITEM_TYPE values (from Consts.java):\n<\/p><p>\u8ba2\u9605\u652f\u6301\u53ea\u5728\u7248\u672c\u7684\u8c37\u6b4c\u73a9,\u652f\u6301\u5e94\u7528\u6536\u8d39v2 API(\u8c37\u6b4c\u73a93.5\u548c\u66f4\u9ad8\u7248\u672c)\u3002\u4e3a\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f,\u4e00\u4e2a\u91cd\u8981\u7684\u7b2c\u4e00\u6b65\u662f\u68c0\u67e5\u662f\u5426\u5728\u63a8\u51fa\u7684\u7248\u672c\u4e0a\u5b89\u88c5\u8c37\u6b4c\u53d1\u6325\u8bbe\u5907\u652f\u6301\u5e94\u7528\u6536\u8d39v2 API\u548c\u8ba2\u9605\u3002\n<\/p><p><br \/>\n\u4e3a\u6b64,\u521b\u5efa\u4e00\u4e2a\u68c0\u67e5\u8d26\u5355\u652f\u6301\u8bf7\u6c42\u5305,\u5176\u4e2d\u53ea\u5305\u542b\u5fc5\u9700\u7684\u952e-\u503c\u5bf9,\u52a0\u4e0a\n<\/p><p><br \/>\napi\u7248\u672c\u7684\u5173\u952e,\u5206\u914d\u4e00\u4e2a\u503c\u4e3a2\u3002\n<\/p><p>\u8ba1\u8d39\u8bf7\u6c42\u9879\u76ee\u7c7b\u578b\u7684\u952e,\u5206\u914d\u4e00\u4e2a\u503c\u201c\u6f5c\u8247\u201d\n<\/p><p>\u53d1\u9001\u8bf7\u6c42\u4f7f\u7528sendBillingRequest(\u5305)\u548c\u63a5\u6536\u54cd\u5e94\u5305\u3002\u4f60\u53ef\u4ee5\u63d0\u53d6\u54cd\u5e94\u4ece\u8ba1\u8d39\u54cd\u5e94\u54cd\u5e94\u7801\u952e\u7684\u54cd\u5e94\u3002\u7ed3\u679c\u8868\u660e,\u652f\u6301\u53ef\u4ee5\u8ba2\u9605\u3002\n<\/p><p><br \/>\n\u6837\u4f8b\u5e94\u7528\u7a0b\u5e8f\u58f0\u660e\u5e38\u91cf\u8ba4\u53ef\u5e10\u5355\u8bf7\u6c42\u9879\u76ee\u7c7b\u578b\u7684\u503c(\u6765\u81eaConsts.java):\n<\/p>\n<pre class=\"java\">&#160;\n  <span style=\"color: #808080; font-style: italic;\">\/\/ These are the types supported in the IAB v2<\/span>\n   <span style=\"color: #000000; font-weight: bold;\">public<\/span> <span style=\"color: #000000; font-weight: bold;\">static<\/span> <span style=\"color: #000000; font-weight: bold;\">final<\/span> <a href=\"http:\/\/www.google.com\/search?hl=en&amp;q=allinurl%3AString+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span style=\"color: #aaaadd; font-weight: bold;\">String<\/span><\/a> ITEM_TYPE_INAPP = <span style=\"color: #ff0000;\">&quot;inapp&quot;<\/span>;\n   <span style=\"color: #000000; font-weight: bold;\">public<\/span> <span style=\"color: #000000; font-weight: bold;\">static<\/span> <span style=\"color: #000000; font-weight: bold;\">final<\/span> <a href=\"http:\/\/www.google.com\/search?hl=en&amp;q=allinurl%3AString+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span style=\"color: #aaaadd; font-weight: bold;\">String<\/span><\/a> ITEM_TYPE_SUBSCRIPTION = <span style=\"color: #ff0000;\">&quot;subs&quot;<\/span>;\n&#160;\n&#160;<\/pre>\n<p>It sets up a convenience method for building the request bundle (from BillingService.java):\n<\/p>\n<pre class=\"java\">&#160;\n      <span style=\"color: #000000; font-weight: bold;\">protected<\/span> Bundle makeRequestBundle<span style=\"color: #66cc66;\">&#40;<\/span><a href=\"http:\/\/www.google.com\/search?hl=en&amp;q=allinurl%3AString+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span style=\"color: #aaaadd; font-weight: bold;\">String<\/span><\/a> method<span style=\"color: #66cc66;\">&#41;<\/span> <span style=\"color: #66cc66;\">&#123;<\/span>\n           Bundle request = <span style=\"color: #000000; font-weight: bold;\">new<\/span> Bundle<span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n           request.<span style=\"color: #006600;\">putString<\/span><span style=\"color: #66cc66;\">&#40;<\/span>Consts.<span style=\"color: #006600;\">BILLING_REQUEST_METHOD<\/span>, method<span style=\"color: #66cc66;\">&#41;<\/span>;\n           request.<span style=\"color: #006600;\">putInt<\/span><span style=\"color: #66cc66;\">&#40;<\/span>Consts.<span style=\"color: #006600;\">BILLING_REQUEST_API_VERSION<\/span>, <span style=\"color: #cc66cc;\">2<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n           request.<span style=\"color: #006600;\">putString<\/span><span style=\"color: #66cc66;\">&#40;<\/span>Consts.<span style=\"color: #006600;\">BILLING_REQUEST_PACKAGE_NAME<\/span>, getPackageName<span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #66cc66;\">&#41;<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n           <span style=\"color: #000000; font-weight: bold;\">return<\/span> request;\n       <span style=\"color: #66cc66;\">&#125;<\/span>\n&#160;\n&#160;<\/pre>  \n<p>Here\u2019s an example of how to test support for In-App Billing v2 and subscriptions (from BillingService.java):\n<\/p>\n<pre class=\"java\">&#160;\n&#160;\n  <span style=\"color: #808080; font-style: italic;\">\/**\n    * Wrapper class that checks if in-app billing is supported.\n    *\/<\/span>\n   <span style=\"color: #000000; font-weight: bold;\">class<\/span> CheckBillingSupported <span style=\"color: #000000; font-weight: bold;\">extends<\/span> BillingRequest <span style=\"color: #66cc66;\">&#123;<\/span>\n       <span style=\"color: #000000; font-weight: bold;\">public<\/span> <a href=\"http:\/\/www.google.com\/search?hl=en&amp;q=allinurl%3AString+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span style=\"color: #aaaadd; font-weight: bold;\">String<\/span><\/a> mProductType = <span style=\"color: #000000; font-weight: bold;\">null<\/span>;\n       <span style=\"color: #000000; font-weight: bold;\">public<\/span> CheckBillingSupported<span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #66cc66;\">&#41;<\/span> <span style=\"color: #66cc66;\">&#123;<\/span>\n           <span style=\"color: #808080; font-style: italic;\">\/\/ This object is never created as a side effect of starting this<\/span>\n           <span style=\"color: #808080; font-style: italic;\">\/\/ service so we pass -1 as the startId to indicate that we should<\/span>\n           <span style=\"color: #808080; font-style: italic;\">\/\/ not stop this service after executing this request.<\/span>\n           <span style=\"color: #000000; font-weight: bold;\">super<\/span><span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #cc66cc;\">-1<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n       <span style=\"color: #66cc66;\">&#125;<\/span>\n&#160;\n       <span style=\"color: #000000; font-weight: bold;\">public<\/span> CheckBillingSupported<span style=\"color: #66cc66;\">&#40;<\/span><a href=\"http:\/\/www.google.com\/search?hl=en&amp;q=allinurl%3AString+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span style=\"color: #aaaadd; font-weight: bold;\">String<\/span><\/a> type<span style=\"color: #66cc66;\">&#41;<\/span> <span style=\"color: #66cc66;\">&#123;<\/span>\n           <span style=\"color: #000000; font-weight: bold;\">super<\/span><span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #cc66cc;\">-1<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n           mProductType = type;\n       <span style=\"color: #66cc66;\">&#125;<\/span>\n&#160;\n       @Override\n       <span style=\"color: #000000; font-weight: bold;\">protected<\/span> <span style=\"color: #993333;\">long<\/span> run<span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #66cc66;\">&#41;<\/span> <span style=\"color: #000000; font-weight: bold;\">throws<\/span> <a href=\"http:\/\/www.google.com\/search?hl=en&amp;q=allinurl%3ARemoteException+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span style=\"color: #aaaadd; font-weight: bold;\">RemoteException<\/span><\/a> <span style=\"color: #66cc66;\">&#123;<\/span>\n           Bundle request = makeRequestBundle<span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #ff0000;\">&quot;CHECK_BILLING_SUPPORTED&quot;<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n           <span style=\"color: #b1b100;\">if<\/span> <span style=\"color: #66cc66;\">&#40;<\/span>mProductType&#160;!= <span style=\"color: #000000; font-weight: bold;\">null<\/span><span style=\"color: #66cc66;\">&#41;<\/span> <span style=\"color: #66cc66;\">&#123;<\/span>\n               request.<span style=\"color: #006600;\">putString<\/span><span style=\"color: #66cc66;\">&#40;<\/span>Consts.<span style=\"color: #006600;\">BILLING_REQUEST_ITEM_TYPE<\/span>, mProductType<span style=\"color: #66cc66;\">&#41;<\/span>;\n           <span style=\"color: #66cc66;\">&#125;<\/span>\n           Bundle response = mService.<span style=\"color: #006600;\">sendBillingRequest<\/span><span style=\"color: #66cc66;\">&#40;<\/span>request<span style=\"color: #66cc66;\">&#41;<\/span>;\n           <span style=\"color: #993333;\">int<\/span> responseCode = response.<span style=\"color: #006600;\">getInt<\/span><span style=\"color: #66cc66;\">&#40;<\/span>Consts.<span style=\"color: #006600;\">BILLING_RESPONSE_RESPONSE_CODE<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n           <span style=\"color: #b1b100;\">if<\/span> <span style=\"color: #66cc66;\">&#40;<\/span>Consts.<span style=\"color: #006600;\">DEBUG<\/span><span style=\"color: #66cc66;\">&#41;<\/span> <span style=\"color: #66cc66;\">&#123;<\/span>\n               Log.<span style=\"color: #006600;\">i<\/span><span style=\"color: #66cc66;\">&#40;<\/span>TAG, <span style=\"color: #ff0000;\">&quot;CheckBillingSupported response code: &quot;<\/span> +\n                       ResponseCode.<span style=\"color: #006600;\">valueOf<\/span><span style=\"color: #66cc66;\">&#40;<\/span>responseCode<span style=\"color: #66cc66;\">&#41;<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n           <span style=\"color: #66cc66;\">&#125;<\/span>\n           <span style=\"color: #993333;\">boolean<\/span> billingSupported = <span style=\"color: #66cc66;\">&#40;<\/span>responseCode == ResponseCode.<span style=\"color: #006600;\">RESULT_OK<\/span>.<span style=\"color: #006600;\">ordinal<\/span><span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #66cc66;\">&#41;<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n           <a href=\"http:\/\/www.google.com\/search?hl=en&amp;q=allinurl%3AResponseHandler+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span style=\"color: #aaaadd; font-weight: bold;\">ResponseHandler<\/span><\/a>.<span style=\"color: #006600;\">checkBillingSupportedResponse<\/span><span style=\"color: #66cc66;\">&#40;<\/span>billingSupported, mProductType<span style=\"color: #66cc66;\">&#41;<\/span>;\n           <span style=\"color: #000000; font-weight: bold;\">return<\/span> Consts.<span style=\"color: #006600;\">BILLING_RESPONSE_INVALID_REQUEST_ID<\/span>;\n       <span style=\"color: #66cc66;\">&#125;<\/span>\n   <span style=\"color: #66cc66;\">&#125;<\/span>\n&#160;<\/pre>  \n<h3> <span class=\"mw-headline\" id=\"Requesting_a_subscription_purchase\"><b>Requesting a subscription purchase<\/b><\/span><\/h3>\n<p>Once you\u2019ve checked the API version as described above and determined that subscriptions are supported, you can present subscription products to the user for purchase. When the user has selected a subscription product and initiated a purchase, your app handles the purchase just as it would for other in-app products \u2014 by sending a REQUEST_PURCHASE request. You can then launch Google Play to display the checkout user interface and handle the financial transaction.. \n<\/p><p>\u4e00\u65e6\u4f60\u5df2\u7ecf\u68c0\u67e5\u4e86API\u7248\u672c\u5982\u4e0a\u6240\u8ff0,\u51b3\u5b9a,\u8ba2\u9605\u90fd\u53d7\u652f\u6301,\u60a8\u53ef\u4ee5\u73b0\u5728\u8ba2\u9605\u4ea7\u54c1\u7ed9\u7528\u6237\u8fdb\u884c\u8d2d\u4e70\u3002\u5f53\u7528\u6237\u9009\u62e9\u4e86\u4e00\u4e2a\u8ba2\u9605\u4ea7\u54c1,\u5e76\u5f00\u59cb\u4e86\u4e00\u573a\u8d2d\u4e70,\u4f60\u7684\u7a0b\u5e8f\u5904\u7406\u8d2d\u4e70\u5c31\u50cf\u5176\u4ed6\u5e94\u7528\u5185\u4ea7\u54c1\u2014\u2014\u901a\u8fc7\u53d1\u9001\u8bf7\u6c42\u8d2d\u4e70\u8bf7\u6c42\u3002\u7136\u540e\u60a8\u53ef\u4ee5\u542f\u52a8\u8c37\u6b4c\u53d1\u6325\u663e\u793a\u7ed3\u5e10\u7684\u7528\u6237\u754c\u9762\u548c\u5904\u7406\u91d1\u878d\u4e8b\u52a1\u3002\n<\/p><p>The REQUEST_PURCHASE includes a Bundle containing the item details, as described in the In-app Billing Overview. For a subscription, the Bundle must also specify:\n<\/p><p>The ITEM_ID key, with a value that specifies a valid, published subscription product. \nThe ITEM_TYPE key, with a value of \u201csubs\u201d (ITEM_TYPE_SUBSCRIPTION in the sample app). If the request does not specify the subscription's ITEM_TYPE, Google Play attempts to handle the request as a standard in-app purchase (one-time purchase). \nGoogle Play synchronously returns a response bundle that includes RESPONSE_CODE, PURCHASE_INTENT, and REQUEST_ID. Your app uses the PURCHASE_INTENT to launch the checkout UI and the message flow proceeds exactly as described in Messaging sequence.\n\u8bf7\u6c42\u8d2d\u4e70\u5305\u62ec\u4e00\u4e2a\u5305\u5305\u542b\u9879\u76ee\u7684\u7ec6\u8282\u4e2d\u6240\u63cf\u8ff0\u7684\u4e00\u6837,\u5e94\u7528\u6536\u8d39\u7684\u6982\u8ff0\u3002\u4e3a\u8ba2\u9605,\u5305\u8fd8\u5fc5\u987b\u6307\u5b9a:\n<\/p><p>\u8fd9\u4e2aITEM_ID\u94a5\u5319,\u4e00\u4e2a\u503c,\u7528\u4e8e\u6307\u5b9a\u4e00\u4e2a\u6709\u6548\u7684\u3001\u51fa\u7248\u8ba2\u9605\u4ea7\u54c1\u3002\n<\/p><p>\u9879\u76ee\u7c7b\u578b\u7684\u952e,\u503c\u4e3a\u201c\u6f5c\u8247\u201d(\u9879\u76ee\u7c7b\u578b\u7684\u8ba2\u9605\u793a\u4f8b\u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684)\u3002\u5982\u679c\u8bf7\u6c42\u6ca1\u6709\u6307\u5b9a\u8ba2\u9605\u7684\u9879\u7c7b\u578b,\u8c37\u6b4c\u6f14\u51fa\u52aa\u529b\u5904\u7406\u8bf7\u6c42\u4f5c\u4e3a\u4e00\u4e2a\u6807\u51c6\u5e94\u7528\u5185\u8d2d\u4e70(\u4e00\u6b21\u6027\u8d2d\u4e70)\u3002\n<\/p><p>\u8c37\u6b4c\u73a9\u540c\u6b65\u8fd4\u56de\u4e00\u4e2a\u54cd\u5e94\u5305,\u5305\u62ec\u54cd\u5e94\u4ee3\u7801,\u8d2d\u4e70\u610f\u5411,\u5e76\u8bf7\u6c42id\u3002\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u4e86\u8d2d\u4e70\u610f\u5411\u53d1\u5c04\u68c0\u51faUI\u548c\u6d88\u606f\u6d41\u6536\u76ca\u4e2d\u63cf\u8ff0\u7684\u786e\u5207\u6d88\u606f\u5e8f\u5217\u3002\n<\/p><p>Here\u2019s how the sample app initiates a purchase for a subscription, where mProductType is ITEM_TYPE_SUBSCRIPTION (from BillingService.java).\n<\/p>\n<pre class=\"java\">&#160;\n&#160;\n  <span style=\"color: #808080; font-style: italic;\">\/**\n    * Wrapper class that requests a purchase.\n    *\/<\/span>\n   <span style=\"color: #000000; font-weight: bold;\">class<\/span> RequestPurchase <span style=\"color: #000000; font-weight: bold;\">extends<\/span> BillingRequest <span style=\"color: #66cc66;\">&#123;<\/span>\n       <span style=\"color: #000000; font-weight: bold;\">public<\/span> <span style=\"color: #000000; font-weight: bold;\">final<\/span> <a href=\"http:\/\/www.google.com\/search?hl=en&amp;q=allinurl%3AString+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span style=\"color: #aaaadd; font-weight: bold;\">String<\/span><\/a> mProductId;\n       <span style=\"color: #000000; font-weight: bold;\">public<\/span> <span style=\"color: #000000; font-weight: bold;\">final<\/span> <a href=\"http:\/\/www.google.com\/search?hl=en&amp;q=allinurl%3AString+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span style=\"color: #aaaadd; font-weight: bold;\">String<\/span><\/a> mDeveloperPayload;\n       <span style=\"color: #000000; font-weight: bold;\">public<\/span> <span style=\"color: #000000; font-weight: bold;\">final<\/span> <a href=\"http:\/\/www.google.com\/search?hl=en&amp;q=allinurl%3AString+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span style=\"color: #aaaadd; font-weight: bold;\">String<\/span><\/a> mProductType;\n&#160;\n. . .\n&#160;\n       @Override\n       <span style=\"color: #000000; font-weight: bold;\">protected<\/span> <span style=\"color: #993333;\">long<\/span> run<span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #66cc66;\">&#41;<\/span> <span style=\"color: #000000; font-weight: bold;\">throws<\/span> <a href=\"http:\/\/www.google.com\/search?hl=en&amp;q=allinurl%3ARemoteException+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span style=\"color: #aaaadd; font-weight: bold;\">RemoteException<\/span><\/a> <span style=\"color: #66cc66;\">&#123;<\/span>\n           Bundle request = makeRequestBundle<span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #ff0000;\">&quot;REQUEST_PURCHASE&quot;<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n           request.<span style=\"color: #006600;\">putString<\/span><span style=\"color: #66cc66;\">&#40;<\/span>Consts.<span style=\"color: #006600;\">BILLING_REQUEST_ITEM_ID<\/span>, mProductId<span style=\"color: #66cc66;\">&#41;<\/span>;\n           request.<span style=\"color: #006600;\">putString<\/span><span style=\"color: #66cc66;\">&#40;<\/span>Consts.<span style=\"color: #006600;\">BILLING_REQUEST_ITEM_TYPE<\/span>, mProductType<span style=\"color: #66cc66;\">&#41;<\/span>;\n           <span style=\"color: #808080; font-style: italic;\">\/\/ Note that the developer payload is optional.<\/span>\n           <span style=\"color: #b1b100;\">if<\/span> <span style=\"color: #66cc66;\">&#40;<\/span>mDeveloperPayload&#160;!= <span style=\"color: #000000; font-weight: bold;\">null<\/span><span style=\"color: #66cc66;\">&#41;<\/span> <span style=\"color: #66cc66;\">&#123;<\/span>\n               request.<span style=\"color: #006600;\">putString<\/span><span style=\"color: #66cc66;\">&#40;<\/span>Consts.<span style=\"color: #006600;\">BILLING_REQUEST_DEVELOPER_PAYLOAD<\/span>, mDeveloperPayload<span style=\"color: #66cc66;\">&#41;<\/span>;\n           <span style=\"color: #66cc66;\">&#125;<\/span>\n           Bundle response = mService.<span style=\"color: #006600;\">sendBillingRequest<\/span><span style=\"color: #66cc66;\">&#40;<\/span>request<span style=\"color: #66cc66;\">&#41;<\/span>;\n           PendingIntent pendingIntent\n                   = response.<span style=\"color: #006600;\">getParcelable<\/span><span style=\"color: #66cc66;\">&#40;<\/span>Consts.<span style=\"color: #006600;\">BILLING_RESPONSE_PURCHASE_INTENT<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n           <span style=\"color: #b1b100;\">if<\/span> <span style=\"color: #66cc66;\">&#40;<\/span>pendingIntent == <span style=\"color: #000000; font-weight: bold;\">null<\/span><span style=\"color: #66cc66;\">&#41;<\/span> <span style=\"color: #66cc66;\">&#123;<\/span>\n               Log.<span style=\"color: #006600;\">e<\/span><span style=\"color: #66cc66;\">&#40;<\/span>TAG, <span style=\"color: #ff0000;\">&quot;Error with requestPurchase&quot;<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n               <span style=\"color: #000000; font-weight: bold;\">return<\/span> Consts.<span style=\"color: #006600;\">BILLING_RESPONSE_INVALID_REQUEST_ID<\/span>;\n           <span style=\"color: #66cc66;\">&#125;<\/span>\n&#160;\n           Intent intent = <span style=\"color: #000000; font-weight: bold;\">new<\/span> Intent<span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n           <a href=\"http:\/\/www.google.com\/search?hl=en&amp;q=allinurl%3AResponseHandler+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span style=\"color: #aaaadd; font-weight: bold;\">ResponseHandler<\/span><\/a>.<span style=\"color: #006600;\">buyPageIntentResponse<\/span><span style=\"color: #66cc66;\">&#40;<\/span>pendingIntent, intent<span style=\"color: #66cc66;\">&#41;<\/span>;\n           <span style=\"color: #000000; font-weight: bold;\">return<\/span> response.<span style=\"color: #006600;\">getLong<\/span><span style=\"color: #66cc66;\">&#40;<\/span>Consts.<span style=\"color: #006600;\">BILLING_RESPONSE_REQUEST_ID<\/span>,\n                   Consts.<span style=\"color: #006600;\">BILLING_RESPONSE_INVALID_REQUEST_ID<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n       <span style=\"color: #66cc66;\">&#125;<\/span>\n&#160;\n       @Override\n       <span style=\"color: #000000; font-weight: bold;\">protected<\/span> <span style=\"color: #993333;\">void<\/span> responseCodeReceived<span style=\"color: #66cc66;\">&#40;<\/span>ResponseCode responseCode<span style=\"color: #66cc66;\">&#41;<\/span> <span style=\"color: #66cc66;\">&#123;<\/span>\n           <a href=\"http:\/\/www.google.com\/search?hl=en&amp;q=allinurl%3AResponseHandler+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span style=\"color: #aaaadd; font-weight: bold;\">ResponseHandler<\/span><\/a>.<span style=\"color: #006600;\">responseCodeReceived<\/span><span style=\"color: #66cc66;\">&#40;<\/span>BillingService.<span style=\"color: #000000; font-weight: bold;\">this<\/span>, <span style=\"color: #000000; font-weight: bold;\">this<\/span>, responseCode<span style=\"color: #66cc66;\">&#41;<\/span>;\n       <span style=\"color: #66cc66;\">&#125;<\/span>\n   <span style=\"color: #66cc66;\">&#125;<\/span>\n&#160;<\/pre>\n<h3> <span class=\"mw-headline\" id=\"Restoring_transactions\"><b>Restoring transactions<\/b><\/span><\/h3>\n<p>Subscriptions always use the managed by user account purchase type, so that you can restore a record of subscription transactions on the device when needed. When a user installs your app onto a new device, or when the user uninstalls\/reinstalls the app on the original device, your app should restore the subscriptions that the user has purchased.\n<\/p><p>\u8ba2\u9605\u603b\u662f\u4f7f\u7528\u7ba1\u7406\u7528\u6237\u5e10\u6237\u8d2d\u4e70\u7c7b\u578b,\u8fd9\u6837\u4f60\u5c31\u53ef\u4ee5\u6062\u590d\u8ba2\u9605\u4ea4\u6613\u7684\u8bb0\u5f55\u8bbe\u5907\u4e0a\u7684\u9700\u8981\u65f6\u3002\u5f53\u7528\u6237\u5b89\u88c5\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f\u5230\u4e00\u4e2a\u65b0\u7684\u8bbe\u5907,\u6216\u8005\u5f53\u7528\u6237\u5378\u8f7d\/ reinstalls app\u539f\u59cb\u8bbe\u5907,\u4f60\u7684\u7a0b\u5e8f\u5e94\u8be5\u6062\u590d\u8ba2\u9605\u7528\u6237\u8d2d\u4e70\u4e86\u3002\n<\/p><p>The process for restoring subscriptions transactions is the same as described in Messaging sequence. Your app sends a RESTORE_TRANSACTIONS request to Google Play. Google Play sends two broadcast intents as asynchronous responses \u2014 a RESPONSE_CODE intent and a PURCHASE_STATE_CHANGED intent.\n<\/p><p>\u8fd9\u4e2a\u8fc7\u7a0b\u5bf9\u6062\u590d\u8ba2\u9605\u4e8b\u52a1\u63cf\u8ff0\u7684\u4e00\u6837,\u5728\u6d88\u606f\u4f20\u9012\u5e8f\u5217\u3002\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f\u53d1\u9001\u4e00\u4e2a\u6062\u590d\u4ea4\u6613\u8bf7\u6c42\u8c37\u6b4c\u73a9\u3002\u8c37\u6b4c\u73a9\u53d1\u9001\u4e24\u4e2a\u5e7f\u64ad\u610f\u56fe\u4f5c\u4e3a\u5f02\u6b65\u54cd\u5e94\u2014\u2014\u4e00\u4e2a\u54cd\u5e94\u4ee3\u7801\u7684\u610f\u56fe\u548c\u91c7\u8d2d\u72b6\u6001\u6539\u53d8\u7684\u610f\u56fe\u3002\n<\/p><p>The PURCHASE_STATE_CHANGED intent contains a notification ID that your app can use to retrieve the purchase details, including the purchase token, by sending a standard GET_PURCHASE_INFORMATION request. The Bundle returned in the call includes an JSON array of order objects corresponding to subscription (and in-app product) purchases that you can restore locally.\n<\/p><p>\u8d2d\u4e70\u72b6\u6001\u6539\u53d8\u7684\u610f\u56fe\u5305\u542b\u4e00\u4e2a\u901a\u77e5\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u4f7f\u7528ID\u6765\u68c0\u7d22\u8d2d\u4e70\u8be6\u7ec6\u4fe1\u606f,\u5305\u62ec\u8d2d\u4e70\u7684\u4ee4\u724c,\u901a\u8fc7\u53d1\u9001\u4e00\u4e2a\u6807\u51c6\u5f97\u8d2d\u4e70\u4fe1\u606f\u7684\u8bf7\u6c42\u3002Bundle\u4e2d\u8fd4\u56de\u8c03\u7528\u5305\u542b\u4e00\u4e2aJSON\u6570\u7ec4\u7684\u8ba2\u5355\u5bf9\u8c61\u5bf9\u5e94\u4e8e\u8ba2\u9605(\u548c\u5e94\u7528\u5185\u7684\u4ea7\u54c1),\u60a8\u53ef\u4ee5\u6062\u590d\u8d2d\u4e70\u672c\u5730\u3002\n<\/p><p>Your app can store the restored purchase state and other transaction details in the way that best meets your needs. Your app can use it later to check the subscription validity, although please read the Security and Design document for best practices for maintaining the security of your data.\n<\/p><p>\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u5b58\u50a8\u6062\u590d\u91c7\u8d2d\u72b6\u6001\u548c\u5176\u4ed6\u4ea4\u6613\u7684\u7ec6\u8282,\u6700\u6ee1\u8db3\u4f60\u7684\u9700\u8981\u3002\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u7a0d\u540e\u4f7f\u7528\u5b83\u6765\u68c0\u67e5\u8ba2\u9605\u7684\u6709\u6548\u6027,\u4f46\u8bf7\u5148\u9605\u8bfb\u5b89\u5168\u8bbe\u8ba1\u6587\u4ef6\u4e3a\u6700\u4f73\u5b9e\u8df5,\u5bf9\u7ef4\u62a4\u5b89\u5168\u7684\u6570\u636e\u3002\n<\/p>\n<h2> <span class=\"mw-headline\" id=\"Checking_subscription_validity.3D\"><b>Checking subscription validity<\/b>=<\/span><\/h2>\n<p>Subscriptions are time-bound purchases that require successful billing recurrences over time to remain valid. Your app should check the validity of purchased subscriptions at launch or prior to granting access to subscriber content.\n<\/p><p>\u8ba2\u9605\u662f\u6709\u65f6\u95f4\u9650\u5236\u7684\u91c7\u8d2d\u8981\u6c42\u6210\u529f\u7684\u8d26\u5355\u590d\u53d1\u968f\u7740\u65f6\u95f4\u7ee7\u7eed\u6709\u6548\u3002\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u5e94\u8be5\u68c0\u67e5\u7684\u6709\u6548\u6027,\u5728\u53d1\u5c04\u65f6,\u8d2d\u4e70\u8ba2\u9605\u524d\u6216\u6388\u4e88\u8bbf\u95ee\u7528\u6237\u5185\u5bb9\u3002\n<\/p><p>With In-app Billing, you validate a subscription by keeping track of its purchase state and then checking the state whenever needed. Google Play provides two ways to let you know when the purchase state of a subscription changes:\n<\/p>\n<ul><li>In-app Billing Notifications. Google Play pushes a notification to your app to indicate a change in the purchase state of a subscription. Your app can store the most recent purchase state for a given purchase token and then check that state at run time, as needed. \n<\/li><\/ul>\n<ul><li>Google Play Android Developer API. You can use this HTTP-based API to poll Google Play for the current purchase state of a subscription. You can store the purchased state for each purchaseToken on your backend servers. For more information, see Google Play Android Developer API, below. \n<\/li><\/ul>\n<p>For most use-cases, especially those where backend servers are already keeping track of subscribed users, implementing a combination of both methods is the recommended approach. A typical implementation might work like this:\n<\/p><p><br \/>\n\u4e0e\u5e94\u7528\u6536\u8d39,\u60a8\u9a8c\u8bc1\u8ba2\u9605\u901a\u8fc7\u8ffd\u8e2a\u5176\u8d2d\u4e70\u7684\u72b6\u6001,\u7136\u540e\u5728\u9700\u8981\u65f6\u68c0\u67e5\u72b6\u6001\u3002\u8c37\u6b4c\u53d1\u6325\u63d0\u4f9b\u4e86\u4e24\u79cd\u65b9\u6cd5\u8ba9\u4f60\u77e5\u9053\u4ec0\u4e48\u65f6\u5019\u8d2d\u4e70\u8ba2\u9605\u72b6\u6001\u53d8\u5316:\n<\/p><p><br \/>\n<\/p>\n<ul><li>\u5e94\u7528\u6536\u8d39\u901a\u77e5\u3002\u8c37\u6b4c\u73a9\u63a8\u7740\u4e00\u4e2a\u901a\u77e5\u5230\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f\u6765\u663e\u793a\u4e00\u4e2a\u6539\u53d8\u4e86\u8ba2\u9605\u670d\u52a1\u7684\u91c7\u8d2d\u72b6\u6001\u3002\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u5b58\u50a8\u6700\u8fd1\u7684\u91c7\u8d2d\u72b6\u6001\u5bf9\u4e8e\u4e00\u4e2a\u7ed9\u5b9a\u7684\u8d2d\u4e70\u4ee4\u724c,\u7136\u540e\u5728\u8fd0\u884c\u65f6\u68c0\u67e5\u72b6\u6001,\u56e0\u4e3a\u9700\u8981\u3002\n<\/li><\/ul>\n<ul><li>\u8c37\u6b4c\u7684Android\u5f00\u53d1\u8005API\u73a9\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e2a\u57fa\u4e8ehttp\u7684API\u6765\u8c03\u67e5\u8c37\u6b4c\u73a9\u6e38\u620f\u7684\u5f53\u524d\u8d2d\u4e70\u7684\u72b6\u6001\u8ba2\u9605\u3002\u4f60\u53ef\u4ee5\u5b58\u50a8\u4e3a\u6bcf\u4e2apurchaseToken\u8d2d\u4e70\u7684\u72b6\u6001\u5728\u4f60\u7684\u540e\u7aef\u670d\u52a1\u5668\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f,\u8bf7\u53c2\u9605\u8c37\u6b4c\u73a9Android\u5f00\u53d1\u8005API,\u4e0b\u9762\u3002\n<\/li><\/ul>\n<p>\u5bf9\u4e8e\u5927\u591a\u6570\u7528\u4f8b,\u5c24\u5176\u662f\u5728\u90a3\u4e9b\u540e\u7aef\u670d\u52a1\u5668\u5df2\u7ecf\u8ddf\u8e2a\u8ba2\u9605\u7528\u6237,\u5b9e\u73b0\u4e24\u8005\u7684\u7ed3\u5408\u65b9\u6cd5\u662f\u63a8\u8350\u4f7f\u7528\u7684\u65b9\u6cd5\u3002\u4e00\u4e2a\u5178\u578b\u7684\u5b9e\u73b0\u53ef\u80fd\u4f1a\u662f\u8fd9\u6837\u5de5\u4f5c\u7684:\n<\/p><p>When the user successfully purchases a new subscription, your app notifies a backend server, which stores the purchase token, user name, and other information in a secure location. \nSince your app cannot know the expiration date, your server can poll Google Play to get the expiration and store it with the purchase token and other data. \nBecause your server now knows the expiration date, it does not need to poll Google Play again until after the expiration date, at which time it can confirm that the subscription was not cancelled. \nOn the client side, your app can continue to update the server whenever the purchase state changes, storing the state locally. \nIf you are using both notifications and the Google Play Android Developer API to validate subscriptions, we recommend the following:\n<\/p><p>If your app wants to check validity but you can\u2019t reach your server (or you don\u2019t have a server), use the latest purchase state received by notification. \nIf you have a server and it\u2019s reachable, always give preference to the purchase state obtained from your server over the state received in notifications. \nIf necessary, you can also use a RESTORE_TRANSACTIONS request to retrieve a record of all managed and in-app products purchased by the user, which you can then store locally. However, using RESTORE_TRANSACTIONS on a regular basis is not recommended because of performance impacts.\n<\/p><p>Regardless of the approach you choose, your app should check subscriptions and validity at launch, such as prior to accessing subscriber content, game levels, and so on.\n<\/p><p>\u5f53\u7528\u6237\u6210\u529f\u5730\u8d2d\u4e70\u4e00\u4e2a\u65b0\u7684\u8ba2\u9605,\u4f60\u7684\u7a0b\u5e8f\u4f1a\u901a\u77e5\u4e00\u4e2a\u540e\u7aef\u670d\u52a1\u5668,\u8be5\u5546\u5e97\u8d2d\u4e70\u4ee4\u724c\u3001\u7528\u6237\u540d\u548c\u5176\u4ed6\u4fe1\u606f\u5728\u4e00\u4e2a\u5b89\u5168\u7684\u5730\u65b9\u3002\n<\/p><p>\u56e0\u4e3a\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u65e0\u6cd5\u77e5\u9053\u6709\u6548\u671f,\u670d\u52a1\u5668\u53ef\u4ee5\u8c03\u67e5\u8c37\u6b4c\u53d1\u6325\u5f97\u5230\u548c\u5230\u671f\u5b58\u653e\u5728\u8fd9\u4e2a\u4ee4\u724c\u548c\u5176\u4ed6\u6570\u636e\u7684\u8d2d\u4e70\u3002\n<\/p><p>\u56e0\u4e3a\u4f60\u7684\u670d\u52a1\u5668\u73b0\u5728\u77e5\u9053\u7684\u8fc7\u671f\u65e5\u671f,\u5b83\u4e0d\u9700\u8981\u8c03\u67e5\u8c37\u6b4c\u540e\u518d\u73a9\u7684\u8fc7\u671f\u65e5\u671f,\u5728\u8fd9\u6bb5\u65f6\u95f4\u91cc,\u5b83\u53ef\u4ee5\u786e\u8ba4\u6ca1\u6709\u53d6\u6d88\u8ba2\u9605\u3002\n<\/p><p>\u5728\u5ba2\u6237\u7aef,\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u7ee7\u7eed\u66f4\u65b0\u670d\u52a1\u5668\u6bcf\u6b21\u8d2d\u4e70\u72b6\u6001\u53d1\u751f\u53d8\u5316\u65f6,\u5728\u672c\u5730\u4fdd\u5b58\u72b6\u6001\u3002\n<\/p><p>\u5982\u679c\u60a8\u4f7f\u7528\u7684\u662f\u4e24\u4e2a\u901a\u77e5\u548c\u8c37\u6b4c\u7684Android\u5f00\u53d1\u8005API\u6765\u73a9\u9a8c\u8bc1\u8ba2\u9605,\u6211\u4eec\u63a8\u8350\u4ee5\u4e0b:\n<\/p><p><br \/>\n\u5982\u679c\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f\u8981\u68c0\u67e5\u6709\u6548\u6027\u4f46\u4f60\u4e0d\u80fd\u8fbe\u5230\u4f60\u7684\u670d\u52a1\u5668(\u6216\u8005\u60a8\u6ca1\u6709\u4e00\u4e2a\u670d\u52a1\u5668),\u4f7f\u7528\u6700\u65b0\u7684\u91c7\u8d2d\u72b6\u6001\u6536\u5230\u901a\u77e5\u3002\n<\/p><p>\u5982\u679c\u4f60\u6709\u4e00\u4e2a\u670d\u52a1\u5668,\u5b83\u662f\u53ef\u83b7\u5f97\u7684,\u603b\u662f\u4f18\u5148\u5c06\u91c7\u8d2d\u72b6\u6001\u4ece\u670d\u52a1\u5668\u83b7\u5f97\u5728\u56fd\u5bb6\u4e2d\u6536\u5230\u901a\u77e5\u3002\n<\/p><p>\u5982\u679c\u9700\u8981,\u60a8\u8fd8\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e2a\u6062\u590d\u4ea4\u6613\u8bf7\u6c42\u6765\u68c0\u7d22\u4e00\u4e2a\u8bb0\u5f55\u6240\u6709\u7684\u7ba1\u7406\u548c\u5e94\u7528\u5185\u8d2d\u4e70\u4ea7\u54c1\u7684\u7528\u6237,\u7136\u540e\u53ef\u4ee5\u5728\u672c\u5730\u5b58\u50a8\u3002\u7136\u800c,\u4f7f\u7528\u6062\u590d\u5b9a\u671f\u4ea4\u6613\u5e76\u4e0d\u53ef\u53d6,\u56e0\u4e3a\u6027\u80fd\u5f71\u54cd\u3002\n<\/p><p>\u4e0d\u7ba1\u4f60\u9009\u62e9\u7684\u65b9\u6cd5,\u4f60\u7684\u7a0b\u5e8f\u5e94\u8be5\u68c0\u67e5\u8ba2\u9605\u548c\u6709\u6548\u6027\u53d1\u884c\u65f6,\u6bd4\u5982\u8bbf\u95ee\u8ba2\u9605\u5185\u5bb9\u4e4b\u524d,\u6e38\u620f\u5173\u5361,\u7b49\u7b49\u3002\n<\/p><p>Table 1. Summary of purchaseState values for subscription purchases, as received with a PURCHASE_STATE_CHANGED intent.\n<\/p>\n<table style=\"border-spacing: 0px;margin: 4px 4px; width: 90%; border-left:1px solid #ccc;border-top:1px solid #ccc;\">\n\n\n<tr style=\"background:#DEE8F1;\">\n<th style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px\"> State\n<\/th>\n<th style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px\"> Comments\n<\/th><\/tr>\n<tr style=\"vertical-align:top;\">\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>Purchased successfully\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>Sent at original purchase only (not at recurring billing cycles).\n<\/p>\n<\/td><\/tr>\n<tr style=\"vertical-align:top;\">\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>Cancelled\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>Sent at original purchase only if the purchase has failed for some reason\n<\/p>\n<\/td><\/tr><\/table>\n<p><br \/>\n<\/p>\n<h3> <span class=\"mw-headline\" id=\"Launching_your_product_page_to_let_the_user_cancel_or_view_subscriptions\"><b>Launching your product page to let the user cancel or view subscriptions<\/b><\/span><\/h3>\n<p>In-app Billing does not currently provide an API to let users directly view or cancel subscriptions from within the purchasing app. Instead, users can launch the Play Store app on their devices and go to the My Apps screen to manage subscriptions. In My Apps, users can see a list of their subscriptions organized by application. Tapping one of the subscriptions loads the app's product page, from which users can see active subscriptions and billing status and cancel subscriptions as needed.\n<\/p><p>To make it easier for users to find and manage their subscriptions from inside your app, we recommend that you offer a \"View My Subscriptions\" or \"Manage Subscriptions\" option in your UI that directly loads your app's product page in the Play Store app.\n<\/p><p>To do this, create an intent with the ACTION_VIEW action and include the market:\/\/ URI (rather than the http:\/\/ URI) of your app's details page. Here\u2019s an example:\n<\/p><p>\u5e94\u7528\u6536\u8d39\u76ee\u524d\u5e76\u4e0d\u63d0\u4f9b\u4e00\u4e2aAPI\u6765\u8ba9\u7528\u6237\u76f4\u63a5\u4ece\u5185\u90e8\u89c6\u56fe\u6216\u53d6\u6d88\u8ba2\u9605\u7684\u91c7\u8d2d\u7a0b\u5e8f\u3002\u76f8\u53cd,\u7528\u6237\u53ef\u4ee5\u542f\u52a8\u8fd9\u4e2a\u5e94\u7528\u7a0b\u5e8f\u5728\u4ed6\u4eec\u7684\u8bbe\u5907\u4e0a\u73a9\u5546\u5e97\u548c\u53bb\u6211\u7684\u5e94\u7528\u7a0b\u5e8f\u754c\u9762\u7ba1\u7406\u8ba2\u9605\u3002\u5728\u6211\u7684\u5e94\u7528\u7a0b\u5e8f,\u7528\u6237\u53ef\u4ee5\u770b\u5230\u4ed6\u4eec\u7684\u8ba2\u9605\u5217\u8868\u7ec4\u7ec7\u5e94\u7528\u7a0b\u5e8f\u3002\u653b\u4e1d\u7684\u4e00\u4e2a\u8ba2\u9605\u52a0\u8f7d\u5e94\u7528\u7684\u4ea7\u54c1\u9875\u9762,\u7528\u6237\u53ef\u4ee5\u770b\u5230\u6d3b\u8dc3\u7684\u8ba2\u9605\u548c\u8bb0\u8d26\u5730\u4f4d\u548c\u6839\u636e\u9700\u8981\u53d6\u6d88\u8ba2\u9605\u3002\n<\/p><p><br \/>\n\u4e3a\u4e86\u65b9\u4fbf\u7528\u6237\u67e5\u627e\u548c\u7ba1\u7406\u4ed6\u4eec\u7684\u8ba2\u9605\u5e94\u7528\u7a0b\u5e8f\u5185\u90e8,\u6211\u4eec\u5efa\u8bae\u60a8\u63d0\u4f9b\u201c\u67e5\u770b\u6211\u7684\u8ba2\u9605\u201d\u6216\u201c\u7ba1\u7406\u8ba2\u9605\u201d\u9009\u9879\u5728\u4f60\u7684UI,\u76f4\u63a5\u52a0\u8f7d\u4f60\u7684\u5e94\u7528\u7684\u4ea7\u54c1\u9875\u9762\u5728\u5267\u4e2d\u5546\u5e97\u5e94\u7528\u7a0b\u5e8f\u3002\n<\/p><p><br \/>\n\u4e3a\u6b64,\u521b\u5efa\u4e00\u4e2a\u610f\u56fe\u4e0e\u64cd\u4f5c\u89c6\u56fe\u64cd\u4f5c,\u5305\u62ec\u5e02\u573a:\/ \/ URI(\u800c\u4e0d\u662f\u7f51\u7ad9\u7684URI)\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f\u7684\u7ec6\u8282\u9875\u9762\u3002\u8fd9\u91cc\u7684\u4e00\u4e2a\u4f8b\u5b50:\n<\/p>\n<pre class=\"java\">&#160;\nIntent intent = <span style=\"color: #000000; font-weight: bold;\">new<\/span> Intent<span style=\"color: #66cc66;\">&#40;<\/span>Intent.<span style=\"color: #006600;\">ACTION_VIEW<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\nintent.<span style=\"color: #006600;\">setData<\/span><span style=\"color: #66cc66;\">&#40;<\/span>Uri.<span style=\"color: #006600;\">parse<\/span><span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #ff0000;\">&quot;market:\/\/details?id=com.example.app&quot;<\/span><span style=\"color: #66cc66;\">&#41;<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\nstartActivity<span style=\"color: #66cc66;\">&#40;<\/span>intent<span style=\"color: #66cc66;\">&#41;<\/span>;\n&#160;<\/pre>\n<h3> <span class=\"mw-headline\" id=\"Recurring_billing.2C_cancellation.2C_and_changes_in_purchase_state\"><b>Recurring billing, cancellation, and changes in purchase state<\/b><\/span><\/h3>\n<p>Google Play notifies your app when the user completes the purchase of a subscription, but the purchase state does not change over time, provided that recurring billing takes place successfully. Google Play does not notify your app of a purchase state change until the subscription expires because of non-payment or user cancellation. \n<\/p><p>Over the life of a subscription, your app does not need to initiate any recurring billing events \u2014 those are all handled by Google Play and they are transparent to your application if billing is successful.\n<\/p><p>When the user cancels a subscription during an active billing cycle, Google Play does not notify your app immediately of the change in purchase state. Instead, it waits until the end of the active billing cycle and then notifies your app that the purchase state has changed to \"Expired\". \n<\/p><p>Similarly, if payment for the next billing cycle fails, Google Play waits until the end of the active billing cycle and then notifies your app at that time that the purchase state has changed to \"Expired\".\n<\/p><p>Your app can handle user cancellation and non-payment in the same way, since both cause a change to the same \"Expired\" purchase state. Once the purchase state has become \"Expired\", your app does not need to grant further access to the subscription content.\n\u8c37\u6b4c\u6253\u901a\u77e5\u4f60\u7684\u5e94\u7528\u4e2d,\u5f53\u7528\u6237\u5b8c\u6210\u8d2d\u4e70\u8ba2\u9605,\u4f46\u91c7\u8d2d\u72b6\u6001\u4e0d\u968f\u65f6\u95f4\u53d8\u5316,\u53ea\u8981\u91cd\u590d\u8ba1\u8d39\u53d1\u751f\u6210\u529f\u3002\u8c37\u6b4c\u73a9\u4e0d\u901a\u77e5\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u7684\u4e00\u4e2a\u91c7\u8d2d\u72b6\u6001\u6539\u53d8\u76f4\u5230\u8ba2\u9605\u8fc7\u671f\u56e0\u4e3a\u7f3a\u94b1\u6216\u7528\u6237\u53d6\u6d88\u3002\n<\/p><p><br \/>\n\u4e00\u751f\u7684\u8ba2\u9605,\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u4e0d\u9700\u8981\u542f\u52a8\u4efb\u4f55\u91cd\u590d\u8ba1\u8d39\u4e8b\u4ef6\u2014\u2014\u6240\u6709\u8fd9\u4e9b\u90fd\u662f\u7531\u8c37\u6b4c\u6253\u7403,\u4ed6\u4eec\u5bf9\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f\u662f\u900f\u660e\u7684,\u5982\u679c\u8ba1\u8d39\u662f\u6210\u529f\u7684\u3002\n<\/p><p><br \/>\n\u5f53\u7528\u6237\u53d6\u6d88\u8ba2\u9605\u4e00\u4e2a\u6d3b\u8dc3\u7684\u7ed3\u7b97\u5468\u671f\u671f\u95f4,\u8c37\u6b4c\u73a9\u4e0d\u7acb\u5373\u901a\u77e5\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u4e2d\u6240\u53d1\u751f\u7684\u53d8\u5316\u91c7\u8d2d\u72b6\u6001\u3002\u76f8\u53cd,\u5b83\u4f1a\u7b49\u5230\u6700\u540e\u7684\u6d3b\u8dc3\u7684\u7ed3\u7b97\u5468\u671f,\u7136\u540e\u4f1a\u901a\u77e5\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f,\u8d2d\u4e70\u72b6\u6001\u66f4\u6539\u4e3a\u201c\u8fc7\u671f\u201d\u3002\n<\/p><p><br \/>\n\u7c7b\u4f3c\u5730,\u5982\u679c\u652f\u4ed8\u4e0b\u6b21\u5e10\u5355\u5468\u671f\u5931\u8d25,\u8c37\u6b4c\u73a9\u4f1a\u7b49\u5230\u6700\u540e\u7684\u6d3b\u8dc3\u7684\u7ed3\u7b97\u5468\u671f,\u7136\u540e\u4f1a\u901a\u77e5\u5e94\u7528\u7a0b\u5e8f\u5f53\u65f6\u7684\u91c7\u8d2d\u72b6\u6001\u66f4\u6539\u4e3a\u201c\u8fc7\u671f\u201d\u3002\n<\/p><p><br \/>\n\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u5904\u7406\u7528\u6237\u7684\u53d6\u6d88\u548c\u672a\u4ed8\u6b3e\u4ee5\u540c\u6837\u7684\u65b9\u5f0f,\u56e0\u4e3a\u4ed6\u4eec\u90fd\u53d1\u751f\u4e86\u53d8\u5316,\u540c\u6837\u7684\u201c\u8fc7\u671f\u201d\u91c7\u8d2d\u72b6\u6001\u3002\u4e00\u65e6\u91c7\u8d2d\u72b6\u6001\u5df2\u7ecf\u6210\u4e3a\u201c\u8fc7\u671f\u201d,\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u4e0d\u9700\u8981\u683c\u5170\u7279\u8fdb\u4e00\u6b65\u8bbf\u95ee\u8ba2\u9605\u5185\u5bb9\u3002\n<\/p>\n<h3> <span class=\"mw-headline\" id=\"Modifying_your_app_for_subscriptions\"><b>Modifying your app for subscriptions<\/b><\/span><\/h3>\n<p>For subscriptions, you make the same types of modifications to your app as are described in Modifying your Application Code.\n<\/p><p>Note that, in your UI that lets users view and select subscriptions for purchase, you should add logic to check for purchased subscriptions and validate them. Your UI should not present subscriptions if the user has already purchased them.\n<\/p><p>\u4e3a\u8ba2\u9605,\u4f60\u72af\u540c\u6837\u7684\u7c7b\u578b\u7684\u4fee\u6539\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u4f5c\u4e3a\u63cf\u8ff0\u4fee\u6539\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f\u4ee3\u7801\u3002\n<\/p><p><br \/>\n\u6ce8\u610f,\u5728\u4f60\u7684\u7528\u6237\u754c\u9762,\u8ba9\u7528\u6237\u8ba2\u9605\u89c6\u56fe\u5e76\u9009\u62e9\u8d2d\u4e70,\u60a8\u5e94\u8be5\u6dfb\u52a0\u903b\u8f91\u6765\u68c0\u67e5\u8d2d\u4e70\u8ba2\u9605\u548c\u9a8c\u8bc1\u5b83\u4eec\u3002\u4f60\u7684UI\u5e94\u8be5\u4e0d\u4f1a\u8ba2\u9605\u5982\u679c\u7528\u6237\u5df2\u7ecf\u8d2d\u4e70\u4e86\u4ed6\u4eec\u3002\n<\/p><p><br \/>\n<\/p>\n<h2> <span class=\"mw-headline\" id=\"Administering_Subscriptions\"><b>Administering Subscriptions<\/b><\/span><\/h2>\n<hr \/>\n<p>To create and manage subscriptions, you use the tools in the Developer Console, just as for other in-app products.\n<\/p><p>At the Developer Console, you can configure these attributes for each subscription product:\n<\/p><p>Purchase Type: always set to \u201csubscription\u201d \nSubscription ID: An identifier for the subscription \nPublishing State: Unpublished\/Published \nLanguage: The default language for displaying the subscription \nTitle: The title of the subscription product \nDescription: Details that tell the user about the subscription \nPrice: USD price of subscription per recurrence \nRecurrence: monthly or yearly \nAdditional currency pricing (can be auto-filled) \nFor details, please see Administering In-app Billing.\n<\/p><p>\u521b\u5efa\u548c\u7ba1\u7406\u8ba2\u9605,\u4f60\u4f7f\u7528\u5de5\u5177\u7684\u5f00\u53d1\u4eba\u5458\u63a7\u5236\u53f0,\u5c31\u50cf\u5176\u4ed6\u5e94\u7528\u5185\u7684\u4ea7\u54c1\u3002\n<\/p><p>\u5728\u5f00\u53d1\u4eba\u5458\u63a7\u5236\u53f0,\u60a8\u53ef\u4ee5\u914d\u7f6e\u8fd9\u4e9b\u5c5e\u6027\u4e3a\u6bcf\u4e2a\u8ba2\u9605\u884c\u4e3a\u4ea7\u54c1:\n<\/p><p>\u8d2d\u4e70\u7c7b\u578b:\u603b\u662f\u8bbe\u7f6e\u4e3a\u201c\u8ba2\u9605\u201d\n<\/p><p>\u8ba2\u9605ID:\u4e00\u4e2a\u6807\u8bc6\u7b26\u7684\u8ba4\u8d2d\n<\/p><p>\u53d1\u5e03\u72b6\u6001:\u51fa\u7248\/\u53d1\u8868\n<\/p><p>\u8bed\u8a00:\u9ed8\u8ba4\u8bed\u8a00\u663e\u793a\u8ba2\u9605\n<\/p><p>\u6807\u9898:\u6807\u9898\u7684\u8ba2\u9605\u7684\u4ea7\u54c1\n<\/p><p>\u63cf\u8ff0:\u7ec6\u8282,\u544a\u8bc9\u7528\u6237\u5173\u4e8e\u8ba2\u9605\n<\/p><p>\u4ef7\u683c:\u7f8e\u5143\u7684\u8ba2\u9605\u4ef7\u683c\u6bcf\u590d\u53d1\n<\/p><p>\u590d\u53d1:\u6bcf\u6708\u6216\u6bcf\u5e74\n<\/p><p>\u989d\u5916\u7684\u8d27\u5e01\u5b9a\u4ef7(\u53ef\u4ee5\u81ea\u52a8\u586b\u5199)\n<\/p><p>\u6709\u5173\u8be6\u60c5,\u8bf7\u53c2\u9605\u7ba1\u7406\u5e94\u7528\u6536\u8d39\u3002\n<\/p>\n<h2> <span class=\"mw-headline\" id=\"Google_Play_Android_Developer_API\"><b>Google Play Android Developer API<\/b><\/span><\/h2>\n<hr \/>\n<p>Google Play offers an HTTP-based API that you can use to remotely query the validity of a specific subscription at any time or cancel a subscription. The API is designed to be used from your backend servers as a way of securely managing subscriptions, as well as extending and integrating subscriptions with other services.\n<\/p><p>\u8c37\u6b4c\u63d0\u4f9b\u4e86\u4e00\u4e2a\u57fa\u4e8ehttp\u7684\u73a9API,\u60a8\u53ef\u4ee5\u4f7f\u7528\u8fdc\u7a0b\u67e5\u8be2\u7684\u6709\u6548\u6027\u5728\u4efb\u4f55\u65f6\u95f4\u7279\u5b9a\u8ba2\u9605\u6216\u53d6\u6d88\u8ba2\u9605\u3002\u8fd9\u4e2aAPI\u662f\u8bbe\u8ba1\u7528\u6765\u4ece\u4f60\u7684\u540e\u7aef\u670d\u52a1\u5668\u4f5c\u4e3a\u4e00\u79cd\u5b89\u5168\u7684\u7ba1\u7406\u8ba2\u9605\u4ee5\u53ca\u6269\u5c55\u548c\u96c6\u6210\u8ba2\u9605\u548c\u5176\u4ed6\u670d\u52a1\u3002\n<\/p>\n<h3> <span class=\"mw-headline\" id=\"Using_the_API\"><b>Using the API<\/b><\/span><\/h3>\n<p>To use the API, you must first register a project at the Google APIs Console and receive a Client ID and shared secret that your app will present when calling the Google Play Android Developer API. All calls to the API are authenticated with OAuth 2.0.\n<\/p><p>Once your app is registered, you can access the API directly, using standard HTTP methods to retrieve and manipulate resources, or you can use the Google APIs Client Libraries, which are extended to support the API.\n<\/p><p>The Google Play Android Developer API is built on a RESTful design that uses HTTP and JSON, so any standard web stack can send requests and parse the responses. However, if you don\u2019t want to send HTTP requests and parse responses manually, you can access the API using the client libraries, which provide better language integration, improved security, and support for making calls that require user authorization.\n<\/p><p>For more information about the API and how to access it through the Google APIs Client Libraries, see the documentation at:\n<\/p><p>\u4f7f\u7528API,\u60a8\u5fc5\u987b\u9996\u5148\u6ce8\u518c\u4e00\u4e2a\u9879\u76ee\u5728\u8c37\u6b4cAPI\u63a7\u5236\u53f0\u548c\u63a5\u6536\u5ba2\u6237ID\u548c\u5171\u4eab\u5bc6\u94a5,\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f\u5c06\u5c55\u793a\u5f53\u8c03\u7528\u8c37\u6b4cAndroid\u5f00\u53d1\u8005API\u73a9\u3002\u6240\u6709API\u8c03\u7528\u88ab\u9a8c\u8bc1\u4f7f\u7528OAuth 2.0\u3002\n<\/p><p>\u4e00\u65e6\u5e94\u7528\u7a0b\u5e8f\u6ce8\u518c,\u60a8\u53ef\u4ee5\u8bbf\u95eeAPI\u76f4\u63a5\u4f7f\u7528\u6807\u51c6\u7684HTTP\u65b9\u6cd5\u6765\u68c0\u7d22\u548c\u64cd\u4f5c\u8d44\u6e90,\u6216\u8005\u60a8\u53ef\u4ee5\u4f7f\u7528\u8c37\u6b4cAPI\u5ba2\u6237\u7aef\u5e93,\u8fd9\u662f\u6269\u5c55\u5230\u652f\u6301API\u3002\n<\/p><p>\u8c37\u6b4c\u7684Android\u5f00\u53d1\u8005API\u73a9\u662f\u5efa\u7acb\u5728\u4e00\u4e2aRESTful\u8bbe\u8ba1\u4f7f\u7528HTTP\u548cJSON,\u56e0\u6b64\u4efb\u4f55\u6807\u51c6web\u5806\u6808\u53ef\u4ee5\u53d1\u9001\u8bf7\u6c42\u548c\u89e3\u6790\u54cd\u5e94\u3002\u7136\u800c,\u5982\u679c\u4f60\u4e0d\u60f3\u53d1\u9001HTTP\u8bf7\u6c42\u548c\u89e3\u6790\u54cd\u5e94\u624b\u52a8,\u60a8\u53ef\u4ee5\u8bbf\u95eeAPI\u4f7f\u7528\u7684\u5ba2\u6237\u7aef\u5e93,\u5b83\u63d0\u4f9b\u66f4\u597d\u7684\u8bed\u8a00\u96c6\u6210,\u63d0\u9ad8\u5b89\u5168\u6027\u548c\u652f\u6301,\u7528\u4e8e\u8c03\u7528,\u9700\u8981\u7528\u6237\u6388\u6743\u3002\n<\/p><p>API\u7684\u66f4\u591a\u4fe1\u606f,\u4ee5\u53ca\u5982\u4f55\u4f7f\u7528\u5b83\u901a\u8fc7\u8c37\u6b4cAPI\u5ba2\u6237\u7aef\u5e93,\u8bf7\u53c2\u9605\u6587\u6863:\n<\/p><p><a rel=\"nofollow\" target=\"_blank\" class=\"external free\" href=\"https:\/\/developers\">https:\/\/developers<\/a>. google.com\/android-publisher\/v1\/\n<\/p>\n<h3> <span class=\"mw-headline\" id=\"Quota\"><b>Quota<\/b><\/span><\/h3>\n<p>Applications using the Google Play Android Developer API are limited to an initial courtesy usage quota of 15000 requests per day (per application). This should provide enough access for normal subscription-validation needs, assuming that you follow the recommendation in this section.\n<\/p><p>If you need to request a higher limit for your application, please use the \u201cRequest more\u201d link in the Google APIs Console. Also, please read the section below on design best practices for minimizing your use of the API.\n<\/p><p>\u5728\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u8c37\u6b4cAndroid\u5f00\u53d1\u8005API\u73a9\u88ab\u9650\u5236\u5230\u4e00\u4e2a\u521d\u59cb\u7684\u793c\u8c8c\u4f7f\u7528\u914d\u989d\u7684\u6bcf\u592915000\u4e2a\u8bf7\u6c42(\u6bcf\u4e2a\u5e94\u7528\u7a0b\u5e8f)\u3002\u8fd9\u5e94\u8be5\u63d0\u4f9b\u8db3\u591f\u7684\u8bbf\u95ee\u4e3a\u6b63\u5e38\u8ba2\u9605\u786e\u8ba4\u9700\u6c42,\u5047\u8bbe\u60a8\u9075\u5faa\u5efa\u8bae\u5728\u8fd9\u4e00\u8282\u4e2d\u3002\n<\/p><p><br \/>\n\u5982\u679c\u4f60\u9700\u8981\u8981\u6c42\u8f83\u9ad8\u7684\u9650\u5236\u5bf9\u4e8e\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f,\u8bf7\u4f7f\u7528\u201c\u8bf7\u6c42\u66f4\u591a\u201d\u7684\u94fe\u63a5\u5728\u8c37\u6b4capi\u63a7\u5236\u53f0\u3002\u540c\u65f6,\u8bf7\u9605\u8bfb\u4e0b\u9762\u90e8\u5206\u8bbe\u8ba1\u6700\u4f73\u5b9e\u8df5,\u4ee5\u51cf\u5c11\u4f7f\u7528\u7684API\u3002\n<\/p>\n<h3> <span class=\"mw-headline\" id=\"Authorization\"><b>Authorization<\/b><\/span><\/h3>\n<p>Calls to the Google Play Android Developer API require authorization. Google uses the OAuth 2.0 protocol to allow authorized applications to access user data. To learn more, see Authorization in the Google Play Android Developer API documentation.\n<\/p><p>\u8c03\u7528\u8c37\u6b4cAndroid\u5f00\u53d1\u8005API\u8981\u6c42\u6388\u6743\u73a9\u3002\u8c37\u6b4c\u4f7f\u7528OAuth 2.0\u534f\u8bae\u5141\u8bb8\u6388\u6743\u7684\u5e94\u7528\u7a0b\u5e8f\u8bbf\u95ee\u7528\u6237\u6570\u636e\u3002\u6b32\u4e86\u89e3\u66f4\u591a,\u8bf7\u770b\u6388\u6743\u5728\u8c37\u6b4c\u7684Android\u5f00\u53d1\u8005\u73a9API\u6587\u6863\u3002\n<\/p>\n<h3> <span class=\"mw-headline\" id=\"Using_the_API_efficiently\"><b>Using the API efficiently<\/b><\/span><\/h3>\n<p>Access to the Google Play Android Developer API is regulated to help ensure a high-performance environment for all applications that use it. While you can request a higher daily quota for your application, we highly recommend that you minimize your access using the technique(s) below. \n<\/p><p><br \/>\n<\/p>\n<ul><li>Store subscription expiry on your servers \u2014 your servers should use the Google Play Android Developer API to query the expiration date for new subscription tokens, then store the expiration date locally. This allows you to check the status of subscriptions only at or after the expiration (see below). \n<\/li><\/ul>\n<ul><li>Cache expiration and purchaseState \u2014 If your app contacts your backend servers at runtime to verify subscription validity, your server should cache the expiration and purchaseState to ensure the fastest possible response (and best experience) for the user. \n<\/li><\/ul>\n<ul><li>Query for subscription status only at expiration \u2014 Once your server has retrieved the expiration date of subscription tokens, it should not query the Google Play servers for the subscription status again until the subscription is reaching or has passed the expiration date. Typically, your servers would run a batch query each day to check the status of expiring subscriptions, then update the database. Note that: \n<\/li><\/ul>\n<dl><dd>Your servers should not query all subscriptions every day \n<\/dd><\/dl>\n<dl><dd>Your servers should never query subscription status dynamically, based on individual requests from your Android application. \n<\/dd><\/dl>\n<p>By following those general guidelines, your implementation will offer the best possible performance for users and minimize use of the Google Play Android Developer API.\n<\/p><p>\u8bbf\u95ee\u8c37\u6b4c\u7684Android\u5f00\u53d1\u8005API\u662f\u76d1\u7ba1\u73a9\u4e00\u4e2a\u9ad8\u6027\u80fd\u73af\u5883,\u4ee5\u5e2e\u52a9\u786e\u4fdd\u5bf9\u6240\u6709\u4f7f\u7528\u5b83\u7684\u5e94\u7528\u7a0b\u5e8f\u3002\u867d\u7136\u60a8\u53ef\u4ee5\u8981\u6c42\u4e00\u4e2a\u66f4\u9ad8\u7684\u6bcf\u65e5\u914d\u989d\u5bf9\u4e8e\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f,\u6211\u4eec\u5f3a\u70c8\u5efa\u8bae\u4f60\u51cf\u5c11\u4f60\u7684\u8bbf\u95ee\u4f7f\u7528\u6280\u672f(s)\u4ee5\u4e0b\u3002\n<\/p><p><br \/>\n<\/p>\n<ul><li>\u5728\u60a8\u7684\u670d\u52a1\u5668\u4e0a\u5b58\u50a8\u8ba2\u9605\u8fc7\u671f\u2014\u2014\u4f60\u7684\u670d\u52a1\u5668\u5e94\u8be5\u4f7f\u7528\u8c37\u6b4cAndroid\u5f00\u53d1\u8005API\u67e5\u8be2\u73a9\u7684\u8fc7\u671f\u65e5\u671f\u4e3a\u65b0\u7684\u8ba2\u9605\u4ee4\u724c,\u7136\u540e\u5b58\u50a8\u5728\u672c\u5730\u7684\u8fc7\u671f\u65e5\u671f\u3002\u8fd9\u5141\u8bb8\u60a8\u68c0\u67e5\u72b6\u6001\u7684\u8ba2\u9605\u53ea\u5728\u6216\u5230\u671f\u540e(\u89c1\u4e0b\u6587)\u3002\n<\/li><\/ul>\n<ul><li>\u7f13\u5b58\u8fc7\u671f\u548cpurchaseState\u2014\u2014\u5982\u679c\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u5728\u8fd0\u884c\u65f6\u63a5\u89e6\u4f60\u7684\u540e\u7aef\u670d\u52a1\u5668\u6765\u9a8c\u8bc1\u8ba2\u9605\u6548\u5ea6,\u4f60\u7684\u670d\u52a1\u5668\u5e94\u8be5\u7f13\u5b58\u8fc7\u671f\u548cpurchaseState\u786e\u4fdd\u6700\u5feb\u7684\u54cd\u5e94(\u548c\u6700\u597d\u7684\u7ecf\u9a8c)\u7684\u7528\u6237\u3002\n<\/li><\/ul>\n<ul><li>\u67e5\u8be2\u8ba2\u9605\u72b6\u6001\u53ea\u6709\u5728\u8fc7\u671f\u2014\u2014\u4e00\u65e6\u4f60\u7684\u670d\u52a1\u5668\u68c0\u7d22\u8fc7\u671f\u65e5\u671f\u7684\u8ba2\u9605\u4ee4\u724c,\u5b83\u4e0d\u5e94\u8be5\u67e5\u8be2\u8c37\u6b4c\u670d\u52a1\u5668\u73a9\u8ba2\u9605\u7684\u72b6\u6001\u624d\u80fd\u518d\u6b21\u8ba2\u9605\u8fbe\u5230\u6216\u5df2\u901a\u8fc7\u7684\u8fc7\u671f\u65e5\u671f\u3002\u901a\u5e38,\u60a8\u7684\u670d\u52a1\u5668\u5c06\u8fd0\u884c\u4e00\u4e2a\u6279\u5904\u7406\u67e5\u8be2,\u6bcf\u5929\u68c0\u67e5\u72b6\u6001\u7684\u8fc7\u671f\u8ba2\u9605,\u7136\u540e\u66f4\u65b0\u6570\u636e\u5e93\u3002\u6ce8\u610f:\n<\/li><\/ul>\n<dl><dd>\u4f60\u7684\u670d\u52a1\u5668\u4e0d\u5e94\u67e5\u8be2\u6240\u6709\u8ba2\u9605\u6bcf\u4e00\u5929\n<\/dd><\/dl>\n<dl><dd>\u4f60\u7684\u670d\u52a1\u5668\u4e0d\u5e94\u8be5\u67e5\u8be2\u8ba2\u9605\u72b6\u6001\u52a8\u6001,\u57fa\u4e8e\u5355\u4e2a\u8bf7\u6c42\u4ece\u4f60\u7684Android\u5e94\u7528\u7a0b\u5e8f\u3002\n<\/dd><\/dl>\n<p>\u6309\u7167\u8fd9\u4e9b\u901a\u7528\u7684\u6307\u5bfc\u539f\u5219,\u60a8\u7684\u5b9e\u73b0\u5c06\u63d0\u4f9b\u6700\u4f73\u7684\u6027\u80fd,\u51cf\u5c11\u7528\u6237\u4f7f\u7528\u8c37\u6b4cAndroid\u5f00\u53d1\u8005API\u73a9\u3002\n<\/p>"}