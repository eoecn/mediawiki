{"title":"SIP","text":"<p>\u539f\u6587\u5730\u5740\uff1a<a rel=\"nofollow\" target=\"_blank\" class=\"external free\" href=\"http:\/\/docs.eoeandroid.com\/intl\/ja\/guide\/topics\/connectivity\/sip.html\">http:\/\/docs.eoeandroid.com\/intl\/ja\/guide\/topics\/connectivity\/sip.html<\/a><br \/>\n\u7ffb\u8bd1\uff1atyutNo4<br \/>\n\u66f4\u65b0\uff1a2012.06.06<br \/>\n<\/p>\n<table id=\"toc\" class=\"toc\"><tr><td><div id=\"toctitle\"><h2>\u76ee\u5f55<\/h2><\/div>\n<ul>\n<li class=\"toclevel-1 tocsection-1\"><a href=\"#.E4.BC.9A.E8.AF.9D.E5.8F.91.E8.B5.B7.E5.8D.8F.E8.AE.AE\"><span class=\"tocnumber\">1<\/span> <span class=\"toctext\">\u4f1a\u8bdd\u53d1\u8d77\u534f\u8bae<\/span><\/a>\n<ul>\n<li class=\"toclevel-2 tocsection-2\"><a href=\"#.E6.9D.A1.E4.BB.B6.E5.92.8C.E9.99.90.E5.88.B6\"><span class=\"tocnumber\">1.1<\/span> <span class=\"toctext\">\u6761\u4ef6\u548c\u9650\u5236<\/span><\/a><\/li>\n<li class=\"toclevel-2 tocsection-3\"><a href=\"#SIP_API.E7.B1.BB.E5.92.8C.E6.8E.A5.E5.8F.A3\"><span class=\"tocnumber\">1.2<\/span> <span class=\"toctext\">SIP API\u7c7b\u548c\u63a5\u53e3<\/span><\/a><\/li>\n<li class=\"toclevel-2 tocsection-4\"><a href=\"#.E5.88.9B.E5.BB.BAManifest.E6.96.87.E4.BB.B6\"><span class=\"tocnumber\">1.3<\/span> <span class=\"toctext\">\u521b\u5efaManifest\u6587\u4ef6<\/span><\/a><\/li>\n<li class=\"toclevel-2 tocsection-5\"><a href=\"#.E5.88.9B.E5.BB.BA.E4.B8.80.E4.B8.AASipManager.E5.AF.B9.E8.B1.A1\"><span class=\"tocnumber\">1.4<\/span> <span class=\"toctext\">\u521b\u5efa\u4e00\u4e2aSipManager\u5bf9\u8c61<\/span><\/a><\/li>\n<li class=\"toclevel-2 tocsection-6\"><a href=\"#.E5.9C.A8SIP.E6.9C.8D.E5.8A.A1.E5.99.A8.E4.B8.8A.E8.BF.9B.E8.A1.8C.E6.B3.A8.E5.86.8C\"><span class=\"tocnumber\">1.5<\/span> <span class=\"toctext\">\u5728SIP\u670d\u52a1\u5668\u4e0a\u8fdb\u884c\u6ce8\u518c<\/span><\/a><\/li>\n<li class=\"toclevel-2 tocsection-7\"><a href=\"#.E6.8B.A8.E6.89.93.E4.B8.80.E4.B8.AA.E8.AF.AD.E9.9F.B3.E7.94.B5.E8.AF.9D\"><span class=\"tocnumber\">1.6<\/span> <span class=\"toctext\">\u62e8\u6253\u4e00\u4e2a\u8bed\u97f3\u7535\u8bdd<\/span><\/a><\/li>\n<li class=\"toclevel-2 tocsection-8\"><a href=\"#.E6.8E.A5.E6.94.B6.E5.91.BC.E5.8F.AB\"><span class=\"tocnumber\">1.7<\/span> <span class=\"toctext\">\u63a5\u6536\u547c\u53eb<\/span><\/a>\n<ul>\n<li class=\"toclevel-3 tocsection-9\"><a href=\"#.E5.AE.9E.E7.8E.B0BroadcastReceiver.E7.9A.84.E5.AD.90.E7.B1.BB\"><span class=\"tocnumber\">1.7.1<\/span> <span class=\"toctext\">\u5b9e\u73b0BroadcastReceiver\u7684\u5b50\u7c7b<\/span><\/a>\n<ul>\n<li class=\"toclevel-4 tocsection-10\"><a href=\"#.E5.88.9B.E5.BB.BA.E4.B8.80.E4.B8.AA.E7.94.A8.E6.9D.A5.E6.8E.A5.E6.94.B6.E5.91.BC.E5.8F.AB.E7.9A.84intent.E8.BF.87.E6.BB.A4.E5.99.A8\"><span class=\"tocnumber\">1.7.1.1<\/span> <span class=\"toctext\">\u521b\u5efa\u4e00\u4e2a\u7528\u6765\u63a5\u6536\u547c\u53eb\u7684intent\u8fc7\u6ee4\u5668<\/span><\/a><\/li>\n<\/ul>\n<\/li>\n<\/ul>\n<\/li>\n<li class=\"toclevel-2 tocsection-11\"><a href=\"#.E6.B5.8B.E8.AF.95SIP.E5.BA.94.E7.94.A8.E7.A8.8B.E5.BA.8F\"><span class=\"tocnumber\">1.8<\/span> <span class=\"toctext\">\u6d4b\u8bd5SIP\u5e94\u7528\u7a0b\u5e8f<\/span><\/a><\/li>\n<\/ul>\n<\/li>\n<\/ul>\n<\/td><\/tr><\/table>\n<h1> <span class=\"mw-headline\" id=\".E4.BC.9A.E8.AF.9D.E5.8F.91.E8.B5.B7.E5.8D.8F.E8.AE.AE\"> <b>\u4f1a\u8bdd\u53d1\u8d77\u534f\u8bae<\/b> <\/span><\/h1>\n<p>Android\u63d0\u4f9b\u4e86\u4e00\u4e2a\u652f\u6301\u4f1a\u8bdd\u53d1\u8d77\u534f\u8bae\uff08SIP\uff09\u7684API\uff0c\u8fd9\u53ef\u4ee5\u8ba9\u4f60\u6dfb\u52a0\u57fa\u4e8eSIP\u7684\u7f51\u7edc\u7535\u8bdd\u529f\u80fd\u5230\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u3002Android\u5305\u62ec\u4e00\u4e2a\u5b8c\u6574\u7684SIP\u534f\u8bae\u6808\u548c\u96c6\u6210\u7684\u547c\u53eb\u7ba1\u7406\u670d\u52a1\uff0c\u8ba9\u5e94\u7528\u8f7b\u677e\u65e0\u9700\u7ba1\u7406\u4f1a\u8bdd\u548c\u4f20\u8f93\u5c42\u7684\u6c9f\u901a\u5c31\u53ef\u8bbe\u7f6e\u4f20\u51fa\u548c\u4f20\u5165\u7684\u8bed\u97f3\u901a\u8bdd\uff0c\u6216\u76f4\u63a5\u97f3\u9891\u8bb0\u5f55\u6216\u64ad\u653e\u3002<br \/>\n<\/p><p><br \/>\n\u4ee5\u4e0b\u7c7b\u578b\u7684\u5e94\u7528\u7a0b\u5e8f\u53ef\u80fd\u4f7f\u7528SIP API\uff1a\n<\/p>\n<ul><li>\u89c6\u9891\u4f1a\u8bae\u3002\n<\/li><li>\u5373\u65f6\u6d88\u606f\u3002\n<\/li><\/ul>\n<h2> <span class=\"mw-headline\" id=\".E6.9D.A1.E4.BB.B6.E5.92.8C.E9.99.90.E5.88.B6\"> <b>\u6761\u4ef6\u548c\u9650\u5236<\/b> <\/span><\/h2>\n<p>\u4ee5\u4e0b\u662f\u5f00\u53d1\u4e00\u4e2aSIP\u5e94\u7528\u7a0b\u5e8f\u7684\u6761\u4ef6\uff1a\n<\/p>\n<ul><li>\u4f60\u5fc5\u987b\u6709\u4e00\u4e2a\u8fd0\u884cAndroid2.3\u6216\u8005\u66f4\u9ad8\u7248\u672c\u7684\u79fb\u52a8\u8bbe\u5907\u3002\n<\/li><li>SIP\u662f\u901a\u8fc7\u65e0\u7ebf\u6570\u636e\u8fde\u63a5\u6765\u8fd0\u884c\u7684\uff0c\u6240\u4ee5\u4f60\u7684\u8bbe\u5907\u5fc5\u987b\u6709\u4e00\u4e2a\u6570\u636e\u8fde\u63a5\uff08\u901a\u8fc7\u79fb\u52a8\u6570\u636e\u670d\u52a1\u6216\u8005Wi-Fi\uff09\u3002\u8fd9\u610f\u5473\u7740\u4f60\u4e0d\u80fd\u5728\u6a21\u62df\u5668\uff08AVD\uff09\u4e0a\u8fdb\u884c\u6d4b\u8bd5\uff0c\u53ea\u80fd\u5728\u4e00\u4e2a\u7269\u7406\u8bbe\u5907\u4e0a\u6d4b\u8bd5\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1\u5e94\u7528\u7a0b\u5e8f\u6d4b\u8bd5\uff08Testing SIP Applications\uff09\u3002\n<\/li><li>\u6bcf\u4e00\u4e2a\u53c2\u4e0e\u8005\u5728\u5e94\u7528\u7a0b\u5e8f\u7684\u901a\u4fe1\u4f1a\u8bdd\u8fc7\u7a0b\u4e2d\u5fc5\u987b\u6709\u4e00\u4e2aSIP\u8d26\u6237\u3002\u6709\u5f88\u591a\u4e0d\u540c\u7684SIP\u670d\u52a1\u63d0\u4f9b\u5546\u63d0\u4f9bSIP\u8d26\u6237\u3002\n<\/li><\/ul>\n<h2> <span class=\"mw-headline\" id=\"SIP_API.E7.B1.BB.E5.92.8C.E6.8E.A5.E5.8F.A3\"> <b>SIP API\u7c7b\u548c\u63a5\u53e3<\/b> <\/span><\/h2>\n<p>\u4ee5\u4e0b\u662fAndroid SIP API\u4e2d\u5305\u542b\u7684\u4e00\u4e9b\u7c7b\u548c\u4e00\u4e2a\u63a5\u53e3\uff08SipRegistrationListener\uff09\u7684\u6982\u8ff0\uff1a\n<\/p>\n<table style=\"border-spacing: 0px;margin: 4px 4px; width: 90%; border-left:1px solid #ccc;border-top:1px solid #ccc;\">\n\n\n<tr style=\"background:#DEE8F1;\">\n<th style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\"> \u7c7b\/\u63a5\u53e3\n<\/th>\n<th style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\"> \u63cf\u8ff0\n<\/th><\/tr>\n<tr style=\"vertical-align:top;\">\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\"> SipAudioCall\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\"> \u901a\u8fc7SIP\u5904\u7406\u7f51\u7edc\u97f3\u9891\u7535\u8bdd\n<\/td><\/tr>\n<tr style=\"vertical-align:top;\">\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\"> SipAudioCall.Listener\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\"> \u5173\u4e8eSIP\u7535\u8bdd\u7684\u4e8b\u4ef6\u76d1\u542c\u5668\uff0c\u6bd4\u5982\u63a5\u53d7\u5230\u4e00\u4e2a\u7535\u8bdd\uff08on ringing\uff09\u6216\u8005\u547c\u51fa\u4e00\u4e2a\u7535\u8bdd\uff08on calling\uff09\u7684\u65f6\u5019\n<\/td><\/tr>\n<tr style=\"vertical-align:top;\">\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\"> SipErrorCode\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\"> \u5b9a\u4e49\u5728SIP\u6d3b\u52a8\u4e2d\u8fd4\u56de\u7684\u9519\u8bef\u4ee3\u7801\n<\/td><\/tr>\n<tr style=\"vertical-align:top;\">\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\"> SipManager\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\"> \u4e3aSIP\u4efb\u52a1\u63d0\u4f9bAPIs\uff0c\u6bd4\u5982\u521d\u59cb\u5316\u4e00\u4e2aSIP\u8fde\u63a5\u3002\u63d0\u4f9b\u76f8\u5173SIP\u670d\u52a1\u7684\u8bbf\u95ee\u3002\n<\/td><\/tr>\n<tr style=\"vertical-align:top;\">\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\"> SipProfile\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\"> \u5b9a\u4e49\u4e86SIP\u7684\u76f8\u5173\u5c5e\u6027\uff0c\u5305\u542bSIP\u8d26\u6237\u3001\u57df\u540d\u548c\u670d\u52a1\u5668\u4fe1\u606f\n<\/td><\/tr>\n<tr style=\"vertical-align:top;\">\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\"> SipProfile.Builder\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\"> \u521b\u5efaSipProfile\u7684\u5e2e\u52a9\u7c7b\n<\/td><\/tr>\n<tr style=\"vertical-align:top;\">\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\"> SipSession\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\"> \u4ee3\u8868\u4e00\u4e2aSIP\u4f1a\u8bdd\uff0c\u8ddfSIP\u5bf9\u8bdd\u6846\u6216\u8005\u4e00\u4e2a\u6ca1\u6709\u5bf9\u8bdd\u6846\u7684\u72ec\u7acb\u4e8b\u52a1\u76f8\u5173\u8054\n<\/td><\/tr>\n<tr style=\"vertical-align:top;\">\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\"> SipSession.Listener\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\"> \u5173\u4e8eSIP\u4f1a\u8bdd\u7684\u4e8b\u4ef6\u76d1\u542c\u5668\uff0c\u6bd4\u5982\u6ce8\u518c\u4e00\u4e2a\u4f1a\u8bdd\uff08on registering\uff09\u6216\u8005\u547c\u51fa\u4e00\u4e2a\u7535\u8bdd\uff08on calling\uff09\u7684\u65f6\u5019\n<\/td><\/tr>\n<tr style=\"vertical-align:top;\">\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\"> SipSession.State\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\"> \u5b9a\u4e49SIP\u4f1a\u8bdd\u7684\u58f0\u660e\uff0c\u6bd4\u5982\u201c\u6ce8\u518c\u201d\u3001\u201c\u547c\u51fa\u7535\u8bdd\u201d\u3001\u201c\u6253\u5165\u7535\u8bdd\u201d\n<\/td><\/tr>\n<tr style=\"vertical-align:top;\">\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\"> SipRegistrationListener\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\"> \u4e00\u4e2a\u5173\u4e8eSIP\u6ce8\u518c\u4e8b\u4ef6\u76d1\u542c\u5668\u7684\u63a5\u53e3\n<\/td><\/tr><\/table>\n<h2> <span class=\"mw-headline\" id=\".E5.88.9B.E5.BB.BAManifest.E6.96.87.E4.BB.B6\"> <b>\u521b\u5efaManifest\u6587\u4ef6<\/b> <\/span><\/h2>\n<p>\u5982\u679c\u4f60\u5f00\u53d1\u4e00\u4e2a\u7528\u5230SIP API\u7684\u5e94\u7528\u7a0b\u5e8f\uff0c\u8bb0\u4f4f\u5b83\u9700\u8981Android2.3\uff08API9\uff09\u6216\u8005\u66f4\u9ad8\u7248\u672c\u7684\u5e73\u53f0\u7684\u652f\u6301\u3002\u6240\u4ee5\u5728\u4f60\u7684\u8bbe\u5907\u4e0a\u8981\u8fd0\u884cAndroid2.3\uff08API9\uff09\u6216\u8005\u66f4\u9ad8\u7684\u7248\u672c\uff0c\u5e76\u4e0d\u662f\u6240\u6709\u7684\u8bbe\u5907\u90fd\u63d0\u4f9bSIP\u7684\u652f\u6301\u3002\n<\/p><p>\u4e3a\u4e86\u4f7f\u7528SIP\uff0c\u9700\u8981\u6dfb\u52a0\u4ee5\u4e0b\u6743\u9650\u5230\u4f60\u7684manifest\u6587\u4ef6\uff1a\n<\/p>\n<ul><li>android.permission.USE_SIP\n<\/li><li>android.permission.INTERNET\n<\/li><\/ul>\n<p>\u4e3a\u4e86\u786e\u4fdd\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u80fd\u591f\u5b89\u88c5\u5230\u652f\u6301SIP\u7684\u8bbe\u5907\u4e0a\uff0c\u4f60\u9700\u8981\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9\u5230\u4f60\u5e94\u7528\u7a0b\u5e8f\u7684manifest\u6587\u4ef6\u91cc\uff1a\n<\/p>\n<ul><li>&lt;uses-sdk android:minSdkVersion=\"9\" \/&gt;. \u8fd9\u4e2a\u8bbe\u7f6e\u8868\u660e\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u9700\u8981Android2.3\u6216\u8005\u66f4\u9ad8\u7248\u672c\u7684\u5e73\u53f0\u3002\u8be6\u60c5\u8bf7\u53c2\u8003API Levels\u548c&lt;uses-sdk&gt;\u5143\u7d20\u76f8\u5173\u7684\u6587\u6863\u3002\n<\/li><\/ul>\n<p>\u4e3a\u4e86\u63a7\u5236\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u88ab\u90a3\u4e9b\u4e0d\u652f\u6301SIP\u7684\u8bbe\u5907\u8fc7\u6ee4\u6389\uff08\u6bd4\u5982\uff1a\u5728Google Play\uff09\uff0c\u4f60\u9700\u8981\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9\u5230\u4f60\u5e94\u7528\u7a0b\u5e8f\u7684manifest\u6587\u4ef6\u91cc\uff1a\n<\/p>\n<ul><li>&lt;uses-feature android:name=\"android.hardware.sip.voip\" \/&gt;. \u8fd9\u4e2a\u8bbe\u7f6e\u58f0\u660e\u4e86\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u7528\u5230\u4e86SIP API\u3002\u8fd9\u4e2a\u58f0\u660e\u8fd8\u5e94\u8be5\u5305\u542b\u4e00\u4e2aandroid:required \u5c5e\u6027\u6765\u8868\u660e\u4f60\u662f\u5426\u60f3\u8ba9\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u88ab\u90a3\u4e9b\u4e0d\u63d0\u4f9bSIP\u652f\u6301\u7684\u8bbe\u5907\u8fc7\u6ee4\u6389\u3002\u5176\u4ed6&lt;uses-feature&gt;\u58f0\u660e\u4f60\u4e5f\u53ef\u80fd\u9700\u8981\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e\u4f60\u7684\u5b9e\u73b0\uff0c\u8be6\u60c5\u8bf7\u53c2\u8003&lt;uses- feature&gt; \u5143\u7d20\u76f8\u5173\u7684\u6587\u6863\u3002\n<\/li><\/ul>\n<p>\u5982\u679c\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u8bbe\u8ba1\u7528\u6765\u63a5\u53d7\u547c\u53eb\uff0c\u90a3\u4e48\u4f60\u8fd8\u5fc5\u987b\u5728\u5e94\u7528\u7a0b\u5e8f\u7684manifest\u6587\u4ef6\u91cc\u5b9a\u4e49\u4e00\u4e2a\u63a5\u6536\u5668\uff08BroadcastReceiver \u7684\u5b50\u7c7b\uff09\uff1a\n<\/p>\n<ul><li>&lt;receiver android:name=\".IncomingCallReceiver\" android:label=\"Call Receiver\"\/&gt;\n<\/li><\/ul>\n<p>\u4ee5\u4e0b\u662f\u4eceSipDemo\u9879\u76eemanifest\u6587\u4ef6\u4e2d\u6458\u5f55\u7684\u5185\u5bb9\uff1a\n<\/p>\n<pre class=\"xml\">&#160;\n <span style=\"color: #009900;\"><span style=\"font-weight: bold; color: black;\">&lt;?xml<\/span> <span style=\"color: #000066;\">version<\/span>=<span style=\"color: #ff0000;\">&quot;1.0&quot;<\/span> <span style=\"color: #000066;\">encoding<\/span>=<span style=\"color: #ff0000;\">&quot;utf-8&quot;<\/span><span style=\"font-weight: bold; color: black;\">?&gt;<\/span><\/span>\n <span style=\"color: #009900;\"><span style=\"font-weight: bold; color: black;\">&lt;manifest<\/span> <span style=\"color: #000066;\">xmlns:android<\/span>=<span style=\"color: #ff0000;\">&quot;http:\/\/schemas.android.com\/apk\/res\/android&quot;<\/span>\n           <span style=\"color: #000066;\">package<\/span>=<span style=\"color: #ff0000;\">&quot;com.example.android.sip&quot;<\/span><span style=\"font-weight: bold; color: black;\">&gt;<\/span><\/span>\n   ...     \n      <span style=\"color: #009900;\"><span style=\"font-weight: bold; color: black;\">&lt;receiver<\/span> <span style=\"color: #000066;\">android:name<\/span>=<span style=\"color: #ff0000;\">&quot;.IncomingCallReceiver&quot;<\/span> <span style=\"color: #000066;\">android:label<\/span>=<span style=\"color: #ff0000;\">&quot;Call Receiver&quot;<\/span><span style=\"font-weight: bold; color: black;\">\/&gt;<\/span><\/span>  \n   ...\n   <span style=\"color: #009900;\"><span style=\"font-weight: bold; color: black;\">&lt;uses-sdk<\/span> <span style=\"color: #000066;\">android:minSdkVersion<\/span>=<span style=\"color: #ff0000;\">&quot;9&quot;<\/span> <span style=\"font-weight: bold; color: black;\">\/&gt;<\/span><\/span>\n   <span style=\"color: #009900;\"><span style=\"font-weight: bold; color: black;\">&lt;uses-permission<\/span> <span style=\"color: #000066;\">android:name<\/span>=<span style=\"color: #ff0000;\">&quot;android.permission.USE_SIP&quot;<\/span> <span style=\"font-weight: bold; color: black;\">\/&gt;<\/span><\/span>\n   <span style=\"color: #009900;\"><span style=\"font-weight: bold; color: black;\">&lt;uses-permission<\/span> <span style=\"color: #000066;\">android:name<\/span>=<span style=\"color: #ff0000;\">&quot;android.permission.INTERNET&quot;<\/span> <span style=\"font-weight: bold; color: black;\">\/&gt;<\/span><\/span>\n   ...\n   <span style=\"color: #009900;\"><span style=\"font-weight: bold; color: black;\">&lt;uses-feature<\/span> <span style=\"color: #000066;\">android:name<\/span>=<span style=\"color: #ff0000;\">&quot;android.hardware.sip.voip&quot;<\/span> <span style=\"color: #000066;\">android:required<\/span>=<span style=\"color: #ff0000;\">&quot;true&quot;<\/span> <span style=\"font-weight: bold; color: black;\">\/&gt;<\/span><\/span>\n   <span style=\"color: #009900;\"><span style=\"font-weight: bold; color: black;\">&lt;uses-feature<\/span> <span style=\"color: #000066;\">android:name<\/span>=<span style=\"color: #ff0000;\">&quot;android.hardware.wifi&quot;<\/span> <span style=\"color: #000066;\">android:required<\/span>=<span style=\"color: #ff0000;\">&quot;true&quot;<\/span> <span style=\"font-weight: bold; color: black;\">\/&gt;<\/span><\/span>\n   <span style=\"color: #009900;\"><span style=\"font-weight: bold; color: black;\">&lt;uses-feature<\/span> <span style=\"color: #000066;\">android:name<\/span>=<span style=\"color: #ff0000;\">&quot;android.hardware.microphone&quot;<\/span> <span style=\"color: #000066;\">android:required<\/span>=<span style=\"color: #ff0000;\">&quot;true&quot;<\/span> <span style=\"font-weight: bold; color: black;\">\/&gt;<\/span><\/span>\n <span style=\"color: #009900;\"><span style=\"font-weight: bold; color: black;\">&lt;\/manifest<span style=\"font-weight: bold; color: black;\">&gt;<\/span><\/span><\/span>\n&#160;<\/pre>\n<h2> <span class=\"mw-headline\" id=\".E5.88.9B.E5.BB.BA.E4.B8.80.E4.B8.AASipManager.E5.AF.B9.E8.B1.A1\"> <b>\u521b\u5efa\u4e00\u4e2aSipManager\u5bf9\u8c61<\/b> <\/span><\/h2>\n<p>\u8981\u60f3\u4f7f\u7528SIP API\uff0c\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u9700\u8981\u521b\u5efa\u4e00\u4e2aSipManager\u5bf9\u8c61\uff0c\u8fd9\u4e2aSipManager\u5bf9\u8c61\u5728\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u91cc\u8d1f\u8d23\u4ee5\u4e0b\u5185\u5bb9\uff1a\n<\/p>\n<ul><li>\u53d1\u8d77SIP\u4f1a\u8bdd\n<\/li><li>\u53d1\u8d77\u548c\u63a5\u53d7\u547c\u53eb\n<\/li><li>\u5728SIP provider\u91cc\u8fdb\u884c\u6ce8\u518c\u548c\u6ce8\u9500\n<\/li><li>\u9a8c\u8bc1\u4f1a\u8bdd\u7684\u8fde\u901a\u6027\n<\/li><\/ul>\n<p>\u4f60\u53ef\u4ee5\u50cf\u4e0b\u9762\u4e00\u6837\u5b9e\u4f8b\u5316\u4e00\u4e2a\u65b0\u7684SipManager\u5bf9\u8c61\uff1a\n<\/p>\n<pre class=\"java\">&#160;\n <span style=\"color: #000000; font-weight: bold;\">public<\/span> SipManager mSipManager = <span style=\"color: #000000; font-weight: bold;\">null<\/span>;\n ...\n <span style=\"color: #b1b100;\">if<\/span><span style=\"color: #66cc66;\">&#40;<\/span>mSipManager == <span style=\"color: #000000; font-weight: bold;\">null<\/span><span style=\"color: #66cc66;\">&#41;<\/span> <span style=\"color: #66cc66;\">&#123;<\/span>\n     mSipManager = SipManager.<span style=\"color: #006600;\">newInstance<\/span><span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #000000; font-weight: bold;\">this<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n <span style=\"color: #66cc66;\">&#125;<\/span>\n&#160;<\/pre>\n<h2> <span class=\"mw-headline\" id=\".E5.9C.A8SIP.E6.9C.8D.E5.8A.A1.E5.99.A8.E4.B8.8A.E8.BF.9B.E8.A1.8C.E6.B3.A8.E5.86.8C\"> <b>\u5728SIP\u670d\u52a1\u5668\u4e0a\u8fdb\u884c\u6ce8\u518c<\/b> <\/span><\/h2>\n<p>\u4e00\u4e2a\u5178\u578b\u7684Android SIP\u5e94\u7528\u4e2d\u5305\u542b\u4e00\u4e2a\u6216\u591a\u4e2a\u7528\u6237\uff0c\u4ed6\u4eec\u4e2d\u7684\u6bcf\u4e2a\u4eba\u90fd\u6709\u4e00\u4e2aSIP\u8d26\u6237\u3002\u5728Android SIP\u5e94\u7528\u4e2d\uff0c\u6bcf\u4e00\u4e2aSIP\u8d26\u6237\u4ee3\u8868\u4e00\u4e2aSipProfile\u5bf9\u8c61\u3002\n<\/p><p>\u4e00\u4e2aSipProfile\u5bf9\u8c61\u5b9a\u4e49\u4e86\u4e00\u4e2aSIP\u7684\u6982\u8981\u6587\u4ef6\uff0c\u5305\u62ecSIP\u8d26\u6237\u3001\u57df\u540d\u548c\u670d\u52a1\u5668\u4fe1\u606f\u3002\u8ddf\u6b63\u5728\u8fd9\u4e2a\u8bbe\u5907\u4e0a\u8fd0\u884c\u5e94\u7528\u7684SIP\u8d26\u6237\u76f8\u5173\u8054\u7684\u6982\u8981\u6587\u4ef6\u88ab\u79f0\u4e4b\u4e3a\u672c\u5730\u914d\u7f6e\u6587\u4ef6\u3002\u4e0e\u4f1a\u8bdd\u76f8\u8fde\u63a5\u7684\u6982\u8981\u6587\u4ef6\u88ab\u79f0\u4e4b\u4e3a\u5bf9\u5e94\u914d\u7f6e\u6587\u4ef6\u3002\u5f53\u4f60\u7684SIP\u5e94\u7528\u901a\u8fc7\u672c\u5730SipProfile\u767b\u5f55\u5230SIP\u670d\u52a1\u5668\u7684\u65f6\u5019\uff0c\u8fd9\u5c31\u6709\u6548\u7684\u6ce8\u518c\u5f53\u524d\u8bbe\u5907\u4e3a\u57fa\u7ad9\u6765\u53d1\u9001SIP\u547c\u53eb\u5230\u4f60\u60f3\u547c\u53eb\u7684SIP\u5730\u5740\u3002\n<\/p><p>\u672c\u8282\u5c55\u793a\u4e86\u5982\u4f55\u521b\u5efa\u4e00\u4e2aSipProfile\uff0c\u4ee5\u53ca\u5982\u4f55\u628a\u521a\u521b\u5efa\u7684SipProfile\u6ce8\u518c\u5230SIP\u670d\u52a1\u5668\u4e0a\uff0c\u5e76\u4e14\u8ddf\u8e2a\u6ce8\u518c\u4e8b\u4ef6\u3002\n\u4f60\u53ef\u4ee5\u50cf\u4ee5\u4e0b\u4e00\u6837\u521b\u5efa\u4e00\u4e2aSipProfile\u5bf9\u8c61\uff1a\n<\/p>\n<pre class=\"java\">&#160;\n <span style=\"color: #000000; font-weight: bold;\">public<\/span> SipProfile mSipProfile = <span style=\"color: #000000; font-weight: bold;\">null<\/span>;\n ...\n&#160;\n <span style=\"color: #006600;\">SipProfile<\/span>.<span style=\"color: #006600;\">Builder<\/span> builder = <span style=\"color: #000000; font-weight: bold;\">new<\/span> SipProfile.<span style=\"color: #006600;\">Builder<\/span><span style=\"color: #66cc66;\">&#40;<\/span>username, domain<span style=\"color: #66cc66;\">&#41;<\/span>;\n builder.<span style=\"color: #006600;\">setPassword<\/span><span style=\"color: #66cc66;\">&#40;<\/span>password<span style=\"color: #66cc66;\">&#41;<\/span>;\n mSipProfile = builder.<span style=\"color: #006600;\">build<\/span><span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n&#160;<\/pre>\n<p>\u63a5\u4e0b\u6765\u7684\u4ee3\u7801\u6458\u5f55\u672c\u5730\u914d\u7f6e\u6587\u4ef6\uff0c\u7528\u4e8e\u547c\u51fa\u7535\u8bdd\u548c\/\u6216\u63a5\u6536\u901a\u7528\u7684SIP\u7535\u8bdd\u3002\u547c\u53eb\u5668\u53ef\u4ee5\u901a\u8fc7mSipManager.makeAudioCall\u6765\u547c\u51fa\u540e\u7eed\u7535\u8bdd\u3002\u8fd9\u6bb5\u6458\u5f55\u540c\u6837\u8bbe\u7f6e\u4e86\u4e00\u4e2aandroid.SipDemo.INCOMING_CALL\u884c\u52a8\uff0c\u8fd9\u4e2a\u884c\u52a8\u4f1a\u88ab\u4e00\u4e2aintent\u8fc7\u6ee4\u5668\u6765\u4f7f\u7528\uff0c\u5f53\u524d\u8bbe\u5907\u63a5\u6536\u5230\u4e00\u4e2a\u547c\u53eb\uff08\u89c1Setting up an intent filter to receive calls\uff09\u3002\u4ee5\u4e0b\u662f\u6ce8\u518c\u6b65\u9aa4\uff1a\n<\/p>\n<pre class=\"java\">&#160;\n Intent intent = <span style=\"color: #000000; font-weight: bold;\">new<\/span> Intent<span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n intent.<span style=\"color: #006600;\">setAction<\/span><span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #ff0000;\">&quot;android.SipDemo.INCOMING_CALL&quot;<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n PendingIntent pendingIntent = PendingIntent.<span style=\"color: #006600;\">getBroadcast<\/span><span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #000000; font-weight: bold;\">this<\/span>, <span style=\"color: #cc66cc;\">0<\/span>, intent, Intent.<span style=\"color: #006600;\">FILL_IN_DATA<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n mSipManager.<span style=\"color: #006600;\">open<\/span><span style=\"color: #66cc66;\">&#40;<\/span>mSipProfile, pendingIntent, <span style=\"color: #000000; font-weight: bold;\">null<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n&#160;<\/pre>\n<p>\u6700\u540e\u8fd9\u6bb5\u4ee3\u7801\u5728SipManager\u4e0a\u8bbe\u7f6e\u4e86\u4e00\u4e2aSipRegistrationListener \u76d1\u542c\u5668\uff0c\u8fd9\u4e2a\u76d1\u542c\u5668\u4f1a\u8ddf\u8e2aSipProfile\u662f\u5426\u6210\u529f\u7684\u6ce8\u518c\u5230\u4f60\u7684SIP\u670d\u52a1\u63d0\u4f9b\u8005\u3002\n<\/p>\n<pre class=\"java\">&#160;\n mSipManager.<span style=\"color: #006600;\">setRegistrationListener<\/span><span style=\"color: #66cc66;\">&#40;<\/span>mSipProfile.<span style=\"color: #006600;\">getUriString<\/span><span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #66cc66;\">&#41;<\/span>, <span style=\"color: #000000; font-weight: bold;\">new<\/span> SipRegistrationListener<span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #66cc66;\">&#41;<\/span> <span style=\"color: #66cc66;\">&#123;<\/span>\n&#160;\n <span style=\"color: #000000; font-weight: bold;\">public<\/span> <span style=\"color: #993333;\">void<\/span> onRegistering<span style=\"color: #66cc66;\">&#40;<\/span><a href=\"http:\/\/www.google.com\/search?hl=en&amp;q=allinurl%3AString+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span style=\"color: #aaaadd; font-weight: bold;\">String<\/span><\/a> localProfileUri<span style=\"color: #66cc66;\">&#41;<\/span> <span style=\"color: #66cc66;\">&#123;<\/span>\n     updateStatus<span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #ff0000;\">&quot;Registering with SIP Server...&quot;<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n <span style=\"color: #66cc66;\">&#125;<\/span>\n&#160;\n <span style=\"color: #000000; font-weight: bold;\">public<\/span> <span style=\"color: #993333;\">void<\/span> onRegistrationDone<span style=\"color: #66cc66;\">&#40;<\/span><a href=\"http:\/\/www.google.com\/search?hl=en&amp;q=allinurl%3AString+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span style=\"color: #aaaadd; font-weight: bold;\">String<\/span><\/a> localProfileUri, <span style=\"color: #993333;\">long<\/span> expiryTime<span style=\"color: #66cc66;\">&#41;<\/span> <span style=\"color: #66cc66;\">&#123;<\/span>\n     updateStatus<span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #ff0000;\">&quot;Ready&quot;<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n <span style=\"color: #66cc66;\">&#125;<\/span>\n&#160;\n <span style=\"color: #000000; font-weight: bold;\">public<\/span> <span style=\"color: #993333;\">void<\/span> onRegistrationFailed<span style=\"color: #66cc66;\">&#40;<\/span><a href=\"http:\/\/www.google.com\/search?hl=en&amp;q=allinurl%3AString+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span style=\"color: #aaaadd; font-weight: bold;\">String<\/span><\/a> localProfileUri, <span style=\"color: #993333;\">int<\/span> errorCode,\n     <a href=\"http:\/\/www.google.com\/search?hl=en&amp;q=allinurl%3AString+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span style=\"color: #aaaadd; font-weight: bold;\">String<\/span><\/a> errorMessage<span style=\"color: #66cc66;\">&#41;<\/span> <span style=\"color: #66cc66;\">&#123;<\/span>\n     updateStatus<span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #ff0000;\">&quot;Registration failed.  Please check settings.&quot;<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n <span style=\"color: #66cc66;\">&#125;<\/span>\n&#160;<\/pre>\n<p>\u5f53\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u5b8c\u4e00\u4e2aprofile\u7684\u65f6\u5019\uff0c\u4f60\u5e94\u8be5\u5173\u95ed\u5b83\u6765\u91ca\u653e\u76f8\u5173\u8054\u7684\u5bf9\u8c61\u5230\u5185\u5b58\u4e2d\u4ee5\u53ca\u4ece\u670d\u52a1\u5668\u4e0a\u6ce8\u9500\u5f53\u524d\u8bbe\u5907\u3002\u4f8b\u5982\uff1a\n<\/p>\n<pre class=\"java\">&#160;\n <span style=\"color: #000000; font-weight: bold;\">public<\/span> <span style=\"color: #993333;\">void<\/span> closeLocalProfile<span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #66cc66;\">&#41;<\/span> <span style=\"color: #66cc66;\">&#123;<\/span>\n     <span style=\"color: #b1b100;\">if<\/span> <span style=\"color: #66cc66;\">&#40;<\/span>mSipManager == <span style=\"color: #000000; font-weight: bold;\">null<\/span><span style=\"color: #66cc66;\">&#41;<\/span> <span style=\"color: #66cc66;\">&#123;<\/span>\n       <span style=\"color: #000000; font-weight: bold;\">return<\/span>;\n     <span style=\"color: #66cc66;\">&#125;<\/span>\n     <span style=\"color: #000000; font-weight: bold;\">try<\/span> <span style=\"color: #66cc66;\">&#123;<\/span>\n        <span style=\"color: #b1b100;\">if<\/span> <span style=\"color: #66cc66;\">&#40;<\/span>mSipProfile&#160;!= <span style=\"color: #000000; font-weight: bold;\">null<\/span><span style=\"color: #66cc66;\">&#41;<\/span> <span style=\"color: #66cc66;\">&#123;<\/span>\n           mSipManager.<span style=\"color: #006600;\">close<\/span><span style=\"color: #66cc66;\">&#40;<\/span>mSipProfile.<span style=\"color: #006600;\">getUriString<\/span><span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #66cc66;\">&#41;<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n        <span style=\"color: #66cc66;\">&#125;<\/span>\n      <span style=\"color: #66cc66;\">&#125;<\/span> <span style=\"color: #000000; font-weight: bold;\">catch<\/span> <span style=\"color: #66cc66;\">&#40;<\/span><a href=\"http:\/\/www.google.com\/search?hl=en&amp;q=allinurl%3AException+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span style=\"color: #aaaadd; font-weight: bold;\">Exception<\/span><\/a> ee<span style=\"color: #66cc66;\">&#41;<\/span> <span style=\"color: #66cc66;\">&#123;<\/span>\n        Log.<span style=\"color: #006600;\">d<\/span><span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #ff0000;\">&quot;WalkieTalkieActivity\/onDestroy&quot;<\/span>, <span style=\"color: #ff0000;\">&quot;Failed to close local profile.&quot;<\/span>, ee<span style=\"color: #66cc66;\">&#41;<\/span>;\n      <span style=\"color: #66cc66;\">&#125;<\/span>\n <span style=\"color: #66cc66;\">&#125;<\/span>\n&#160;<\/pre>\n<h2> <span class=\"mw-headline\" id=\".E6.8B.A8.E6.89.93.E4.B8.80.E4.B8.AA.E8.AF.AD.E9.9F.B3.E7.94.B5.E8.AF.9D\"> <b>\u62e8\u6253\u4e00\u4e2a\u8bed\u97f3\u7535\u8bdd<\/b> <\/span><\/h2>\n<p>\u8981\u60f3\u62e8\u6253\u4e00\u4e2a\u8bed\u97f3\u7535\u8bdd\uff0c\u4f60\u9700\u8981\u51c6\u5907\u5982\u4e0b\u6761\u4ef6\uff1a\n<\/p>\n<ul><li>\u4e00\u4e2a\u53d1\u8d77\u547c\u53eb\u7535\u8bdd\u7684SipProfile\u5bf9\u8c61\uff08\u672c\u5730\u914d\u7f6e\u6587\u4ef6\uff09\u548c\u4e00\u4e2a\u7528\u6765\u63a5\u6536\u547c\u53eb\u7684\u6709\u6548\u7684SIP\u5730\u5740\uff08\u5bf9\u5e94\u914d\u7f6e\u6587\u4ef6\uff09\n<\/li><li>\u4e00\u4e2aSipManager\u5bf9\u8c61\n<\/li><\/ul>\n<p>\u8981\u60f3\u62e8\u6253\u4e00\u4e2a\u8bed\u97f3\u7535\u8bdd\uff0c\u4f60\u5e94\u8be5\u5efa\u7acb\u4e00\u4e2aSipAudioCall.Listener\u76d1\u542c\u5668\u3002\u5927\u90e8\u5206\u5ba2\u6237\u4e0eSIP\u5806\u6808\u7684\u4ea4\u4e92\u90fd\u662f\u901a\u8fc7\u76d1\u542c\u5668\u6765\u53d1\u751f\u7684\u3002\u5728\u8fd9\u4e00\u5c0f\u6bb5\u4f60\u5c06\u4f1a\u770b\u5230SipAudioCall.Listener\u76d1\u542c\u5668\u662f\u5982\u4f55\u5728\u547c\u53eb\u5236\u5b9a\u4e4b\u540e\u5efa\u7acb\u4e8b\u52a1\u7684\uff1a\n<\/p>\n<pre class=\"java\">&#160;\n SipAudioCall.<span style=\"color: #006600;\">Listener<\/span> listener = <span style=\"color: #000000; font-weight: bold;\">new<\/span> SipAudioCall.<span style=\"color: #006600;\">Listener<\/span><span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #66cc66;\">&#41;<\/span> <span style=\"color: #66cc66;\">&#123;<\/span>\n&#160;\n    @Override\n    <span style=\"color: #000000; font-weight: bold;\">public<\/span> <span style=\"color: #993333;\">void<\/span> onCallEstablished<span style=\"color: #66cc66;\">&#40;<\/span>SipAudioCall call<span style=\"color: #66cc66;\">&#41;<\/span> <span style=\"color: #66cc66;\">&#123;<\/span>\n       call.<span style=\"color: #006600;\">startAudio<\/span><span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n       call.<span style=\"color: #006600;\">setSpeakerMode<\/span><span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #000000; font-weight: bold;\">true<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n       call.<span style=\"color: #006600;\">toggleMute<\/span><span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n          ...\n    <span style=\"color: #66cc66;\">&#125;<\/span>\n&#160;\n    @Override\n    <span style=\"color: #000000; font-weight: bold;\">public<\/span> <span style=\"color: #993333;\">void<\/span> onCallEnded<span style=\"color: #66cc66;\">&#40;<\/span>SipAudioCall call<span style=\"color: #66cc66;\">&#41;<\/span> <span style=\"color: #66cc66;\">&#123;<\/span>\n       <span style=\"color: #808080; font-style: italic;\">\/\/ Do something.<\/span>\n    <span style=\"color: #66cc66;\">&#125;<\/span>\n <span style=\"color: #66cc66;\">&#125;<\/span>;\n&#160;<\/pre>\n<p>\u4e00\u65e6\u4f60\u521b\u5efa\u4e86\u8fd9\u4e2aSipAudioCall.Listener\u76d1\u542c\u5668\uff0c\u4f60\u5c31\u53ef\u4ee5\u62e8\u6253\u7535\u8bdd\u4e86\uff0cSipManager\u5bf9\u8c61\u91cc\u7684makeAudioCall\u65b9\u6cd5\u63a5\u53d7\u4ee5\u4e0b\u53c2\u6570\uff1a\n<\/p>\n<ul><li>\u4e00\u4e2a\u672c\u5730SIP\u914d\u7f6e\u6587\u4ef6\uff08\u547c\u53eb\u65b9\uff09\n<\/li><li>\u4e00\u4e2a\u76f8\u5bf9\u5e94\u7684SIP\u914d\u7f6e\u6587\u4ef6\uff08\u88ab\u547c\u53eb\u65b9\uff09\n<\/li><li>\u4e00\u4e2a\u7528\u6765\u76d1\u542c\u4eceSipAudioCall\u53d1\u51fa\u7684\u547c\u53eb\u4e8b\u4ef6\u7684SipAudioCall.Listener\uff0c\u8fd9\u4e2a\u53c2\u6570\u53ef\u4ee5\u4e3anull\uff0c\u4f46\u662f\u5982\u4e0a\u6240\u8bf4\uff0c\u4e00\u65e6\u547c\u53eb\u7535\u8bdd\u5236\u5b9a\uff0c\u8fd9\u4e2a\u76d1\u542c\u5668\u5c06\u88ab\u7528\u6765\u521b\u5efa\u4e8b\u52a1\n<\/li><li>\u8d85\u65f6\u7684\u503c\uff0c\u4ee5\u79d2\u4e3a\u5355\u4f4d\n<\/li><\/ul>\n<p>\u4f8b\u5982\uff1a\n<\/p>\n<pre class=\"java\">&#160;\ncall = mSipManager.<span style=\"color: #006600;\">makeAudioCall<\/span><span style=\"color: #66cc66;\">&#40;<\/span>mSipProfile.<span style=\"color: #006600;\">getUriString<\/span><span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #66cc66;\">&#41;<\/span>, sipAddress, listener, <span style=\"color: #cc66cc;\">30<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n&#160;<\/pre>\n<h2> <span class=\"mw-headline\" id=\".E6.8E.A5.E6.94.B6.E5.91.BC.E5.8F.AB\"> <b>\u63a5\u6536\u547c\u53eb<\/b> <\/span><\/h2>\n<p>\u4e3a\u4e86\u63a5\u6536\u547c\u53eb\uff0cSIP\u5e94\u7528\u7a0b\u5e8f\u5fc5\u987b\u5305\u542b\u4e00\u4e2aBroadcastReceiver\u7684\u5b50\u7c7b\uff0c\u8fd9\u4e2a\u5b50\u7c7b\u5f97\u6709\u80fd\u529b\u54cd\u5e94\u4e00\u4e2a\u8868\u660e\u6709\u6765\u7535\u7684intent\u3002\u56e0\u6b64\u4f60\u9700\u8981\u5728\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u91cc\u505a\u5982\u4e0b\u4e8b\u60c5\uff1a\n<\/p>\n<ul><li>\u5728AndroidManifest.xml\u6587\u4ef6\u4e2d\u58f0\u660e\u4e00\u4e2a&lt;receiver&gt;\u5143\u7d20\u3002\u5728SipDemo\u9879\u76ee\u4e2d\uff0c&lt;receiver&gt;\u5143\u7d20\u662f\u8fd9\u6837\u7684&lt;receiver android:name=\".IncomingCallReceiver\" android:label=\"Call Receiver\"\/&gt;\n<\/li><li>\u5b9e\u73b0BroadcastReceiver\u7684\u5b50\u7c7b\uff0c\u5728SipDemo\u4e2d\uff0c\u8fd9\u4e2a\u5b50\u7c7b\u662fIncomingCallReceiver\n<\/li><li>\u901a\u8fc7\u6302\u8d77\u4e00\u4e2aintent\u6765\u521d\u59cb\u5316\u672c\u5730\u914d\u7f6e\u6587\u4ef6\uff08SipProfile\uff09\uff0c\u5f53\u6709\u4eba\u547c\u53eb\u4f60\u7684\u65f6\u5019\uff0c\u8fd9\u4e2a\u6302\u8d77\u7684intent\u4f1a\u8c03\u7528\u4f60\u7684\u63a5\u6536\u5668\u3002\n<\/li><li>\u521b\u5efa\u4e00\u4e2aintent\u8fc7\u6ee4\u5668\uff0c\u8fd9\u4e2a\u8fc7\u6ee4\u5668\u901a\u8fc7\u6807\u5fd7\u7740\u6765\u7535\u7684\u884c\u52a8\u6765\u8fdb\u884c\u8fc7\u6ee4\u3002\u5728SipDemo\u4e2d\uff0c\u8fd9\u4e2aaction\u662fandroid.SipDemo.INCOMING_CALL\u3002\n<\/li><\/ul>\n<h3> <span class=\"mw-headline\" id=\".E5.AE.9E.E7.8E.B0BroadcastReceiver.E7.9A.84.E5.AD.90.E7.B1.BB\"> <b>\u5b9e\u73b0BroadcastReceiver\u7684\u5b50\u7c7b<\/b> <\/span><\/h3>\n<p>\u4e3a\u4e86\u63a5\u6536\u547c\u53eb\uff0c\u4f60\u7684SIP\u5e94\u7528\u5fc5\u987b\u5b9e\u73b0BroadcastReceiver\u7684\u5b50\u7c7b\u3002\u5f53Android\u7cfb\u7edf\u63a5\u6536\u5230\u4e00\u4e2a\u547c\u53eb\u7684\u65f6\u5019\uff0c\u4ed6\u4f1a\u5904\u7406\u8fd9\u4e2aSIP\u547c\u53eb\uff0c\u7136\u540e\u5e7f\u64ad\u4e00\u4e2a\u6765\u7535intent\uff08\u8fd9\u4e2aintent\u7531\u7cfb\u7edf\u6765\u5b9a\u4e49\uff09\uff0c\u4ee5\u4e0b\u662fSipDemo\u4e2d\u5b9e\u73b0BroadcastReceiver\u5b50\u7c7b\u7684\u4ee3\u7801\u3002\u5982\u679c\u60f3\u67e5\u770b\u5b8c\u6574\u7684\u4f8b\u5b50\uff0c\u4f60\u53ef\u4ee5\u53bbSipDemo Sample\u9879\u76ee\uff0c\u8fd9\u4e2a\u9879\u76ee\u5728SDK\u7684samples\u6587\u4ef6\u5939\u4e2d\u3002\u5173\u4e8e\u4e0b\u8f7d\u548c\u5b89\u88c5SDK samples\uff0c\u8bf7\u53c2\u8003 Getting the Samples\u3002\n<\/p>\n<pre class=\"java\">&#160;\n <span style=\"color: #808080; font-style: italic;\">\/*** Listens for incoming SIP calls, intercepts and hands them off to WalkieTalkieActivity.\n  *\/<\/span>\n <span style=\"color: #000000; font-weight: bold;\">public<\/span> <span style=\"color: #000000; font-weight: bold;\">class<\/span> IncomingCallReceiver <span style=\"color: #000000; font-weight: bold;\">extends<\/span> BroadcastReceiver <span style=\"color: #66cc66;\">&#123;<\/span>\n     <span style=\"color: #808080; font-style: italic;\">\/**\n      * Processes the incoming call, answers it, and hands it over to the\n      * WalkieTalkieActivity.\n      * @param context The context under which the receiver is running.\n      * @param intent The intent being received.\n      *\/<\/span> \n     @Override\n     <span style=\"color: #000000; font-weight: bold;\">public<\/span> <span style=\"color: #993333;\">void<\/span> onReceive<span style=\"color: #66cc66;\">&#40;<\/span><a href=\"http:\/\/www.google.com\/search?hl=en&amp;q=allinurl%3AContext+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span style=\"color: #aaaadd; font-weight: bold;\">Context<\/span><\/a> context, Intent intent<span style=\"color: #66cc66;\">&#41;<\/span> <span style=\"color: #66cc66;\">&#123;<\/span>\n         SipAudioCall incomingCall = <span style=\"color: #000000; font-weight: bold;\">null<\/span>;\n         <span style=\"color: #000000; font-weight: bold;\">try<\/span> <span style=\"color: #66cc66;\">&#123;<\/span>\n             SipAudioCall.<span style=\"color: #006600;\">Listener<\/span> listener = <span style=\"color: #000000; font-weight: bold;\">new<\/span> SipAudioCall.<span style=\"color: #006600;\">Listener<\/span><span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #66cc66;\">&#41;<\/span> <span style=\"color: #66cc66;\">&#123;<\/span>\n                 @Override\n                 <span style=\"color: #000000; font-weight: bold;\">public<\/span> <span style=\"color: #993333;\">void<\/span> onRinging<span style=\"color: #66cc66;\">&#40;<\/span>SipAudioCall call, SipProfile caller<span style=\"color: #66cc66;\">&#41;<\/span> <span style=\"color: #66cc66;\">&#123;<\/span>\n                     <span style=\"color: #000000; font-weight: bold;\">try<\/span> <span style=\"color: #66cc66;\">&#123;<\/span>\n                         call.<span style=\"color: #006600;\">answerCall<\/span><span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #cc66cc;\">30<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n                     <span style=\"color: #66cc66;\">&#125;<\/span> <span style=\"color: #000000; font-weight: bold;\">catch<\/span> <span style=\"color: #66cc66;\">&#40;<\/span><a href=\"http:\/\/www.google.com\/search?hl=en&amp;q=allinurl%3AException+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span style=\"color: #aaaadd; font-weight: bold;\">Exception<\/span><\/a> e<span style=\"color: #66cc66;\">&#41;<\/span> <span style=\"color: #66cc66;\">&#123;<\/span>\n                         e.<span style=\"color: #006600;\">printStackTrace<\/span><span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n                     <span style=\"color: #66cc66;\">&#125;<\/span>\n                 <span style=\"color: #66cc66;\">&#125;<\/span>\n             <span style=\"color: #66cc66;\">&#125;<\/span>;\n             WalkieTalkieActivity wtActivity = <span style=\"color: #66cc66;\">&#40;<\/span>WalkieTalkieActivity<span style=\"color: #66cc66;\">&#41;<\/span> context;\n             incomingCall = wtActivity.<span style=\"color: #006600;\">mSipManager<\/span>.<span style=\"color: #006600;\">takeAudioCall<\/span><span style=\"color: #66cc66;\">&#40;<\/span>intent, listener<span style=\"color: #66cc66;\">&#41;<\/span>;\n             incomingCall.<span style=\"color: #006600;\">answerCall<\/span><span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #cc66cc;\">30<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n             incomingCall.<span style=\"color: #006600;\">startAudio<\/span><span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n             incomingCall.<span style=\"color: #006600;\">setSpeakerMode<\/span><span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #000000; font-weight: bold;\">true<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n             <span style=\"color: #b1b100;\">if<\/span><span style=\"color: #66cc66;\">&#40;<\/span>incomingCall.<span style=\"color: #006600;\">isMuted<\/span><span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #66cc66;\">&#41;<\/span><span style=\"color: #66cc66;\">&#41;<\/span> <span style=\"color: #66cc66;\">&#123;<\/span>\n                 incomingCall.<span style=\"color: #006600;\">toggleMute<\/span><span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n             <span style=\"color: #66cc66;\">&#125;<\/span>\n             wtActivity.<span style=\"color: #006600;\">call<\/span> = incomingCall;\n             wtActivity.<span style=\"color: #006600;\">updateStatus<\/span><span style=\"color: #66cc66;\">&#40;<\/span>incomingCall<span style=\"color: #66cc66;\">&#41;<\/span>;\n         <span style=\"color: #66cc66;\">&#125;<\/span> <span style=\"color: #000000; font-weight: bold;\">catch<\/span> <span style=\"color: #66cc66;\">&#40;<\/span><a href=\"http:\/\/www.google.com\/search?hl=en&amp;q=allinurl%3AException+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span style=\"color: #aaaadd; font-weight: bold;\">Exception<\/span><\/a> e<span style=\"color: #66cc66;\">&#41;<\/span> <span style=\"color: #66cc66;\">&#123;<\/span>\n             <span style=\"color: #b1b100;\">if<\/span> <span style=\"color: #66cc66;\">&#40;<\/span>incomingCall&#160;!= <span style=\"color: #000000; font-weight: bold;\">null<\/span><span style=\"color: #66cc66;\">&#41;<\/span> <span style=\"color: #66cc66;\">&#123;<\/span>\n                 incomingCall.<span style=\"color: #006600;\">close<\/span><span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n             <span style=\"color: #66cc66;\">&#125;<\/span>\n         <span style=\"color: #66cc66;\">&#125;<\/span>\n     <span style=\"color: #66cc66;\">&#125;<\/span>\n <span style=\"color: #66cc66;\">&#125;<\/span>\n&#160;<\/pre>\n<h4> <span class=\"mw-headline\" id=\".E5.88.9B.E5.BB.BA.E4.B8.80.E4.B8.AA.E7.94.A8.E6.9D.A5.E6.8E.A5.E6.94.B6.E5.91.BC.E5.8F.AB.E7.9A.84intent.E8.BF.87.E6.BB.A4.E5.99.A8\"> <b>\u521b\u5efa\u4e00\u4e2a\u7528\u6765\u63a5\u6536\u547c\u53eb\u7684intent\u8fc7\u6ee4\u5668<\/b> <\/span><\/h4>\n<p>\u5f53SIP\u670d\u52a1\u63a5\u6536\u5230\u4e00\u4e2a\u65b0\u7684\u547c\u53eb\u7684\u65f6\u5019\uff0c\u4ed6\u4f1a\u53d1\u9001\u4e00\u4e2aintent\uff0c\u8fd9\u4e2aintent\u4f1a\u9644\u5e26\u4e00\u4e2a\u7531\u5e94\u7528\u7a0b\u5e8f\u63d0\u4f9b\u7684action\u3002\u5728SipDemo\u9879\u76ee\u4e2d\uff0c\u8fd9\u4e2aaction\u662fandroid.SipDemo.INCOMING_CALL\u3002\n<\/p><p>\u4ee5\u4e0b\u4eceSipDemo\u4e2d\u6458\u5f55\u7684\u4ee3\u7801\u5c55\u793a\u4e86\u5982\u4f55\u901a\u8fc7\u6302\u8d77\u4e00\u4e2a\u57fa\u4e8eandroid.SipDemo.INCOMING_CALL action\u7684intent\u6765\u521b\u5efaSipProfile\u5bf9\u8c61\u7684\u3002PendingIntent\u5bf9\u8c61\u5c06\u6267\u884c\u4e00\u4e2a\u5e7f\u64ad\u5f53SipProfile\u63a5\u6536\u5230\u4e00\u4e2a\u547c\u53eb\u7684\u65f6\u5019\uff1a\n<\/p>\n<pre class=\"java\">&#160;\n <span style=\"color: #000000; font-weight: bold;\">public<\/span> SipManager mSipManager = <span style=\"color: #000000; font-weight: bold;\">null<\/span>;\n <span style=\"color: #000000; font-weight: bold;\">public<\/span> SipProfile mSipProfile = <span style=\"color: #000000; font-weight: bold;\">null<\/span>;\n ...\n&#160;\n <span style=\"color: #006600;\">Intent<\/span> intent = <span style=\"color: #000000; font-weight: bold;\">new<\/span> Intent<span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #66cc66;\">&#41;<\/span>; \n intent.<span style=\"color: #006600;\">setAction<\/span><span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #ff0000;\">&quot;android.SipDemo.INCOMING_CALL&quot;<\/span><span style=\"color: #66cc66;\">&#41;<\/span>; \n PendingIntent pendingIntent = PendingIntent.<span style=\"color: #006600;\">getBroadcast<\/span><span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #000000; font-weight: bold;\">this<\/span>, <span style=\"color: #cc66cc;\">0<\/span>, intent, Intent.<span style=\"color: #006600;\">FILL_IN_DATA<\/span><span style=\"color: #66cc66;\">&#41;<\/span>; \n mSipManager.<span style=\"color: #006600;\">open<\/span><span style=\"color: #66cc66;\">&#40;<\/span>mSipProfile, pendingIntent, <span style=\"color: #000000; font-weight: bold;\">null<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n&#160;<\/pre>\n<p>\u4e0a\u9762\u88ab\u6267\u884c\u7684\u5e7f\u64ad\u5982\u679c\u88abintent\u8fc7\u6ee4\u5668\u62e6\u622a\u7684\u8bdd\uff0c\u8fd9\u4e2aintent\u8fc7\u6ee4\u5668\u5c06\u4f1a\u542f\u52a8\u58f0\u660e\u8fc7\u7684Receiver\uff08IncomingCallReceiver\uff09\u3002\u4f60\u53ef\u4ee5\u5728\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u91cc\u7684manifest\u6587\u4ef6\u4e2d\u6307\u5b9a\u4e00\u4e2aintent\u8fc7\u6ee4\u5668\uff0c\u6216\u8005\u901a\u8fc7\u4ee3\u7801\u6765\u6307\u5b9a\u4e00\u4e2aintent\u8fc7\u6ee4\u5668\uff0c\u5c31\u50cfSipDemo\u9879\u76ee\u4e2dActivity\u4e2d\u7684onCreate\uff08\uff09\u65b9\u6cd5\u4e00\u6837\uff1a\n<\/p>\n<pre class=\"java\">&#160;\n <span style=\"color: #000000; font-weight: bold;\">public<\/span> <span style=\"color: #000000; font-weight: bold;\">class<\/span> WalkieTalkieActivity <span style=\"color: #000000; font-weight: bold;\">extends<\/span> Activity <span style=\"color: #000000; font-weight: bold;\">implements<\/span> <a href=\"http:\/\/www.google.com\/search?hl=en&amp;q=allinurl%3AView+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span style=\"color: #aaaadd; font-weight: bold;\">View<\/span><\/a>.<span style=\"color: #006600;\">OnTouchListener<\/span> <span style=\"color: #66cc66;\">&#123;<\/span>\n ...\n     <span style=\"color: #000000; font-weight: bold;\">public<\/span> IncomingCallReceiver callReceiver;\n     ...\n&#160;\n     @Override\n     <span style=\"color: #000000; font-weight: bold;\">public<\/span> <span style=\"color: #993333;\">void<\/span> onCreate<span style=\"color: #66cc66;\">&#40;<\/span>Bundle savedInstanceState<span style=\"color: #66cc66;\">&#41;<\/span> <span style=\"color: #66cc66;\">&#123;<\/span>\n&#160;\n        IntentFilter filter = <span style=\"color: #000000; font-weight: bold;\">new<\/span> IntentFilter<span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n        filter.<span style=\"color: #006600;\">addAction<\/span><span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #ff0000;\">&quot;android.SipDemo.INCOMING_CALL&quot;<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n        callReceiver = <span style=\"color: #000000; font-weight: bold;\">new<\/span> IncomingCallReceiver<span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n        <span style=\"color: #000000; font-weight: bold;\">this<\/span>.<span style=\"color: #006600;\">registerReceiver<\/span><span style=\"color: #66cc66;\">&#40;<\/span>callReceiver, filter<span style=\"color: #66cc66;\">&#41;<\/span>;\n        ...\n     <span style=\"color: #66cc66;\">&#125;<\/span>\n     ...\n <span style=\"color: #66cc66;\">&#125;<\/span>\n&#160;<\/pre>\n<h2> <span class=\"mw-headline\" id=\".E6.B5.8B.E8.AF.95SIP.E5.BA.94.E7.94.A8.E7.A8.8B.E5.BA.8F\"> <b>\u6d4b\u8bd5SIP\u5e94\u7528\u7a0b\u5e8f<\/b> <\/span><\/h2>\n<p>\u8981\u6d4b\u8bd5SIP\u5e94\u7528\u7a0b\u5e8f\u7684\u8bdd\uff0c\u4f60\u9700\u8981\u4ee5\u4e0b\u6761\u4ef6\uff1a\n<\/p>\n<ul><li>\u4e00\u4e2a\u8fd0\u884cAndroid2.3\u6216\u8005\u66f4\u9ad8\u7248\u672c\u7684\u79fb\u52a8\u8bbe\u5907\u3002SIP\u901a\u8fc7\u65e0\u7ebf\u6765\u8fd0\u884c\uff0c\u6240\u4ee5\u4f60\u5fc5\u987b\u5728\u4e00\u4e2a\u771f\u6b63\u7684\u8bbe\u5907\u4e0a\u6d4b\u8bd5\uff0c\u5728AVD\u4e0a\u662f\u6d4b\u8bd5\u662f\u884c\u4e0d\u901a\u7684\n<\/li><li>\u4e00\u4e2aSIP\u8d26\u6237\uff0c\u6709\u5f88\u591a\u4e0d\u540c\u7684\u63d0\u4f9bSIP\u8d26\u6237\u7684SIP\u670d\u52a1\u63d0\u4f9b\u5546\u3002\n<\/li><li>\u5982\u679c\u4f60\u8981\u6253\u7535\u8bdd\uff0c\u8fd9\u4e2a\u7535\u8bdd\u5fc5\u987b\u662f\u6709\u6548\u7684SIP\u8d26\u6237\u3002\n<\/li><\/ul>\n<p>\u6d4b\u8bd5\u4e00\u4e2aSIP\u5e94\u7528\u7a0b\u5e8f\u7684\u6b65\u9aa4\uff1a\n<\/p>\n<ul><li>\u8ba9\u4f60\u7684\u8bbe\u5907\u8fde\u63a5\u5230\u65e0\u7ebf\uff08\u8bbe\u7f6e&gt;\u65e0\u7ebf&amp;\u7f51\u7edc&gt;Wi-Fi&gt;Wi-Fi\u8bbe\u7f6e\uff09\n<\/li><li>\u8bbe\u7f6e\u4f60\u7684\u79fb\u52a8\u8bbe\u5907\u8fdb\u884c\u6d4b\u8bd5\uff0c\u5c31\u50cf\u5728Developing on a Device\u91cc\u63cf\u8ff0\u7684\u4e00\u6837\n<\/li><li>\u5728\u4f60\u7684\u79fb\u52a8\u8bbe\u5907\u4e0a\u8fd0\u884c\u7a0b\u5e8f\uff0c\u5c31\u50cf\u5728Developing on a Device\u91cc\u63cf\u8ff0\u7684\u4e00\u6837\n<\/li><li>\u5982\u679c\u4f60\u6b63\u5728\u4f7f\u7528Eclipse\uff0c\u4f60\u53ef\u4ee5\u5728Eclipse\u4e2d\u67e5\u770b\u5e94\u7528\u7a0b\u5e8f\u7684\u65e5\u5fd7\u8f93\u51fa\uff08<b>Window &gt; Show View &gt; Other &gt; Android &gt; LogCat<\/b>\uff09\u3002\n<\/li><\/ul>"}