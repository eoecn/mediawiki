{"title":"Licensing Reference","text":"<p>\u8d1f\u8d23\u4eba\uff1asfshine \n<\/p><p>\u539f\u6587\u94fe\u63a5\uff1a<a rel=\"nofollow\" target=\"_blank\" class=\"external free\" href=\"http:\/\/docs.eoeandroid.com\/guide\/google\/play\/licensing\/licensing-reference.html\">http:\/\/docs.eoeandroid.com\/guide\/google\/play\/licensing\/licensing-reference.html<\/a>\n<\/p><p><br \/>\n<\/p>\n<table id=\"toc\" class=\"toc\"><tr><td><div id=\"toctitle\"><h2>\u76ee\u5f55<\/h2><\/div>\n<ul>\n<li class=\"toclevel-1 tocsection-1\"><a href=\"#Licensing_Reference-.E8.AE.B8.E5.8F.AF.E5.8F.82.E8.80.83\"><span class=\"tocnumber\">1<\/span> <span class=\"toctext\">Licensing Reference-\u8bb8\u53ef\u53c2\u8003<\/span><\/a>\n<ul>\n<li class=\"toclevel-2 tocsection-2\"><a href=\"#LVL_Classes_and_Interfaces-LVL.E7.B1.BB.E5.92.8C.E6.8E.A5.E5.8F.A3\"><span class=\"tocnumber\">1.1<\/span> <span class=\"toctext\">LVL Classes and Interfaces-LVL\u7c7b\u548c\u63a5\u53e3<\/span><\/a><\/li>\n<li class=\"toclevel-2 tocsection-3\"><a href=\"#Server_Response_Codes-.E6.9C.8D.E5.8A.A1.E5.99.A8.E8.BF.94.E5.9B.9E.E7.A0.81\"><span class=\"tocnumber\">1.2<\/span> <span class=\"toctext\">Server Response Codes-\u670d\u52a1\u5668\u8fd4\u56de\u7801<\/span><\/a><\/li>\n<li class=\"toclevel-2 tocsection-4\"><a href=\"#Server_Response_Extras-.E6.9C.8D.E5.8A.A1.E5.99.A8.E8.BF.94.E5.9B.9E.E5.80.BC\"><span class=\"tocnumber\">1.3<\/span> <span class=\"toctext\">Server Response Extras-\u670d\u52a1\u5668\u8fd4\u56de\u503c<\/span><\/a>\n<ul>\n<li class=\"toclevel-3 tocsection-5\"><a href=\"#License_validity_period-.E8.AE.B8.E5.8F.AF.E6.9C.89.E6.95.88.E9.98.B6.E6.AE.B5\"><span class=\"tocnumber\">1.3.1<\/span> <span class=\"toctext\">License validity period-\u8bb8\u53ef\u6709\u6548\u9636\u6bb5<\/span><\/a><\/li>\n<li class=\"toclevel-3 tocsection-6\"><a href=\"#Retry_period_and_maximum_retry_count-.E8.AF.95.E7.94.A8.E6.97.B6.E9.97.B4.E5.92.8C.E6.9C.80.E5.A4.A7.E4.BD.BF.E7.94.A8.E6.AC.A1.E6.95.B0\"><span class=\"tocnumber\">1.3.2<\/span> <span class=\"toctext\">Retry period and maximum retry count-\u8bd5\u7528\u65f6\u95f4\u548c\u6700\u5927\u4f7f\u7528\u6b21\u6570<\/span><\/a><\/li>\n<\/ul>\n<\/li>\n<\/ul>\n<\/li>\n<\/ul>\n<\/td><\/tr><\/table>\n<h1> <span class=\"mw-headline\" id=\"Licensing_Reference-.E8.AE.B8.E5.8F.AF.E5.8F.82.E8.80.83\">Licensing Reference-\u8bb8\u53ef\u53c2\u8003<\/span><\/h1>\n<h2> <span class=\"mw-headline\" id=\"LVL_Classes_and_Interfaces-LVL.E7.B1.BB.E5.92.8C.E6.8E.A5.E5.8F.A3\">LVL Classes and Interfaces-LVL\u7c7b\u548c\u63a5\u53e3<\/span><\/h2>\n<p>Table 1 lists all of the source files in the License Verification Library (LVL) available through the Android SDK. All of the files are part of the  com.android.vending.licensing package.\n<\/p><p>\u8868\u4e00\u5217\u51fa\u4e86\u901a\u8fc7AndroidSDK\u53ef\u4ee5\u83b7\u5f97\u7684\u8bb8\u53ef\u8ba4\u8bc1\u5e93(LVL)\u7684\u6e90\u4ee3\u7801\u6587\u4ef6\u3002\u8fd9\u4e9b\u6587\u4ef6\u90fd\u662fcom.android.vending.licensing\u8fd9\u5305\u7684\u4e00\u90e8\u5206\u3002\nTable 1. Summary of LVL library classes and interfaces.\n<\/p><p>\u8868\u4e00\uff1aLVL\u5e93\u7684\u7c7b\u6587\u4ef6\u548c\u63a5\u53e3\n<\/p>\n<table style=\"border-spacing: 0px;margin: 4px 4px; width: 90%; border-left:1px solid #ccc;border-top:1px solid #ccc;\">\n\n\n<tr style=\"background:#DEE8F1;\">\n<th style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px\"> Category\u76ee\u5f55\n<\/th>\n<th style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px\"> Name\u540d\u5b57\n<\/th>\n<th style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px\"> Description\u63cf\u8ff0\n<\/th><\/tr>\n<tr style=\"vertical-align:top;\">\n<td style=\"border-right:1px solid #ccc;border-bottom:0px solid #ccc; padding:5px 15px;\">\n<p>License check and result\u8bb8\u53ef\u67e5\u770b\u548c\u7ed3\u679c\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>LicenseChecker\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>Class that you instantiate (or subclass) to initiate a license check.\u4e00\u4e2a\u60a8\u5b9e\u4f8b\u5316\u6216\u8005\u5b50\u7c7b\u8bdd\u7684\u7c7b,\u8fd9\u4e2a\u7c7b\u7528\u6765\u5f00\u59cb\u4e00\u4e2a\u8bb8\u53ef\u68c0\u67e5\u3002\n<\/p>\n<\/td><\/tr>\n<tr style=\"vertical-align:top;\">\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>LicenseCheckerCallback\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>Interface that you implement to handle result of the license check.\u60a8\u53ef\u4ee5\u901a\u8fc7\u5b9e\u73b0\u8fd9\u4e2a\u63a5\u53e3\u6765\u5904\u7406\u8bb8\u53ef\u68c0\u67e5\u7684\u7ed3\u679c\u3002\n<\/p>\n<\/td><\/tr>\n<tr style=\"vertical-align:top;\">\n<td style=\"border-right:1px solid #ccc;border-bottom:0px solid #ccc; padding:5px 15px;\">\n<p>Policy\u7b56\u7565\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>Policy\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>Interface that you implement to determine whether to allow access to the application, based on the license response.\u901a\u8fc7\u5b9e\u73b0\u8fd9\u4e2a\u63a5\u53e3\u60a8\u53ef\u4ee5\u51b3\u5b9a\u662f\u5426\u5141\u8bb8\u901a\u8fc7\u8bb8\u53ef\u53cd\u9988\u6765\u8bbf\u95ee\u5e94\u7528\n<\/p>\n<\/td><\/tr>\n<tr style=\"vertical-align:top;\">\n<td style=\"border-right:1px solid #ccc;border-bottom:0px solid #ccc; padding:5px 15px;\">\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>ServerManagedPolicy\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>Default Policy implementation. Uses settings provided by the licensing server to manage local storage of license data, license validity, retry.\u9ed8\u8ba4\u7684Policy\u63a5\u53e3\u3002\u4f7f\u7528\u8bb8\u53ef\u670d\u52a1\u5668\u63d0\u4f9b\u7684\u8bbe\u7f6e\u6765\u7ba1\u7406\u672c\u5730\u7684\u5b58\u50a8\u6570\u636e\uff0c\u8bb8\u53ef\u5408\u6cd5\u6027\u548c\u5c1d\u8bd5\u3002\n<\/p>\n<\/td><\/tr>\n<tr style=\"vertical-align:top;\">\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>StrictPolicy\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>Alternative Policy implementation. Enforces licensing based on a direct license response from the server only. No caching or request retry.\u672c\u5730Policy\u63a5\u53e3\u3002\u5f3a\u5236\u8bb8\u53ef\u57fa\u4e8e\u6765\u81ea\u670d\u52a1\u5668\u7684\u76f4\u63a5\u7684\u8bb8\u53ef\u54cd\u5e94\u3002\u4e0d\u7f13\u5b58\u4e5f\u4e0d\u8bf7\u6c42\u91cd\u8bd5\u3002\n<\/p>\n<\/td><\/tr>\n<tr style=\"vertical-align:top;\">\n<td style=\"border-right:1px solid #ccc;border-bottom:0px solid #ccc; padding:5px 15px;\">\n<p>Data obfuscation(optional)\t\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>Obfuscator\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>Interface that you implement if you are using a Policy (such as ServerManagedPolicy) that caches license response data in a persistent store. Applies an obfuscation algorithm to encode and decode data being written or read.\n\u5982\u679c\u60a8\u4f7f\u7528Policy\uff08\u6bd4ServerManagedPolicy\uff09\uff0c\u60a8\u5c06\u7ee7\u627f\u8fd9\u4e2a\u63a5\u53e3\u3002\u8fd9\u4e2a\u63a5\u53e3\u628a\u8bb8\u53ef\u54cd\u5e94\u6570\u636e\u7f13\u5b58\u5728\u4e00\u4e2a\u6301\u4e45\u5b58\u50a8\u533a\u91cc\u3002\u5728\u88ab\u8bfb\u5199\u7684\u65f6\u5019\uff0c\u5b83\u4f7f\u7528\u6a21\u7cca\u7b97\u6cd5\u6765\u7f16\u7801\u548c\u89e3\u7801\u3002\n<\/p>\n<\/td><\/tr>\n<tr style=\"vertical-align:top;\">\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>AESObfuscator\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>Default Obfuscator implementation that uses AES encryption\/decryption algorithm to obfuscate\/unobfuscate data.\u4f7f\u7528AES\u52a0\u5bc6\/\u89e3\u5bc6\u7b97\u6cd5\u6765\u6df7\u6dc6\/\u53cd\u6df7\u6dc6\u6570\u636e\u7684\u9ed8\u8ba4\u7b97\u6cd5\u63a5\u53e3\u3002\n<\/p>\n<\/td><\/tr>\n<tr style=\"vertical-align:top;\">\n<td style=\"border-right:1px solid #ccc;border-bottom:0px solid #ccc; padding:5px 15px;\">\n<p>Device limitation(optional)\t\t\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>DeviceLimiter\t\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>Interface that you implement if you want to restrict use of an application to a specific device. \n\u5b9e\u73b0\u8fd9\u4e2a\u63a5\u53e3\uff0c\u60a8\u53ef\u4ee5\u9650\u5236\u5e94\u7528\u5728\u7279\u5b9a\u8bbe\u5907\u4e0a\u7684\u4f7f\u7528\u3002Called from LicenseValidator. \u8c03\u7528\u6765\u81eaLicenseValidator\u3002 \nImplementing DeviceLimiter is not recommended for most applications because it requires a backend server and may cause the user to lose access to licensed applications, unless designed with care.\n\u5bf9\u4e8e\u5927\u591a\u6570\u5e94\u7528\uff0c\u6211\u4eec\u4e0d\u63a8\u8350\u7ee7\u627fDeviceLimiter\u63a5\u53e3\uff0c\u5b83\u4ed6\u9700\u8981\u4e00\u4e2a\u540e\u53f0\u670d\u52a1\u5668\u5e76\u4e14\u5b83\u53ef\u80fd\u5bfc\u81f4\u7528\u6237\u548c\u8bb8\u53ef\u7684\u5e94\u7528\u5931\u53bb\u8054\u7cfb\uff0c\u9664\u975e\u5728\u8bbe\u8ba1\u7684\u65f6\u5019\u8ba4\u771f\u7684\u8003\u8651\u4e86\u3002\n<\/p><p><br \/>\n<\/p>\n<\/td><\/tr>\n<tr style=\"vertical-align:top;\">\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>NullDeviceLimiter\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>Default DeviceLimiter implementation that is a no-op (allows access to all devices).\u9ed8\u8ba4\u7684DeviceLimiter\u63a5\u53e3\uff0c\u8fd9\u4e2a\u63a5\u53e3\u5141\u8bb8\u8bbf\u95ee\u4efb\u4f55\u8bbe\u5907\u3002\n<\/p>\n<\/td><\/tr>\n<tr style=\"vertical-align:top;\">\n<td style=\"border-right:1px solid #ccc;border-bottom:0px solid #ccc; padding:5px 15px;\">\n<p>Library core, no integration needed\t\t\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>ResponseData\t\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>Class that holds the fields of a license response.\u8fd9\u4e2a\u7c7b\u63a7\u5236\u4e00\u4e2a\u8bb8\u53ef\u54cd\u5e94\u7684\u533a\u57df\n<\/p>\n<\/td><\/tr>\n<tr style=\"vertical-align:top;\">\n<td style=\"border-right:1px solid #ccc;border-bottom:0px solid #ccc; padding:5px 15px;\">\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>LicenseValidator\t\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>Class that decrypts and verifies a response received from the licensing server.\u8fd9\u4e2a\u7c7b\u7528\u6765\u89e3\u5bc6\u5e76\u9a8c\u8bc1\u4ece\u8bb8\u53ef\u670d\u52a1\u5668\u53d1\u6765\u7684\u54cd\u5e94\n<\/p>\n<\/td><\/tr>\n<tr style=\"vertical-align:top;\">\n<td style=\"border-right:1px solid #ccc;border-bottom:0px solid #ccc; padding:5px 15px;\">\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>ValidationException\t\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>Class that indicates errors that occur when validating the integrity of data managed by an Obfuscator.\u8fd9\u4e2a\u7c7b\u6307\u51fa\u5728\u9a8c\u8bc1Obfuscator\u7ba1\u7406\u7684\u6570\u636e\u7684\u5b8c\u6574\u6027\u65f6\u51fa\u73b0\u7684\u9519\u8bef\n<\/p>\n<\/td><\/tr>\n<tr style=\"vertical-align:top;\">\n<td style=\"border-right:1px solid #ccc;border-bottom:0px solid #ccc; padding:5px 15px;\">\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>PreferenceObfuscator\t\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>Utility class that writes\/reads obfuscated data to the system's SharedPreferences store.\u8fd9\u4e2a\u5de5\u5177\u7c7b\u7528\u4e8e\u8bfb\u5199\u6df7\u6dc6\u6570\u636e\u5b58\u50a8\u5230\u7cfb\u7edf\u7684Sharedpreferences\n<\/p>\n<\/td><\/tr>\n<tr style=\"vertical-align:top;\">\n<td style=\"border-right:1px solid #ccc;border-bottom:0px solid #ccc; padding:5px 15px;\">\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>ILicensingService\t\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>One-way IPC interface over which a license check request is passed to the Google Play client.\u5355\u5411\u7684\u8fdb\u7a0b\u95f4\u901a\u8baf\u63a5\u53e3\uff0c\u8fd9\u4e2a\u63a5\u53e3\u7684\u8bb8\u53ef\u68c0\u67e5\u8bf7\u6c42\u6765\u81eagoogle play\u5ba2\u6237\u7aef\n<\/p>\n<\/td><\/tr>\n<tr style=\"vertical-align:top;\">\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>ILicenseResultListener\t\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>One-way IPC callback implementation over which the application receives an asynchronous response from the licensing server.\u5355\u5411\u8fdb\u7a0b\u95f4\u901a\u8baf\u8c03\u7528\u7684\u5b9e\u73b0\uff0c\u8fd9\u4e2a\u5b9e\u73b0\u57fa\u4e8e\u5e94\u7528\u6536\u5230\u7684\u6765\u81ea\u8bb8\u53ef\u670d\u52a1\u5668\u7684\u5f02\u6b65\u54cd\u5e94\n<\/p>\n<\/td><\/tr><\/table>\n<p><br \/>\n<\/p>\n<h2> <span class=\"mw-headline\" id=\"Server_Response_Codes-.E6.9C.8D.E5.8A.A1.E5.99.A8.E8.BF.94.E5.9B.9E.E7.A0.81\">Server Response Codes-\u670d\u52a1\u5668\u8fd4\u56de\u7801<\/span><\/h2>\n<p>Table 2 lists all of the license response codes supported by the licensing server. In general, an application should handle all of these response codes. By default, the LicenseValidator class in the LVL provides all of the necessary handling of these response codes for you.\n<\/p><p>\u8868\u4e8c\u5217\u51fa\u4e86\u8bb8\u53ef\u670d\u52a1\u5668\u6240\u652f\u6301\u7684\u6240\u6709\u8bb8\u53ef\u8fd4\u56de\u7801. \u4e00\u822c\u7684,\u4e00\u4e2a\u5e94\u7528\u5e94\u8be5\u5904\u7406\u6240\u6709\u7684\u8fd9\u4e9b\u8fd4\u56de\u7801.\u9ed8\u8ba4\u7684, LVL\u4e2d\u7684LicenseValidator(\u8bb8\u53ef\u6821\u9a8c\u7801)\u7c7b\u63d0\u4f9b\u6240\u6709\u9700\u8981\u5904\u7406\u7684\u54cd\u5e94\u4ee3\u7801\n<\/p><p>Table 2. Summary of response codes returned by the Google Play server in a license response.\n<\/p><p>\u8868\u4e8c google play\u5546\u5e97\u670d\u52a1\u5668\u4ee5\u8bb8\u53ef\u54cd\u5e94\u7684\u5f62\u5f0f\u8fd4\u56de\u7684\u54cd\u5e94\u4ee3\u7801\n<\/p>\n<table style=\"border-spacing: 0px;margin: 4px 4px; width: 90%; border-left:1px solid #ccc;border-top:1px solid #ccc;\">\n\n\n<tr style=\"background:#DEE8F1;\">\n<th style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px\"> Response Code\u8fd4\u56de\u7801\n<\/th>\n<th style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px\"> Description\u63cf\u8ff0\n<\/th>\n<th style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px\"> Signed? \u662f\u5426\u7b7e\u540d?\n<\/th>\n<th style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px\"> Extras \u503c\n<\/th>\n<th style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px\"> Comments \u8bc4\u4ef7\n<\/th><\/tr>\n<tr style=\"vertical-align:top;\">\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>LICENSED\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>The application is licensed to the user. The user has purchased the application or the application only exists as a draft.\n\u8fd9\u4e2a\u5e94\u7528\u88ab\u6388\u6743\u7ed9\u8fd9\u4e2a\u7528\u6237,\u8fd9\u4e2a\u7528\u6237\u8d2d\u4e70\u4e86\u8fd9\u4e2a\u5e94\u7528,\u6216\u8005\u8fd9\u4e2a\u5e94\u7528\u4ec5\u4ec5\u662f\u4e00\u4e2a\u8349\u7a3f\u7248\u672c(\u5df2\u7ecf\u4e0a\u4f20,\u4f46\u662f\u6ca1\u6709\u53d1\u5e03).\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>Yes\u662f\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>VT, GT,GR\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>Allow access according to Policy constraints\u7ecf\u8fc7Policy\u9a8c\u8bc1\u540e\u8fd0\u884c\u4f7f\u7528\u5e94\u7528\n<\/p>\n<\/td><\/tr>\n<tr style=\"vertical-align:top;\">\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>LICENSED_OLD_KEY\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>The application is licensed to the user, but there is an updated application version available that is signed with a different key.\n\u8fd9\u4e2a\u5e94\u7528\u88ab\u6388\u6743\u7ed9\u8fd9\u4e2a\u7528\u6237,\u8fd9\u4e2a\u5e94\u7528\u6709\u5347\u7ea7\u7248,\u4f46\u662f\u5347\u7ea7\u7248\u7684\u7b7e\u540d\u548c\u5f53\u524d\u7684\u5e94\u7528\u4e0d\u540c\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>Yes\u662f\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>VT, GT,GR, UT\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>Optionally allow access according to Policyconstraints.\nCan indicate that the key pair used by the installed application version is invalid or compromised. The application can allow access if needed or inform the user that an upgrade is available and limit further use until upgrade.\n\u6709\u9009\u62e9\u6027\u7684\u5141\u8bb8\u4f7f\u7528\u5e94\u7528.\u53ef\u4ee5\u8868\u660e\u5df2\u5b89\u88c5\u7684\u5e94\u7528\u6240\u4f7f\u7528\u7684\u5bc6\u94a5\u4e0d\u5b58\u5728\u6216\u8005\u5df2\u7ecf\u88ab\u635f\u574f.\u5982\u679c\u9700\u8981\u5e94\u7528\u53ef\u4ee5\u88ab\u5141\u8bb8\u4f7f\u7528\u6216\u8005\u901a\u77e5\u7528\u6237\u9700\u8981\u8fdb\u884c\u5347\u7ea7\u624d\u80fd\u4f7f\u7528\n<\/p>\n<\/td><\/tr>\n<tr style=\"vertical-align:top;\">\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>NOT_LICENSED\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>The application is not licensed to the user.\n\u8fd9\u4e2a\u5e94\u7528\u6ca1\u6709\u6388\u6743\u7ed9\u8fd9\u4e2a\u7528\u6237\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>No\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>Do not allow access.\u4e0d\u5141\u8bb8\u4f7f\u7528\u8be5\u5e94\u7528\n<\/p>\n<\/td><\/tr>\n<tr style=\"vertical-align:top;\">\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>ERROR_CONTACTING_SERVER\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>The application is not licensed to the user.\nLocal error \u2014 the Google Play application was not able to reach the licensing server, possibly because of network availability problems.\n\u672c\u5730\u9519\u8bef\u2014google play \u5e94\u7528\u4e0d\u80fd\u8fde\u63a5\u5230\u8bb8\u53ef\u670d\u52a1\u5668,\u53ef\u80fd\u662f\u56e0\u4e3a\u7f51\u7edc\u8fde\u63a5\u95ee\u9898\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>No\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>according toPolicy retry limits.\u8bd5\u7528\u6b21\u6570\u53d6\u51b3\u4e8ePolicy\n<\/p>\n<\/td><\/tr>\n<tr style=\"vertical-align:top;\">\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>ERROR_SERVER_FAILURE\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>Server error \u2014 the server could not load the publisher account's key pair for licensing.\n\u670d\u52a1\u5668\u9519\u8bef\u2014\u670d\u52a1\u5668\u4e0d\u80fd\u83b7\u53d6\u53d1\u5e03\u8005\u7684\u5bc6\u94a5\u6765\u8fdb\u884c\u8bb8\u53ef\u64cd\u4f5c\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>No\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>Retry the license check according toPolicy retry limits.\u6839\u636ePolicy\u7684\u4f7f\u7528\u6b21\u6570\u91cd\u65b0\u8fdb\u884c\u8bb8\u53ef\u68c0\u67e5\n<\/p>\n<\/td><\/tr>\n<tr style=\"vertical-align:top;\">\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>ERROR_INVALID_PACKAGE_NAME\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>Local error \u2014 the application requested a license check for a package that is not installed on the device.\n\u672c\u5730\u9519\u8bef,\u8fd9\u4e2a\u5e94\u7528\u9700\u8981\u4e00\u4e2a\u8bb8\u53ef\u8bc1\u6765\u5bf9\u5305\u8fdb\u884c\u8bb8\u53ef\u68c0\u67e5,\u4f46\u662f\u8fd9\u4e2a\u8bb8\u53ef\u8bc1\u6ca1\u6709\u5b89\u88c5\u5728\u8bbe\u5907\u4e0a\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>No\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>Retry the license check according toPolicy retry limits.\u6839\u636ePolicy\u7684\u4f7f\u7528\u6b21\u6570\u91cd\u65b0\u8fdb\u884c\u8bb8\u53ef\u68c0\u67e5\nDo not retry the license check.Typically caused by a development error.\u4e0d\u8981\u8fdb\u884c\u8bb8\u53ef\u575a\u6301,\u4e00\u822c\u662f\u7531\u4e8e\u5e94\u7528\u5f00\u53d1\u9519\u8bef.\t\t\t\t\n<\/p>\n<\/td><\/tr>\n<tr style=\"vertical-align:top;\">\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>ERROR_NON_MATCHING_UID\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>Local error \u2014 the application requested a license check for a package whose UID (package, user ID pair) does not match that of the requesting application.\n\u672c\u5730\u9519\u8bef---\u8fd9\u4e2a\u5e94\u7528\u9700\u8981\u4e00\u4e2a\u8bb8\u53ef\u8bc1\u6765\u5bf9\u5b89\u88c5\u5305\u8fdb\u884c\u68c0\u67e5,\u4f46\u662f\u8fd9\u4e2a\u8bb8\u53ef\u8bc1\u7684UID(\u5305,\u7528\u6237ID)\u548c\u5f53\u524d\u7684\u8bf7\u6c42\u5e94\u7528\u4e0d\u76f8\u543b\u5408.\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>No\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>Do not retry the license check.Typically caused by a development error.\t\u4e0d\u8981\u8fdb\u884c\u8bb8\u53ef\u68c0\u67e5,\u4e00\u822c\u662f\u7531\u4e8e\u5e94\u7528\u5f00\u53d1\u9519\u8bef\n<\/p>\n<\/td><\/tr>\n<tr style=\"vertical-align:top;\">\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>ERROR_NOT_MARKET_MANAGED\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>Server error \u2014 the application (package name) was not recognized by Google Play.\n\u670d\u52a1\u5668\u9519\u8bef \u5e94\u7528(\u5305\u540d)\u6ca1\u6709\u88abgoogle play\u8bc6\u522b.\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>No\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>Do not retry the license check.\nCan indicate that the application was not published through Google Play or that there is an development error in the licensing implementation.\n\u4e0d\u8981\u8fdb\u884c\u8bb8\u53ef\u68c0\u67e5,\u53ef\u4ee5\u8868\u660e\u5e94\u7528\u6ca1\u6709\u5728google play\u4e0a\u53d1\u5e03\u6216\u8005\u5728\u5f00\u53d1\u4e2d\u8bb8\u53ef\u5b9e\u73b0\u7684\u65f6\u5019\u5b58\u5728\u9519\u8bef\n<\/p>\n<\/td><\/tr><\/table>\n<p><br \/>\n<\/p>\n<div style=\"margin: 1em 0; padding: 10px; overflow: auto; background: #F7F7F7; border-left:4px solid; border-color:#258AAF;\">\t\n<p>Note: As documented in Setting Up The Testing Environment, the response code can be manually overridden for the application developer and any registered test users via the Google Play publisher site. \n<\/p><p>\u6ce8\u610f:\u5c31\u50cf\u5728\u8bbe\u7f6e\u6d4b\u8bd5\u73af\u5883\u4e00\u5f20\u63cf\u8ff0\u7684\u90a3\u6837,\u76f8\u5e94\u7801\u53ef\u4ee5\u624b\u52a8\u88abgoogle play\u7684\u6ce8\u518c\u5f00\u53d1\u8005\u6216\u8005\u6d4b\u8bd5\u8005\u91cd\u5199.\n<\/p><p>Additionally, as noted above, applications that are in draft mode (in other words, applications that have been uploaded but have never been published) will return LICENSED for all users, even if not listed as a test user. Since the application has never been offered for download, it is assumed that any users running it must have obtained it from an authorized channel for testing purposes.\n<\/p><p>\u9664\u6b64\u4e4b\u5916,\u5982\u4e0a\u6240\u8ff0,\u5728\u201d\u8349\u7a3f\u201d\u72b6\u6001\u7684\u5e94\u7528(\u8fd9\u4e2a\u5e94\u7528\u5df2\u7ecf\u4e0a\u4f20,\u4f46\u662f\u4ece\u672a\u53d1\u5e03)\u5c06\u4f1a\u8fd4\u56deLICENSED \u7ed9\u6240\u6709\u7684\u7528\u6237,\u5373\u4f7f\u8fd9\u4e9b\u7528\u6237\u4e0d\u662f\u5217\u51fa\u7684\u6d4b\u8bd5\u7528\u6237.\u7531\u4e8e\u8fd9\u4e2a\u5e94\u7528\u4ece\u6765\u6ca1\u6709\u63d0\u4f9b\u4e0b\u8f7d,\u6240\u4ee5\u8fd9\u4e2a\u5e94\u7528\u88ab\u89c6\u4e3a\u4ece\u4e00\u4e2a\u6388\u6743\u6e20\u9053\u62ff\u6765\u505a\u6d4b\u8bd5\u4e4b\u7528\u7684\n<\/p>\n<\/div>\n<h2> <span class=\"mw-headline\" id=\"Server_Response_Extras-.E6.9C.8D.E5.8A.A1.E5.99.A8.E8.BF.94.E5.9B.9E.E5.80.BC\">Server Response Extras-\u670d\u52a1\u5668\u8fd4\u56de\u503c<\/span><\/h2>\n<p>To assist your application in managing access to the application across the application refund period and provide other information, The licensing server includes several pieces of information in the license responses. Specifically, the service provides recommended values for the application's license validity period, retry grace period, maximum allowable retry count, and other settings. If your application uses APK expansion files, the response also includes the file names, sizes, and URLs. The server appends the settings as key-value pairs in the license response \"extras\" field.\n\u4e3a\u4e86\u5e2e\u52a9\u60a8\u7684\u5e94\u7528\u7ba1\u7406\u7528\u6237\u5728\u9000\u6b3e\u671f\u95f4\u7684\u4f7f\u7528\u5e76\u63d0\u4f9b\u5176\u4ed6\u4fe1\u606f,\u8bb8\u53ef\u670d\u52a1\u5668\u5305\u542b\u4e86\u51e0\u7ec4\u8bb8\u53ef\u8fd4\u56de\u4fe1\u606f.\u5177\u4f53\u6765\u8bf4,\u670d\u52a1\u5668\u63d0\u4f9b\u5e94\u7528\u8bb8\u53ef\u8bc1\u6709\u6548\u671f\u671f\u95f4\u7684\u5efa\u8bae\u503c\uff0c\u91cd\u8bd5\u5bbd\u9650\u671f\uff0c\u5141\u8bb8\u7684\u6700\u5927\u91cd\u8bd5\u6b21\u6570\uff0c\u4ee5\u53ca\u5176\u4ed6\u8bbe\u7f6e\u3002\u5982\u679c\u60a8\u7684\u5e94\u7528\u4f7f\u7528\u4e86apk\u2019\u6269\u5145\u6587\u4ef6,\u90a3\u8fd4\u56de\u503c\u4e5f\u5305\u62ec\u6587\u4ef6\u540d,\u6587\u4ef6\u5927\u5c0f,URL\u7b49.\u670d\u52a1\u5668\u5728\u8bb8\u53ef\u54cd\u5e94\u7684\u201d\u989d\u5916\u201d\u9886\u57df\u4f5c\u4e3a\u952e\u503c\u5bf9\u8ffd\u52a0\u8bbe\u7f6e\u9879.\n<\/p><p>Any Policy implementation can extract the extras settings from the license response and use them as needed.\n<\/p><p>\u4efb\u4f55Policy\u7c7b\u7684\u7ee7\u627f\u53ef\u4ee5\u4ece\u8bb8\u53ef\u8fd4\u56de\u4fe1\u606f\u4e2d\u63d0\u53d6\u8bbe\u7f6e\u7684\u503c,\u5728\u9700\u8981\u7684\u65f6\u5019\u4f7f\u7528\u4ed6\u4eec.\n<\/p><p>The LVL default Policy implementation, ServerManagedPolicy, serves as a working implementation and an illustration of how to obtain, store, and use the settings.\n<\/p><p>LVL\u7684\u9ed8\u8ba4Policy\u7c7b\u9ed8\u8ba4\u7ee7\u627f ServerManagedPolicy,\u5b9e\u73b0\u529f\u80fd,\u8bf4\u660e\u600e\u4e48\u83b7\u53d6,\u5b58\u50a8,\u4f7f\u7528\u8fd9\u4e9b\u8bbe\u7f6e.\n<\/p><p>Table 3. Summary of license-management settings supplied by the Google Play server in a license response.\n<\/p><p>\u88683 google play\u670d\u52a1\u5668\u4ee5\u4e00\u4e2a\u8bb8\u53ef\u54cd\u5e94\u7684\u5f62\u5f0f\u63d0\u4f9b\u7684\u8bb8\u53ef\u7ba1\u7406\u8bbe\u7f6e\n<\/p>\n<table style=\"border-spacing: 0px;margin: 4px 4px; width: 90%; border-left:1px solid #ccc;border-top:1px solid #ccc;\">\n\n\n<tr style=\"background:#DEE8F1;\">\n<th style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px\"> Extra\n<\/th>\n<th style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px\"> Description\n<\/th><\/tr>\n<tr style=\"vertical-align:top;\">\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>VT\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>License validity timestamp. Specifies the date\/time at which the current (cached) license response expires and must be rechecked on the licensing server. See the section below about License validity period.\n\u8bb8\u53ef\u6709\u6548\u671f\u65f6\u95f4\u6233.\u6307\u5b9a\u4e86\u5f53\u524d(\u6216\u662f\u7f13\u5b58\u7684)\u8bb8\u53ef\u54cd\u5e94\u5df2\u7ecf\u8fc7\u671f,\u5fc5\u987b\u53bb\u8bb8\u53ef\u670d\u52a1\u5668\u4e0a\u590d\u67e5. \u6709\u5173\u8bb8\u53ef\u8bc1\u6709\u6548\u671f\uff0c\u8bf7\u53c2\u9605\u4e0b\u6587\n<\/p>\n<\/td><\/tr>\n<tr style=\"vertical-align:top;\">\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>GT\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>Grace period timestamp. Specifies the end of the period during which a Policy may allow access to the application, even though the response status is RETRY.\u5bbd\u9650\u671f\u7684\u65f6\u95f4\u6233.\u6307\u5b9a\u5728\u8bb8\u53ef\u54cd\u5e94\u4fe1\u53f7\u662fRETRY\u7684\u65f6\u5019\u5141\u8bb8\u5e94\u7528\u4f7f\u7528\u7684\u6700\u540e\u65e5\u671f.\nThe value is managed by the server, however a typical value would be 5 or more days. See the section below about Retry period and maximum retry count.\u8fd9\u4e2a\u503c\u662f\u7531\u670d\u52a1\u5668\u7ba1\u7406\u7684,\u4e00\u822c\u8fd9\u4e2a\u503c\u662f5\u5929\u6216\u8005\u66f4\u591a.\u53c2\u9605\u4e0b\u9762\u7684\u4f7f\u7528\u671f\u9650\u548c\u6700\u5927\u4f7f\u7528\u6b21\u6570\n<\/p>\n<\/td><\/tr>\n<tr style=\"vertical-align:top;\">\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>GR\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>Maximum retries count. Specifies how many consecutive RETRY license checks the Policyshould allow, before denying the user access to the application.\n<\/p><p>\u6700\u5927\u4f7f\u7528\u6b21\u6570,\u6307\u5b9a\u5728\u7981\u6b62\u7528\u6237\u4f7f\u7528\u5e94\u7528\u524d,Policy\u53ef\u4ee5\u5141\u8bb8\u591a\u5c11\u6b21\u8fde\u7eed\u7684RETRY\u8bb8\u53ef\u68c0\u67e5\u4fe1\u53f7.\n<\/p><p>The value is managed by the server, however a typical value would be \"10\" or higher. See the section below about Retry period and maximum retry count.\n<\/p><p>\u8fd9\u4e2a\u503c\u4e5f\u662f\u7531\u670d\u52a1\u5668\u7ba1\u7406,\u4e00\u822c\u662f\u201d10\u201d\u6216\u8005\u66f4\u5927,\u53c2\u9605\u4e0b\u9762\u7684\u4f7f\u7528\u671f\u9650\u548c\u6700\u5927\u4f7f\u7528\u6b21\u6570\n<\/p>\n<\/td><\/tr>\n<tr style=\"vertical-align:top;\">\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>UT\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>Update timestamp. Specifies the day\/time when the most recent update to this application was uploaded and published.\u66f4\u65b0\u65f6\u95f4\u6233.\u6307\u5b9a\u5e94\u7528\u65b0\u7248\u672c\u4e0a\u4f20\u6216\u53d1\u5e03\u7684\u65e5\u671f\u548c\u65f6\u95f4.\n<\/p><p>The server returns this extra only for LICENSED_OLD_KEYS responses, to allow the Policyto determine how much time has elapsed since an update was published with new licensing keys before denying the user access to the application.\u670d\u52a1\u5668\u53ea\u8fd4\u56deLICENSED_OLD_KEYS\u7684\u54cd\u5e94\u6765\u5141\u8bb8Policy\u51b3\u5b9a\u4e00\u4e2a\u542b\u6709\u65b0\u7684\u8bb8\u53ef\u4fe1\u606f\u7684\u66f4\u65b0\u7248\u672c\u53d1\u5e03\u540e\u8fd8\u6709\u591a\u5c11\u65f6\u95f4\u6765\u7981\u6b62\u7528\u6237\u4f7f\u7528\u65e7\u7248\u672c\n<\/p>\n<\/td><\/tr>\n<tr style=\"vertical-align:top;\">\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>FILE_URL1orFILE_URL2\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>The URL for an expansion file (1 is for the main file, 2 is the patch file). Use this to download the file over HTTP.\u6269\u5c55\u6587\u4ef6\u7684URL(1\u4ee3\u8868\u4e3b\u6587\u4ef6,2\u662f\u8865\u4e01\u6587\u4ef6).\u4f7f\u7528\u8fd9\u4e2aURL\u6765\u4eceHTTP\u4e0a\u4e0b\u8f7d\u6587\u4ef6.\n<\/p>\n<\/td><\/tr>\n<tr style=\"vertical-align:top;\">\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>FILE_NAME1orFILE_NAME2\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>The expansion file's name (1 is for the main file, 2 is the patch file). You must use this name when saving the file on the device.\n\u6269\u5c55\u6587\u4ef6\u7684\u540d\u5b57(1\u662f\u4e3b\u6587\u4ef6,2\u662f\u8865\u4e01\u6587\u4ef6).\u5728\u8bbe\u5907\u4e0a\u4fdd\u5b58\u8fd9\u4e2a\u6587\u4ef6\u65f6,\u60a8\u5fc5\u987b\u4f7f\u7528\u8fd9\u4e2a\u540d\u5b57\n<\/p>\n<\/td><\/tr>\n<tr style=\"vertical-align:top;\">\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>FILE_SIZE1orFILE_SIZE2\t\n<\/p>\n<\/td>\n<td style=\"border-right:1px solid #ccc;border-bottom:1px solid #ccc; padding:5px 15px;\">\n<p>The size of the file in bytes (1 is for the main file, 2 is the patch file). Use this to assist with downloading and to ensure that enough space is available on the device's shared storage location before downloading.\n\u6587\u4ef6\u7684\u5927\u5c0f,\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d(1\u662f\u4e3b\u6587\u4ef6,2\u662f\u8865\u4e01\u6587\u4ef6).\u4f7f\u7528\u4ed6\u6765\u8f85\u52a9\u4e0b\u8f7d\u5e76\u5728\u4e0b\u8f7d\u524d\u786e\u4fdd\u8bbe\u5907\u7684\u5b58\u50a8\u7a7a\u95f4\u8db3\u591f.\n<\/p>\n<\/td><\/tr><\/table>\n<p><br \/>\n<\/p>\n<h3> <span class=\"mw-headline\" id=\"License_validity_period-.E8.AE.B8.E5.8F.AF.E6.9C.89.E6.95.88.E9.98.B6.E6.AE.B5\">License validity period-\u8bb8\u53ef\u6709\u6548\u9636\u6bb5<\/span><\/h3>\n<p>The Google Play licensing server sets a license validity period for all downloaded applications. \n<\/p><p>Google play\u8bb8\u53ef\u670d\u52a1\u5668\u5bf9\u6240\u6709\u7684\u4e0b\u8f7d\u4e86\u7684\u5e94\u7528\u8bbe\u7f6e\u4e86\u4e00\u4e2a\u6709\u6548\u671f.\n<\/p><p>The period expresses the interval of time over which an application's license status should be considered as unchanging and cacheable by a licensing Policy in the application. \n<\/p><p>\u8fd9\u4e2a\u9636\u6bb5\u5728\u8868\u8ff0\u65f6,\u4e00\u4e2a\u5e94\u7528\u8bb8\u53ef\u72b6\u6001\u7684\u65f6\u95f4\u95f4\u9694\u5e94\u8be5\u4f5c\u4e3a\u6ca1\u6709\u5728\u53d8\u5316\u548c\u53ef\u4ee5\u901a\u8fc7\u5e94\u7528\u4e2d\u7684Policy\u8bb8\u53ef\u8bc1\u88ab\u7f13\u5b58\u6765\u8003\u8651.\n<\/p><p>The licensing server includes the validity period in its response to all license checks, appending an end-of-validity timestamp to the response as an extra under the key VT. \n<\/p><p>\u8bb8\u53ef\u670d\u52a1\u5668\u5728\u4ed6\u7684\u5bf9\u6240\u6709\u8bb8\u53ef\u68c0\u67e5\u54cd\u5e94\u4e2d\u5305\u542b\u4e86\u6709\u6548\u671f,\u8fd9\u4e2a\u64cd\u4f5c\u901a\u8fc7\u5728\u54cd\u5e94\u4e2d\u8ffd\u52a0\u6709\u6548\u671f\u7ed3\u675f\u65f6\u95f4\u6233\u4f5c\u4e3aVT\u952e\u4e0b\u989d\u5916\u7684\u6570\u503c\u6765\u5b9e\u73b0\u7684.\n<\/p><p>A Policy can extract the VT key value and use it to conditionally allow access to the application without rechecking the license, until the validity period expires.\n<\/p><p>\u4e00\u4e2aPolicy\u53ef\u4ee5\u628aVT\u7684\u952e\u63d0\u53d6\u51fa\u6765\u7136\u540e\u4f7f\u7528\u5b83\u6765\u5728\u4e0d\u91cd\u65b0\u68c0\u67e5\u8bb8\u53ef\u8bc1\u7684\u60c5\u51b5\u4e0b\u4f7f\u7528\u5e94\u7528,\u76f4\u5230\u6709\u6548\u65f6\u95f4\u7ed3\u675f.\n<\/p><p>The license validity signals to a licensing Policy when it must recheck the licensing status with the licensing server.\n<\/p><p>\u5f53\u4e00\u4e2a\u8bb8\u53ef\u8bc1\u5fc5\u987b\u4f7f\u7528\u8bb8\u53ef\u670d\u52a1\u5668\u91cd\u65b0\u68c0\u67e5\u8bb8\u53ef\u72b6\u6001\u7684\u65f6\u5019, \u8bb8\u53ef\u8bc1\u5411\u4e00\u4e2a\u8bb8\u53efPolicy\u53d1\u4e00\u4e2a\u6709\u6548\u6027\u4fe1\u53f7\n<\/p><p>It is not intended to imply whether an application is actually licensed for use. \n<\/p><p>\u4ed6\u4e0d\u662f\u60f3\u8981\u53bb\u6697\u793a\u8fd9\u4e2a\u5e94\u7528\u662f\u5426\u88ab\u8bb8\u53ef\u53ef\u4ee5\u4f7f\u7528.\n<\/p><p>That is, when an application's license validity period expires, this does not mean that the application is no longer licensed for use \u2014 rather, it indicates only that the Policy must recheck the licensing status with the server.\n<\/p><p>\u800c\u662f,\u5f53\u4e00\u4e2a\u5e94\u7528\u7684\u8bb8\u53ef\u8fc7\u671f\u4e86,\u8fd9\u4e0d\u610f\u5473\u7740\u8fd9\u4e2a\u5e94\u7528\u518d\u4e5f\u4e0d\u80fd\u88ab\u8bb8\u53ef\u4f7f\u7528\u4e86\u2014\u800c\u662f,\u4ed6\u6697\u793a\u53ea\u6709Policy\u5fc5\u987b\u91cd\u65b0\u4f7f\u7528\u670d\u52a1\u5668\u68c0\u67e5\u8bb8\u53ef\u72b6\u6001. \n<\/p><p>It follows that, as long as the license validity period has not expired, it is acceptable for the Policy to cache the initial license status locally and return the cached license status instead of sending a new license check to the server.\n<\/p><p>\u53ea\u8981\u8bb8\u53ef\u6709\u6548\u671f\u6ca1\u6709\u8fc7\u671f,\u4ed6\u5c31\u53ef\u4ee5\u88abPolicy\u63a5\u53d7\u5e76\u7f13\u5b58\u6700\u521d\u7684\u8fd8\u6ca1\u6709\u8fc7\u671f\u7684\u8bb8\u53ef\u72b6\u6001\u5230\u672c\u5730,\u7136\u540e\u8fd4\u56de\u7f13\u5b58\u7684\u8bb8\u53ef\u72b6\u6001\u800c\u4e0d\u662f\u5411\u670d\u52a1\u5668\u53d1\u9001\u4e00\u4e2a\u65b0\u7684\u8bb8\u53ef\u68c0\u67e5.\n<\/p><p>The licensing server manages the validity period as a means of helping the application properly enforce licensing across the refund period offered by Google Play for paid applications. It sets the validity period based on whether the application was purchased and, if so, how long ago. Specifically, the server sets a validity period as follows:\n<\/p><p>\u4f5c\u4e3a\u4e00\u79cd\u8f85\u52a9\u5728google play\u4e0a\u7684\u4ed8\u8d39\u5e94\u7528\u6070\u5f53\u7684\u5f3a\u5236\u8bb8\u53ef\u7684\u65b9\u5f0f,\u8bb8\u53ef\u670d\u52a1\u5668\u4f1a\u7ba1\u7406\u8be5\u5e94\u7528\u7684\u8bb8\u53ef\u6709\u6548\u65f6\u95f4.\u4ed6\u5224\u65ad\u662f\u5426\u8fd9\u4e2a\u5e94\u7528\u662f\u4ed8\u8d39\u7684,\u5982\u679c\u662f,\u5141\u8bb8\u4f7f\u7528\u591a\u957f\u65f6\u95f4 , \u901a\u8fc7\u8fd9\u4e2a\u6765\u8bbe\u7f6e\u8bb8\u53ef\u7684\u6709\u6548\u65f6\u95f4.\u5177\u4f53\u6765\u8bf4,\u670d\u52a1\u5668\u8bbe\u7f6e\u6709\u6548\u671f\u7684\u65b9\u6cd5\u5982\u4e0b:\n<\/p><p>\u2022\tFor a paid application, the server sets the initial license validity period so that the license response remains valid for as long as the application is refundable. A licensing Policy in the application may cache the result of the initial license check and does not need to recheck the license until the validity period has expired.\n<\/p><p>\u2022\t\u5bf9\u4e8e\u4e00\u4e2a\u4ed8\u8d39\u7684\u5e94\u7528,\u670d\u52a1\u5668\u901a\u8fc7\u8bbe\u7f6e\u6700\u521d\u7684\u8bb8\u53ef\u6709\u6548\u671f\u6765\u4f7f\u8bb8\u53ef\u54cd\u5e94\u4fdd\u6301\u6709\u6548.\u53ea\u8981\u5e94\u7528\u5728\u9000\u8fd8\u671f.\u4e00\u4e2a\u5728\u5e94\u7528\u4e2d\u7684\u8bb8\u53efPolicy\u53ef\u80fd\u7f13\u5b58\u6700\u521d\u8bb8\u53ef\u8bc1\u7684\u68c0\u67e5\u7ed3\u679c,\u800c\u4e0d\u9700\u8981\u91cd\u65b0\u68c0\u67e5\u8bb8\u53ef\u76f4\u5230\u6709\u6548\u671f\u7ed3\u675f.\n<\/p><p>\u2022\tWhen an application is no longer refundable, the server sets a longer validity period \u2014 typically a number of days.\n<\/p><p>\u2022\t\u5f53\u4e00\u4e2a\u5e94\u7528\u4e0d\u518d\u53ef\u4ee5\u9000\u8fd8,\u670d\u52a1\u5668\u4f1a\u8bbe\u7f6e\u4e00\u4e2a\u6bd4\u8f83\u957f\u7684\u6709\u6548\u671f,\u901a\u5e38\u662f\u5f88\u591a\u5929.\n<\/p><p>\u2022\tFor a free application, the server sets the validity period to a very high value (long.MAX_VALUE). This ensures that, provided the Policy has cached the validity timestamp locally, it will not need to recheck the license status of the application in the future.\n<\/p><p>\u2022\t\u5bf9\u4e8e\u4e00\u4e2a\u514d\u8d39\u7684\u5e94\u7528,\u670d\u52a1\u5668\u8bbe\u7f6e\u6709\u6548\u671f\u4e3a\u4e00\u4e2a\u975e\u5e38\u5927\u7684\u6570\u503c(long.MAX_VALUE).\u8fd9\u6837\u53ef\u4ee5\u786e\u4fddPolicy\u5df2\u7ecf\u5728\u672c\u5730\u7f13\u5b58\u4e86\u4e00\u4e2a\u6709\u6548\u7684\u65f6\u95f4\u6233,\u4ed6\u5728\u5c06\u6765\u4e0d\u9700\u8981\u91cd\u65b0\u68c0\u67e5\u8bb8\u53ef\u72b6\u6001.\n<\/p><p>The ServerManagedPolicy implementation uses the extracted timestamp (mValidityTimestamp) as a primary condition for determining whether to recheck the license status with the server before allowing the user access to the application.\n<\/p><p>ServerManagedPolicy (\u670d\u52a1\u7ba1\u7406\u7b56\u7565)\u7684\u5b9e\u73b0\u4f7f\u7528\u4e86\u63d0\u53d6\u5230\u7684\u65f6\u95f4\u6233(mValidityTimestamp)\u6765\u4f5c\u4e3a\u57fa\u672c\u7684\u5224\u65ad\u662f\u5426\u9700\u8981\u5728\u5141\u8bb8\u7528\u6237\u4f7f\u7528\u8be5\u5e94\u7528\u4e4b\u524d\u901a\u8fc7\u670d\u52a1\u5668\u91cd\u65b0\u68c0\u67e5\u8bb8\u53ef\u72b6\u6001\u7684\u6761\u4ef6\n<\/p>\n<h3> <span class=\"mw-headline\" id=\"Retry_period_and_maximum_retry_count-.E8.AF.95.E7.94.A8.E6.97.B6.E9.97.B4.E5.92.8C.E6.9C.80.E5.A4.A7.E4.BD.BF.E7.94.A8.E6.AC.A1.E6.95.B0\">Retry period and maximum retry count-\u8bd5\u7528\u65f6\u95f4\u548c\u6700\u5927\u4f7f\u7528\u6b21\u6570<\/span><\/h3>\n<p>In some cases, system or network conditions can prevent an application's license check from reaching the licensing server, or prevent the server's response from reaching the Google Play client application. For example, the user might launch an application when there is no cell network or data connection available\u2014such as when on an airplane\u2014or when the network connection is unstable or the cell signal is weak.\n<\/p><p>\u5728\u4e00\u4e9b\u60c5\u51b5\u4e0b,\u7cfb\u7edf\u6216\u7f51\u7edc\u6761\u4ef6\u53ef\u80fd\u963b\u6b62\u5e94\u7528\u901a\u8fc7\u8bb8\u53ef\u670d\u52a1\u5668\u8fdb\u884c\u8bb8\u53ef\u68c0\u67e5\u6216\u8005\u963b\u6b62\u6765\u81eagoogle play\u5ba2\u6237\u7aef\u7684\u670d\u52a1\u5668\u54cd\u5e94.\u4f8b\u5982,\u7528\u6237\u53ef\u80fd\u5728\u6ca1\u6709\u57fa\u7ad9\u7f51\u7edc\u6216\u8005\u6570\u636e\u8fde\u63a5\u7684\u73af\u5883\u4e0b\u542f\u52a8\u5e94\u7528\u2014\u6bd4\u5982\u5728\u98de\u673a\u4e0a\u2014\u6216\u8005,\u57fa\u7ad9\u4fe1\u53f7\u5f88\u5f31\u6216\u8005\u7f51\u7edc\u90e8\u7a33\u5b9a.\n<\/p><p>When network problems prevent or interrupt a license check, the Google Play client notifies the application by returning a RETRY response code to the Policy's processServerResponse() method. In the case of system problems, such as when the application is unable to bind with Google Play's ILicensingServiceimplementation, the LicenseChecker library itself calls the Policy processServerResonse() method with aRETRY response code.\n<\/p><p>\u5f53\u7f51\u7edc\u95ee\u9898\u963b\u6b62\u6216\u8005\u4e2d\u65ad\u4e86\u8bb8\u53ef\u68c0\u67e5,googleplay\u5ba2\u6237\u7aef\u4f1a\u901a\u8fc7\u8fd4\u56de\u4e00\u4e2aRRTRY\u54cd\u5e94\u7801\u7ed9Policy\u7684processServerResponse() \u65b9\u6cd5\u6765\u901a\u77e5\u5e94\u7528\u8fd9\u4e2a\u60c5\u51b5.\u5728\u7cfb\u7edf\u95ee\u9898\u60c5\u51b5\u4e0b,\u6bd4\u5982\u5f53\u5e94\u7528\u4e0d\u80fd\u548cgoogle play\u7684 ILicensingService\u670d\u52a1\u7ed1\u5b9a, LicenseChecker\u5e93\u4f1a\u4f7f\u7528RETRY\u54cd\u5e94\u7801\u6765\u8c03\u7528processServerResonse()\u65b9\u6cd5.\n<\/p><p>In general, the RETRY response code is a signal to the application that an error has occurred that has prevented a license check from completing.\n<\/p><p>\u4e00\u822c\u7684,RETRY\u54cd\u5e94\u7801\u4e00\u822c\u8868\u660e\u5e94\u7528\u5b58\u5728\u4e00\u4e2a\u9519\u8bef\u5bfc\u81f4\u4e0d\u80fd\u5b8c\u6210\u8bb8\u53ef\u68c0\u67e5.\n<\/p><p>The Google Play server helps an application to manage licensing under error conditions by setting a retry \"grace period\" and a recommended maximum retries count. The server includes these values in all license check responses, appending them as extras under the keys GT and GR.\n<\/p><p>Google play\u670d\u52a1\u5668\u901a\u8fc7\u8bbe\u7f6e\u4e00\u4e2a\u201d\u5bbd\u9650\u671f\u201d\u5e76\u8bbe\u7f6e\u6700\u591a\u4f7f\u7528\u6b21\u6570\u6765\u5e2e\u52a9\u5e94\u7528\u5728\u5b58\u5728\u9519\u8bef\u7684\u60c5\u51b5\u4e0b\u5904\u7406\u8bb8\u53ef.\u670d\u52a1\u5668\u5728\u6240\u6709\u7684\u8bb8\u53ef\u68c0\u67e5\u54cd\u5e94\u4e2d\u5305\u542b\u8fd9\u4e9b\u503c,\u4ed6\u4eec\u88ab\u4f5c\u4e3aGT\u548cGR\u7684\u8ffd\u52a0\u503c.\n<\/p><p>The application Policy can extract the GT and GR extras and use them to conditionally allow access to the application, as follows:\n<\/p><p>\u5e94\u7528\u7684Policy\u53ef\u4ee5\u63d0\u53d6GT\u548cGR\u503c\u5e76\u4f7f\u7528\u5b83\u4eec\u6765\u6709\u6761\u4ef6\u5141\u8bb8\u7528\u6237\u4f7f\u7528\u5e94\u7528\u7a0b\u5e8f:\n<\/p><p>\u2022\tFor a license check that results in a RETRY response, the Policy should cache the RETRY response code and increment a count of RETRY responses.\n<\/p><p>\u2022\t\u5982\u679c\u8bb8\u53ef\u68c0\u67e5\u8fd4\u56deRETRY\u54cd\u5e94,Policy\u5e94\u8be5\u7f13\u5b58RETRY\u54cd\u5e94\u7801\u5e76\u8bb0\u5f55,\u5e76\u4e0d\u65ad\u589e\u52a0RETRY\u7684\u54cd\u5e94\u6b21\u6570\n<\/p><p>\u2022\tThe Policy should allow the user to access the application, provided that either the retry grace period is still active or the maximum retries count has not been reached.\nThe ServerManagedPolicy uses the server-supplied GT and GR values as described above. The example below shows the conditional handling of the retry responses in the allow() method. The count of RETRY responses is maintained in the processServerResponse() method, not shown.\n<\/p><p>\u5982\u679c\u8bd5\u7528\u7684\u201d\u5bbd\u9650\u671f\u201d\u8fd8\u6ca1\u5230\u6216\u8005\u6700\u5927\u4f7f\u7528\u6b21\u6570\u8fd8\u6ca1\u5230,\u90a3Policy\u5e94\u8be5\u5141\u8bb8\u7528\u6237\u8bbf\u95ee\u5e94\u7528. ServerManagedPolicy\u4f7f\u7528\u670d\u52a1\u5668\u63d0\u4f9b\u7684GT\u548cGR\u503c.\u4e0b\u9762\u7684\u4f8b\u5b50\u5728allow()\u65b9\u6cd5\u4e2d\u5c55\u793a\u4e86\u600e\u4e48\u5904\u7406\u4f7f\u7528\u65f6\u7684\u54cd\u5e94.RETRY\u7684\u6570\u91cf\u5728processServerResponse()\u65b9\u6cd5\u4e2d\u4fdd\u5b58,\u5728\u8fd9\u91cc\u6ca1\u6709\u5c55\u793a.\n<\/p>\n<pre class=\"java\">&#160;\n<span style=\"color: #000000; font-weight: bold;\">public<\/span> <span style=\"color: #993333;\">boolean<\/span> allowAccess<span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #66cc66;\">&#41;<\/span> <span style=\"color: #66cc66;\">&#123;<\/span>\n    <span style=\"color: #993333;\">long<\/span> ts = <a href=\"http:\/\/www.google.com\/search?hl=en&amp;q=allinurl%3ASystem+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky\"><span style=\"color: #aaaadd; font-weight: bold;\">System<\/span><\/a>.<span style=\"color: #006600;\">currentTimeMillis<\/span><span style=\"color: #66cc66;\">&#40;<\/span><span style=\"color: #66cc66;\">&#41;<\/span>;\n    <span style=\"color: #b1b100;\">if<\/span> <span style=\"color: #66cc66;\">&#40;<\/span>mLastResponse == LicenseResponse.<span style=\"color: #006600;\">LICENSED<\/span><span style=\"color: #66cc66;\">&#41;<\/span> <span style=\"color: #66cc66;\">&#123;<\/span>\n        <span style=\"color: #808080; font-style: italic;\">\/\/ Check if the LICENSED response occurred within the validity timeout.<\/span>\n        <span style=\"color: #b1b100;\">if<\/span> <span style=\"color: #66cc66;\">&#40;<\/span>ts &lt;= mValidityTimestamp<span style=\"color: #66cc66;\">&#41;<\/span> <span style=\"color: #66cc66;\">&#123;<\/span>\n            <span style=\"color: #808080; font-style: italic;\">\/\/ Cached LICENSED response is still valid.<\/span>\n            <span style=\"color: #000000; font-weight: bold;\">return<\/span> <span style=\"color: #000000; font-weight: bold;\">true<\/span>;\n        <span style=\"color: #66cc66;\">&#125;<\/span>\n    <span style=\"color: #66cc66;\">&#125;<\/span> <span style=\"color: #b1b100;\">else<\/span> <span style=\"color: #b1b100;\">if<\/span> <span style=\"color: #66cc66;\">&#40;<\/span>mLastResponse == LicenseResponse.<span style=\"color: #006600;\">RETRY<\/span> &amp;&amp;\n                ts &lt; mLastResponseTime + MILLIS_PER_MINUTE<span style=\"color: #66cc66;\">&#41;<\/span> <span style=\"color: #66cc66;\">&#123;<\/span>\n        <span style=\"color: #808080; font-style: italic;\">\/\/ Only allow access if we are within the retry period or we haven't used up our<\/span>\n        <span style=\"color: #808080; font-style: italic;\">\/\/ max retries.<\/span>\n        <span style=\"color: #000000; font-weight: bold;\">return<\/span> <span style=\"color: #66cc66;\">&#40;<\/span>ts &lt;= mRetryUntil || mRetryCount &lt;= mMaxRetries<span style=\"color: #66cc66;\">&#41;<\/span>;\n    <span style=\"color: #66cc66;\">&#125;<\/span>\n    <span style=\"color: #000000; font-weight: bold;\">return<\/span> <span style=\"color: #000000; font-weight: bold;\">false<\/span>;\n<span style=\"color: #66cc66;\">&#125;<\/span>\n&#160;<\/pre>"}